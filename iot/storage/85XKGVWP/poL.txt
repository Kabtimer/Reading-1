Universidad de Cuenca

Figura 4.8: Ambiente 2 - Río Machángara
menor. Se observaron principalmente dos clases de vegetación: arbustos de hasta tres metros de altura y gran cantidad de eucaliptos de hasta siete metros de altura, con espaciamientos de entre tres y siete metros entre ellos. Topografía La topografía del lugar escogido no presenta grandes pendientes, por lo que puede considerarse plana. Otros De igual manera que en el ambiente 1, se debe considerar, en el análisis de resultados que en algunos puntos, debido a la metodología de medición que será descrita en la Sección 4.5, algunos envíos resultan en zonas poco favorables en cuanto a la altura del transmisor o a la vegetación cercana.
4.4.3. Ambiente 3: Rural - Rio Yanuncay
Las WSN, como se revisó en el segundo capítulo, pueden ser desplegadas en variedad de ambientes. Es por esta razón que el tercer ambiente complementa los anteriores, presentando un escenario rural libre de ediﬁcaciones. De manera especíﬁca, las mediciones se realizaron en la población de Barabón. En la Figura 4.9 se presenta el tramo medido, que tiene las siguientes características:

Pablo Avila Campos

36

Universidad de Cuenca

Figura 4.9: Ambiente 3 - Río Yanuncay

Figura 4.10: Ambiente 3 - Esquema de Elevación

Vegetación En el caso de este río, se observó mayor densidad de vegetación así como una mayor variedad de especies de árboles y plantas. Existen árboles entre 1 y 7 metros de altura, plantados a menos de un metro de distancia entre los mismos.
Topografía
La zona elegida está cerca al parque nacional El Cajas, por lo que presenta una tendencia a la elevación del terreno que se observa claramente en la Figura 4.10. Otros Al no existir construcciones aledañas, se observa una mejora signiﬁcativa en términos de RSSI, SNR y número de paquetes recibidos, lo cual será analizado en el Capítulo 5.

Pablo Avila Campos

37

Universidad de Cuenca
4.5. Descripción del Procedimiento
El procedimiento de medición, consistió en el envío de paquetes desde un transmisor (mota) que variaba su distancia en intervalos ﬁjos. El receptor (Gateway), y el transmisor fueron colocados de manera ﬁja a una altura de 2 metros sobre el nivel del suelo, con el objetivo de que la señal pase a través de la vegetación. Tanto el transmisor como el receptor cuentan con antenas de 1.3 dBi de ganancia. En cada punto se enviaron 20 paquetes, de los cuales se recolectó RSSI, SNR y número de paquetes no recibidos.

4.5.1. Intervalos de Medición
Para la adquisición de datos, se utilizó el proceso de medición llamado de promediado espacial, propuesto por [44]. De acuerdo a este procedimiento, uno debe moverse una distancia de entre 20λ y 40λ en una frecuencia dada.

Como se dijo en el marco teórico, LoRaWAN hace saltos pseudoaleatorios de frecuencia, sin embargo, para el cálculo realizado en las ecuaciones (4.1), (4.2) y (4.3), se consideró la frecuencia de funcionamiento de los equipos de 915 MHz.

λ=

c f

=

3 ∗ 108 915 ∗ 106

= 0,327m

(4.1)

20 ∗ λ = 6,54m

(4.2)

40 ∗ λ = 13,08m

(4.3)

Dado que el valor debe estar en el intervalo entre (4.2) y (4.3), se eligió 10 m por operatividad.

4.5.2. Paquetes Enviados
Dado que los equipos descritos utilizan LoRaWAN, la conﬁguración de parámetros como el SF, BW, y CR se encuentran limitados, no sólo por la especiﬁcación de parámetros regionales de LoRaWAN [45], que se puede encontrar en la Tabla 2.3 sino por las características técnicas del kit de desarrollo utilizado. En la Tabla 4.1, se muestran los DR permitidos.

Pablo Avila Campos

38

Universidad de Cuenca

Tabla 4.1: Tasas de Datos Permitidas Data Rate Conﬁguración [SF/BW] Bit Rate [bit/sec]

0

SF10 / 125 kHz

1

SF9 / 125 kHz

2

SF8 / 125 kHz

3

SF7 / 125 kHz

980 1760 3125 5470

Figura 4.11: Captura de Paquetes
Dado que es un estudio inicial, se utilizaron las tasas de datos mínima y máxima DR0 y DR3 en cada punto de envío con 10 paquetes para cada DR. Para facilitar el cálculo de paquetes perdidos, cada mensaje es enviado con un número de envío en su carga útil.
4.5.3. Captura de Paquetes
Al ser este un trabajo de evaluación referente a parámetros físicos de la tecnología LoRaWAN, y por la facilidad de guardado de los paquetes recibidos, se optó por no utilizar el servidor LoRaWAN puesto que los valores de RSSI, SNR y carga útil se pueden obtener y almacenar de una manera más óptima haciendo una captura de los mismos, la conﬁguración se detalla en el Apéndice A.1.
Dado que el Gateway recibe los paquetes y los envía por el puerto Ethernet hacia el servidor, estos pueden ser fácilmente capturados con un software como Wireshark. En Wireshark, se realiza la captura de los 20 paquetes enviados y se los guarda para su posterior desencriptado.
En la Figura 4.11 se muestra la imagen de una de las capturas realizadas con Wireshark y guardadas en formato .txt:
Como se observa, los paquetes de DR0 y DR3, se encuentran mezclados y la carga útil, se encuentra encriptada, por lo que es necesario un proceso de selección, desencriptado y almacenamiento, descrito en la Sección 4.5.4.

Pablo Avila Campos

39

Universidad de Cuenca
4.5.4. Desencriptado y Almacenamiento
Para realizar la separación, desencriptado y almacenamiento de los paquetes, se hizo un script en Python que utiliza el decodiﬁcador de paquetes de LoRaWAN [46]. este decodiﬁcador, requiere de la instalación previa de Node.js y npm, que son plataformas de programación basadas en Javascript. El decodiﬁcador, también distingue los diferentes tipos de paquetes posibles, por lo que fue necesario modiﬁcarlo para realizar sólo la decodiﬁcación. El código ﬁnal, se encuentra en el Apéndice B. El código en Python realiza el siguiente procedimiento:
• Separa los diferentes paquetes en sus componentes (RSSI, SNR, frecuencia, modulación, tasa de codiﬁcación, canal y carga útil)
• Decodiﬁca las cargas útiles de cada uno de los paquetes • Separa los paquetes con DR0 de los de DR3 • Almacena cada captura en un archivo .csv • Crea un archivo resumen con las medias y desviaciones estándar de los RSSI y SNR.
4.6. Métricas de Análisis de Datos
A continuación, se desarrollan las herramientas que serán utilizadas para el análisis de las mediciones obtenidas en los tres ambientes anteriormente descritos.
4.6.1. Descripción de Datos con Medidas Numéricas
Las medidas numéricas carecen de la efectividad de las gráﬁcas, sin embargo ayudan a tener una idea de la tendencia de los datos sin la necesidad de observar la imagen de los mismos [47].
Medidas Centrales: Son medidas a lo largo del eje horizontal de una distribución que localizan el centro de la misma. La media, mediana y moda son utilizados para describir conjuntos de datos.
Medidas de Variabilidad: Dos conjuntos de datos pueden tener el mismo centro pero diferente dispersión o variación. Las medidas de variabilidad ayudan a crear una imagen de la distribución de los datos. Entre ellas se encuentra el rango, que es la diferencia entre la medición más grande y la más pequeña; la varianza de la población y de la muestra que se deﬁnen como los promedios de los cuadrados de las desviaciones alrededor de la media. La desviación estándar es igual a la raiz cuadrada positiva de la varianza. Una

Pablo Avila Campos

40

Universidad de Cuenca
característica de ésta es que su unidad de medida es la misma que la de las mediciones [47].

4.6.2. Estimación de Intervalos de Conﬁanza
Se trata de encontrar un intervalo en el que se esté seguro con cierta probabilidad de que sea un parámetro de interés. Esta probabilidad se llama coeﬁciente de conﬁanza. Usualmente se construyen intervalos de conﬁanza al 95 % [47].

Construcción del Intervalo de Conﬁanza

Cuando la distribución muestral de una variable, en el caso el RSSI, es aproximadamente normal, se puede aplicar la Ecuación 4.4 que se basa en el número de muestras y en la desviación estándar.

media ± 1,96 ∗

θ √

n

Siendo θ la desviación estándar y n el número de muestras. Intervalo de Conﬁanza en el Caso de cantidades de Muestras Pequeñas

(4.4)

Existen casos en el que es difícil o resulta costoso obtener un gran número de observaciones. En estos casos la Ecuación 4.4 puede no aplicarse, siendo necesaria una distribución alternativa como la t Student [48]. En este caso, el intervalo de conﬁanza se puede encontrar con la Ecuación 4.5.

media ± t ∗ √θ n

(4.5)

El valor de t se encuentra en la tabla de la distribución t Student, en donde se deben tomar en cuenta n − 1 grados de libertad, además del nivel de conﬁanza típico de 0.95. Dado que las muestras de este trabajo tienen un n = 10, se debe utilizar la distribución t-student para calcular los intervalos de conﬁanza.

4.6.3. Análisis de Correlación
El análisis de correlación, se basa en el coeﬁciente de correlación (r) que no es más que una medida de la fuerza de la relación entre dos variables. Este puede asumir valores entre -1 y +1. Un r = −1 indica una relación negativa perfecta entre las variables. En general, mientras mayor

Pablo Avila Campos

41

Universidad de Cuenca
sea el valor absoluto de r, más fuerte será la relación entre las variables [48].
Este análisis es usado en este trabajo para determinar la fuerza de la relación entre las mediciones 1 y 2 que se realizaron en dos orillas diferentes del mismo río (Ambiente 1).
4.6.4. Comparación de Poblaciones
El objetivo de esta prueba es el de comparar las mediciones de RSSI entre los tres ambientes estudiados. Para esto, se utiliza el test de Kruskal-Wallis que prueba la hipótesis con respecto a la distribución de tres o más poblaciones, utilizando las medianas. Esto se lo hace puesto que el RSSI no sigue una distribución normal. Se prueba la hipótesis nula de que los tres ambientes tienen la misma distribución [47].
Esto se realiza con el objetivo de saber si es necesario hacer un ajuste a los tres ambientes deﬁnidos. En el caso de que se cumpla la hipótesis alternativa de que al menos un ambiente es diferente, se procede a realizar el test de Dunn que reporta los resultados entre las combinaciones de los ambientes [47]. Estas pruebas, se realizarán utilizando el software libre de análisis estadístico R1.
4.7. Conclusiones
La evaluación de rango de transmisión requiere que se tomen en cuenta diferentes variables que, para este trabajo, se basan en el procedimiento y equipos que son descritos con detalle en este capítulo.
El kit de Evaluación de LoRa tiene la ventaja de que permite variar la mayoría de los parámetros de conﬁguración disponibles en LoRa, esto con el objetivo de realizar pruebas globales del sistema. La adición de sensores de temperatura y luz en la mota, permiten probar la ﬁabilidad en la transmisión de la información. La adición de una interfaz gráﬁca en conjunto con un servidor pre conﬁgurado, ayudan a que la experiencia del usuario ante esta nueva tecnología sea la mejor.
Los ambientes escogidos para la toma de muestras de RSSI, SNR y PER obedecen a la necesidad del despliegue de sensores en las orillas de ríos en la ciudad de Cuenca que ayuden al monitoreo en tiempo real del caudal de los mismos. Para ganar generalidad se escogieron tres ambientes: urbano, semiurbano y rural cuyos datos y resultados, son explicados en capítulos posteriores.
1https://www.r-project.org/

Pablo Avila Campos

42

Universidad de Cuenca
Las pruebas estadísticas como el análisis de correlación y los test de comparación de distribuciones, ayudarán a validar las mediciones realizadas, interpretar y a mostrar los resultados de la mejor manera.
Por otro lado, como se explicó en la introducción, se ha considerado como importante el describir con exactitud el procedimiento de medición para que el mismo pueda ser validado y de ser necesario, replicado.

Pablo Avila Campos

43

Universidad de Cuenca
Capítulo 5
Resultados: Análisis de Mediciones y Ajuste del Modelo Empírico basado en RSSI y SNR
En este capítulo se cumple el último objetivo planteado en este trabajo, que es el de ajustar un modelo de pérdidas de trayectoria para el uso de LoRa en margenes de ríos con ambientes forestales. Antes del ajuste, se realizan pruebas estadísticas de validación que demuestran que la correlación entre las dos orillas de un río es alta y que no existe relación de distribuciones entre los ambientes urbano y semiurbano. Se comparan los diferentes ambientes y se muestra cómo la desviación estándar disminuye en el ambiente rural debido a que existen menos obstáculos. Finalmente, se muestran las pérdidas de paquetes en las mediciones como medida de calidad de la transmisión.

Pablo Avila Campos

44

Universidad de Cuenca
5.1. Introducción
Como se planteó en el capítulo anterior, con los valores de RSSI y SNR, se puede generar un modelo de pérdidas de trayectoria que sea ﬁable y que pueda ser ajustable a una ecuación logarítmica que sirva para hacer estimaciones de cobertura y simulaciones con redes de sensores que usen tecnología LoRaWAN. Antes de generar los modelos, se puede realizar un análisis estadístico de correlación que conﬁrme la hipótesis de que no existe gran diferencia en la propagación de las dos orillas de un mismo río. Esto se lo realizó únicamente con el ambiente 1 (Río Tomebamba).
Los modelamientos se los realizó con la función ﬁt de Matlab. En estos se conﬁrma que los ambientes rurales presentan menos obstáculos por lo que se observa un mayor alcance. Por otro lado, se calcula la desviación estándar que está ligada al llamado desvanecimiento por sombra, provocado por obstáculos.
Para ﬁnalizar, como se propuso en el primer capítulo, se utiliza la tasa de pérdida de paquetes para saber cuando la transmisión ya no es ﬁable y por lo tanto las mediciones deben detenerse. Dependiendo de la aplicación, el porcentaje de paquetes perdidos aceptable varía, sin embargo, para este procedimiento, y teniendo en cuenta que la frecuencia de transmisión máxima típica de redes LoRaWAN es de cinco minutos, se ﬁjó un límite del 60 % de paquetes perdidos para detener la medición.
5.2. Mediciones Previas
En este punto se describen algunas de las mediciones que sirvieron para determinar la inﬂuencia del salto de frecuencia de LoRaWAN, el número óptimo de paquetes a enviar y el índice de potencia a seleccionar.
5.2.1. Salto de Frecuencia
Como se explicó en la Sección 2.5, referente a las reglas que utilizan los dispositivos con LoRaWAN, los dispositivos ﬁnales o nodos transmiten en diferentes canales de manera pseudoaleatoria. Como se observa en la Figura 5.1, al transmitir 100 paquetes en un ambiente de prueba, la frecuencia varía desde 902.3 MHz hasta 903.5 MHz, en intervalos de 200 kHz. El objetivo de este estudio previo fue el de deﬁnir si el canal atenúa el RSSI de manera selectiva en determinadas frecuencias.

Pablo Avila Campos

45

Universidad de Cuenca

Figura 5.1: Valores de RSSI obtenidos para las diferentes frecuencias
De la Figura 5.1, se puede concluir que no existe un canal selectivo por lo que el salto de frecuencia propuesto por LoRaWAN, es válido.
5.2.2. Cantidad de Paquetes
Para determinar el número de paquetes necesarios en cada punto de transmisión, primero se revisó en los diferentes trabajos que fueron parte del estado del arte, presentado en el capítulo 3. En estos se enviaban diferentes cantidades de paquetes y no se da una explicación a esto. Por este motivo se realizó una prueba en la que se fueron enviando diferentes cantidades de paquetes y se calculó la desviación estándar de cada grupo. En la Tabla 5.1, se observan los resultados. Se observa que de manera general, la desviación estándar disminuye 1 dBm. Aunque existe esta disminución, la misma no es signiﬁcativa, por lo que, como se explicó en la sección 4.5.2, en cada transmisión se envían 10 paquetes.
5.2.3. Índice de Potencia
El índice de potencia deﬁne la potencia con la que el nodo o mota transmite el paquete. El módulo de Microchip RN2903, admite los índices 5, 7, 8, 9, 10 [49]. Se sabe que la potencia

Pablo Avila Campos

46

Universidad de Cuenca

Tabla 5.1: Resultados de Desviación Estándar con diferentes número de paquetes

Prueba Nro. Nro. Paquetes Desviación Estándar (dBm)

1

10

1.94

2

20

1.16

3

30

1.76

4

40

1.63

5

50

2.06

6

60

1.57

7

70

1.18

8

80

1.10

9

90

1.25

10

100

1.05

máxima de transmisión pertenece al índice 5, sin embargo, se realizó una prueba en un ambiente controlado, variando este índice. Los resultados, se observan en la Tabla 5.2.

Tabla 5.2: Variación de Índices de Potencia Índice RSSI promedio (dBm)

5

-23.7

7

-27.9

8

-29.8

9

-30.2

10

-32.3

Como se observa en la Tabla 5.2, el índice 5, provee el mayor RSSI por lo que fue seleccionado para usarse en las mediciones mostradas en la Sección 5.3. Se debe acotar que no se encontró una referencia a la potencia de transmisión de los otros índices. Esta información, fue solicitada a Microchip, sin obtener respuesta.

5.3. Mediciones de RSSI y SNR
Para estas gráﬁcas se tomó en cuenta una distribución t student en cada punto debido al reducido número de muestras (10). En cada gráﬁca, se muestra la media y el intervalo de conﬁanza al 95 %. En las Figuras 5.2 y 5.3, se observan el RSSI y SNR correspondientes a la primera medición. Los demás resultados de las mediciones de RSSI y SNR, se muestran en las gráﬁcas del Apéndice C.

Pablo Avila Campos

47

Universidad de Cuenca Figura 5.2: Medición de RSSI en Ambiente 1 con DR0

Figura 5.3: Medición de SNR en Ambiente 1 con DR0

Pablo Avila Campos

48

Universidad de Cuenca
5.4. Análisis Estadísticos
A continuación, se presentan los análisis estadísticos que ayudarán a validar las mediciones y a comprobar las hipótesis planteadas en este trabajo.
5.4.1. Correlación
Como se mencionó en el capítulo anterior, la correlación muestra la fuerza de la relación entre dos variables. En este caso, se quiere mostrar que la relación entre los RSSI de las dos orillas del Ambiente 1 - Rio Tomebamba, es fuerte. Esto indicaría que el cambio de orilla y ligera variación de topografía y vegetación, no afecta en gran medida a los valores de RSSI. Las características del ambiente probado se detallan en la Sección 4.4.1.
Análisis de Correlación con DR0
El análisis de correlación muestra una fuerte relación entre las dos orillas presentando un valor de 0.92. En la Figura 5.4, se presentan los dos RSSI con DR0 del Ambiente 1. Como se puede observar, se presenta una clara tendencia de linealidad que conﬁrma el alto valor de correlación. Análisis de Correlación con DR3
De igual manera que en el punto anterior, el valor de correlación muestra una alta relación entre los valores de RSSI de ambas orillas del río Tomebamba. El valor obtenido es de 0.92. De igual manera, la gráﬁca conﬁrma una fuerte relación entre ambas variables. Figura 5.5.
5.4.2. Comparación de Ambientes
Como se explicó en la sección 4.6.4, se realizará una prueba de comparación de las distribuciones en los tres ambientes de medición (urbano, semiurbano y rural). Esto con el objetivo de probar que se requiere un ajuste para cada entorno. Como se observa en la sección 5.3, las mediciones realizadas tanto de RSSI como de SNR, con DR0 y DR3 son muy parecidas por lo que estas pruebas estadísticas se realizarán solamente con los valores de RSSI con DR0 de las Mediciones 1, 3 y 4.
Test de Kruskal-Wallis Al realizar el Test de Kruskal-Wallis en R, se obtuvo un valor p de 0.01. Al ser menor a 0.05, indica una fuerte evidencia en contra de la hipótesis nula, así

Pablo Avila Campos

49

Universidad de Cuenca Figura 5.4: Análisis de Correlación de RSSI con DR0 - Ambiente 1

Figura 5.5: Análisis de Correlación de RSSI con DR3 - Ambiente 1

Pablo Avila Campos

50

Universidad de Cuenca
que se puede rechazar la misma. Por lo tanto, las distribuciones de los tres ambientes, no son iguales. Para determinar que ambientes son estadísticamente iguales y cuales no, se utiliza el Test de Dunn. Test de Dunn Una vez realizado el Test de Dunn, en la Tabla 5.3 se pueden observar los resultados de la comparación:

Tabla 5.3: Valores P del Test de Dunn

Valor P

Rural SemiUrbano

SemiUrbano 0.0010

Urbano

0.3788

0.01

Se puede observar que la única combinación que no rechaza la hipótesis nula es la de Urbano con Rural. Se puede decir entonces que las distribuciones de las demás combinaciones no están relacionadas. Test de Mann-Whitney-Wilcoxon Ya que al parecer no existe una diferencia signiﬁcativa en las mediciones urbana y rural, se decidió hacer el test de Mann-Whitney-Wilcoxon que prueba la independencia de dos poblaciones sin la necesidad de asumir que las mismas tienen distribuciones normales [47, 48]. El valor p obtenido fue de 0.9721 por lo que nuevamente se concluye que no existe suﬁciente evidencia para concluir que los ambientes urbano y rural sean diferentes. Estos test estadísticos no son usuales en el área de telecomunicaciones, por lo que se recomienda una futura veriﬁcación y validación de los resultados obtenidos.

5.5. Modelamiento en Base a Pérdidas de Trayectoria

Como se explicó en la sección 2.6, la ecuación que se utiliza para el modelamiento es una logarítmica. (Ecuación 5.1).

PL(dB) = a + b ∗ log(d) + Xθ

(5.1)

Para realizar el ajuste se debe calcular las pérdidas de trayectoria (P L) utilizando la Ecuación 2.6, con los parámetros ﬁjos presentados en la Tabla 5.4.

Pablo Avila Campos

51

Universidad de Cuenca

Figura 5.6: Ajuste de P L del Ambiente 1 con DR0 - Río Tomebamba

Tabla 5.4: Valores utilizados para el cálculo de las pérdidas de trayectoria Constante Valor

Ptx

18.5 dBm

Grx

1.3 dBi

5.5.1. Medición 1 - Ambiente Urbano

Pérdidas de Trayectoria con DR0 En la Figura 5.6 se observa el ajuste logarítmico realizado a las P L de la medición 1 con DR0, correspondiente al ambiente urbano descrito en la sección 4.4.1. El resultado del mismo, se presenta en la Ecuación 5.2.

PL(dB) = 59,53 + 11,26 ∗ log(d) + Xθ(θ = 6,29)

(5.2)

Pérdidas de Trayectoria con DR3

En la Figura 5.7 se observa el ajuste logarítmico realizado a las P L de la medición 1 con DR3, correspondiente al ambiente urbano, descrito en la sección 4.4.1. El resultado del mismo, se presenta en la Ecuación 5.3.

PL(dB) = 53,38 + 12,98 ∗ log(d) + Xθ(θ = 5,12)

(5.3)

Pablo Avila Campos

52

Universidad de Cuenca

Figura 5.7: Ajuste de P L del Ambiente 1 con DR3 - Río Tomebamba

5.5.2. Medición 2 - Ambiente Urbano - Orilla 2
Pérdidas de Trayectoria con DR0

En la Figura 5.8 se observa el ajuste logarítmico al P L de la medición 2 con DR0, correspondiente a la orilla 2 del ambiente urbano descrito en la sección 4.4.1. El resultado del mismo, se presenta en la Ecuación 5.4.

PL(dB) = 44,96 + 13,39 ∗ log(d) + Xθ(θ = 5,83) Pérdidas de Trayectoria con DR3

(5.4)

En la Figura 5.9 se observa el ajuste logarítmico realizado a las P L de la medición 2 con la tasa de datos máxima, correspondiente a la orilla 2 del ambiente urbano descrito en la sección 4.4.1. El resultado del mismo, se presenta en la Ecuación 5.5.

PL(dB) = 26,24 + 17,49 ∗ log(d) + Xθ(θ = 3,72)

(5.5)

5.5.3. Medición 3 - Ambiente Semiurbano
Pérdidas de Trayectoria con DR0 En la Figura 5.10 se observa el ajuste logarítmico realizado a las P L de la medición 3 con

Pablo Avila Campos

53

Universidad de Cuenca Figura 5.8: Ajuste de P L del Ambiente 1 con DR0, orilla 2 - Río Tomebamba

Figura 5.9: Ajuste de P L del Ambiente 1 con DR3, orilla 2 - Río Tomebamba

Pablo Avila Campos

54

Universidad de Cuenca

Figura 5.10: Ajuste de P L del Ambiente 2 con DR0 - Río Machángara

DR0, correspondiente al ambiente semiurbano descrito en la sección 4.4.2. El resultado del mismo, se presenta en la Ecuación 5.6.

PL(dB) = 61,55 + 10,7 ∗ log(d) + Xθ(θ = 2,92) Pérdidas de Trayectoria con DR3

(5.6)

En la Figura 5.11 se observa el ajuste logarítmico realizado a las P L de la medición 3 con DR3, correspondiente al Ambiente semiurbano descrito en la sección 4.4.2. El resultado del mismo, se presenta en la Ecuación 5.7.

PL(dB) = 62,74 + 10,67 ∗ log(d) + Xθ(θ = 3,20)

(5.7)

5.5.4. Medición 4 - Ambiente Rural
Pérdidas de Trayectoria con DR0

En la Figura 5.12 se observa el ajuste logarítmico realizado a las P L de la medición 4 con DR0, correspondiente al Ambiente rural descrito en la sección 4.4.3. El resultado del mismo, se presenta en la Ecuación 5.8.

PL(dB) = 55,36 + 11,27 ∗ log(d) + Xθ(θ = 3,73)

(5.8)

Pablo Avila Campos

55

Universidad de Cuenca Figura 5.11: Ajuste de P L del Ambiente 2 con DR3 - Río Machángara

Figura 5.12: Ajuste de P L del Ambiente 3 con DR0 - Río Yanuncay

Pablo Avila Campos

56

Universidad de Cuenca

Figura 5.13: Ajuste de P L del Ambiente 3 con DR3 - Río Yanuncay

Pérdidas de Trayectoria con DR3

En la Figura 5.13 se observa el ajuste logarítmico realizado a las P L de la medición 4 con DR3, correspondiente al Ambiente rural descrito en la sección 4.4.3. El resultado del mismo, se presenta en la Ecuación 5.9.

PL(dB) = 61,13 + 10,55 ∗ log(d) + Xθ(θ = 3,88)

(5.9)

5.5.5. Comparación de Modelos
Una vez obtenidos los ajustes logarítmicos, se puede hacer una comparación para determinar cual de los ambientes provee el mejor alcance al desplegar una red utilizando tecnología LoRa.
Comparación de Ambientes con DR0 A continuación, la Figura 5.14, muestra los ajustes de P L con DR0 en las cuatro mediciones. En la Tabla 5.5, se observa un resumen de los resultados.

Pablo Avila Campos

57

Universidad de Cuenca

Figura 5.14: Ajustes de P L con DR0 - Todos los Ambientes

Tabla 5.5: Compraración de Características de Propagación con DR0

Parámetro

Medición 1 Medición 2 Medición 3 Medición 4

Distancia Máxima (m)

800

950

1170

1600

Desviación Estándar (dB)

6.29

5.83

2.92

3.73

Se puede observar que la Medición 4, perteneciente al Ambiente Rural, presenta el mejor alcance de las cuatro. En el caso de la Medición 1, perteneciente al Ambiente Urbano, decrece rápidamente hasta llegar alrededor de 800 metros en donde ya no existe conexión ﬁable. La Medición 3, como era esperado, presenta un resultado intermedio. En cuanto a las desviaciones estándar, se sabe que se encuentran relacionadas directamente con el entorno. En los ambientes urbanos se presenta mayor cantidad de obstáculos por lo que las mediciones son variantes y la curva no se ajusta de la mejor manera al contrario que en los ambientes semiurbano y rural. Comparación de Ambientes con DR3
A continuación, la Figura 5.15 muestra los ajustes P L con DR3 en las cuatro mediciones. En la Tabla 5.6, se observa un resumen de los alcances y desviaciones estándar.

Pablo Avila Campos

58

Universidad de Cuenca

Figura 5.15: Ajustes de P L con DR3 - Todos los Ambientes

Tabla 5.6: Comparación de Características de Propagación con DR3

Parámetro

Medición 1 Medición 2 Medición 3 Medición 4

Distancia Máxima (m)

640

600

1100

1500

Desviación Estándar (dB)

5.12

5.72

3.20

3.88

De igual manera que en la Figura 5.14, la Figura 5.15 muestra que el ambiente Rural tiene el mayor alcance. Algo que se puede resaltar es que las mediciones 3 y 4 presentan curvas muy parecidas hasta alrededor de los 1200 metros. En cuanto a las mediciones 1 y 2 decaen de manera rápida y su diferencia se debe principalmente al entorno en el que se hicieron las mediciones.

5.6. Tasa de Errores de Paquetes
Como se explicó en el capítulo introductorio, se envían 10 paquetes con cada tasa de datos. En el receptor, se registran cuantos de estos paquetes llegaron con éxito. Esto se lo realiza como una medición del desempeño general de las transmisiones y que además da una pauta para detener las mismas.
A continuación se muestran las tasas de errores de paquetes, que fueron calculadas con Ecuación 5.10 [50].

Pablo Avila Campos

59

Universidad de Cuenca

Figura 5.16: Tendencia de Promedios de Pérdidas de Paquetes con DR0 - Medición 1

Error =

10 − paquetesrecibidos 10

(5.10)

En las Figura 5.16, se observa la tendencia de pérdidas de paquetes en la primera medición con la menor tasa de datos. Se observa una tendencia a crecer de manera rápida al acercarse el alcance máximo.

Promedios de Pérdidas de Paquetes enviados con DR0 En la Figura 5.17, se formaron intervalos de 100 metros y se calculó el promedio de paquetes perdidos para las cuatro mediciones realizadas. Se puede observar en las diferentes mediciones que al alcanzar sus límites de cobertura, presentados e las tablas 5.5 y 5.6, la pérdida aumenta rápidamente.
Promedios de Pérdidas de Paquetes enviados con DR3 De igual manera que en la Figura 5.17, la Figura 5.18 presenta la tendencia de aumento de pérdidas de paquetes conforme la distancia aumenta, para el caso de una transmisión con mayor tasa de bits.

Pablo Avila Campos

60

Universidad de Cuenca Figura 5.17: Promedios de Pérdidas de Paquetes con DR0 - Todos los Ambientes

Figura 5.18: Promedios de Pérdidas de Paquetes con DR3 - Todos los Ambientes

Pablo Avila Campos

61

Universidad de Cuenca
5.7. Conclusiones
El ajuste de un modelo de pérdidas de trayectoria para LoRa con LoRaWAN en un ambiente especíﬁco, como es el forestal, permite caracterizar la propagación en el mismo.
Las pruebas previas que se realizaron con el kit de evaluación permitieron deﬁnir aspectos como, que la desviación estándar del número de paquetes no resulta signiﬁcativa si el mismo se aumenta. En base a estas pruebas, se deﬁnió el índice de potencia a utilizar en las mediciones además de comprobar que no existe selectividad de canal en las frecuencias utilizadas por LoRaWAN.
Con respecto a la propagación en ambas orillas de un mismo río, se comprobó que la correlación que se presenta, aún en un ambiente difícil como el urbano, es alta. Los test de Kruskal-Wallis y Dunn realizados para comparar las distribuciones de los ambientes muestreados concluyen que no existe relación estadística entre los ambientes Rural y Semiurbano, reforzando la necesidad de caracterizar a los mismos de manera separada. No se pudo veriﬁcar la independencia entre los ambientes urbano y rural, esto se puede deber a una posible relación entre la alta densidad de vegetación y las ediﬁcaciones. Estos test estadísticos no son usualmente aplicados con este tipos de datos por lo que los resultados deben ser veriﬁcados y validados en un estudio futuro.
Utilizando los valores de RSSI y SNR, se calcularon las pérdidas de trayectoria y se ajustaron para las cuatro mediciones con las tasas de datos utilizadas. Si se comparan las mediciones con diferente DR, se observa que presentan valores muy similares de RSSI y SNR, con la diferencia de que DR0 presenta un mayor alcance. Se recomienda en lo posible utilizar DR3, ya que al tener menor tiempo aire, se tiene un menor consumo energético.
Los ajustes muestran diferentes valores de desviación estándar que pueden ser revisados en las tablas comparativas 5.5 y 5.6. Se observa una clara tendencia a disminuir en ambientes rurales o semiurbanos. Esto se debe a que la desviación estándar de las muestras son mayores en la medición 1 y 2 por la gran cantidad de obstáculos que existen en la urbe.
Por último, se concluye que la tasa de pérdida de paquetes es un buen parámetro para deﬁnir el desempeño de la trasmisión en determinado punto, sin embargo se debe notar de las Figuras 5.17 y 5.18 que las pérdidas tienden a variar rápidamente.

Pablo Avila Campos

62

Universidad de Cuenca
Capítulo 6
Conclusiones y Recomendaciones
En este capítulo se presentan las conclusiones ﬁnales del trabajo realizado así como la interpretación de los resultados, las limitaciones que se encontraron en el proceso, y ﬁnalmente, se proponen maneras de ampliar la investigación a futuro.

Pablo Avila Campos

63

Universidad de Cuenca
6.1. Conclusiones
En este estudio se ha demostrado que el ambiente en donde se desarrolla la red LoRaWAN, así como la topografía, inﬂuyen en el alcance y en el porcentaje de paquetes recibidos correctamente.
Las mediciones previas realizadas, ayudaron a deﬁnir aspectos de la transmisión como el índice de potencia que da los mejores valores de RSSI, sin embargo, se debe tomar en cuenta que al haberse utilizado el mismo, la vida útil de los dispositivos puede verse reducida. Otro aspecto fue desviación estándar de RSSI que no varía de manera signiﬁcativa al aumentar la cantidad de mensajes a enviar. Por último, se observó, con respecto a la frecuencia de transmisión, que el canal no es selectivo, por lo que LoRaWAN, puede ser utilizado en los ambientes seleccionados.
En cuanto a las mediciones de RSSI, se observa una clara tendencia a decaer con la distancia de manera logarítmica, lo que conﬁrmaría la hipótesis planteada en el marco teórico. Los resultados obtenidos indican que el ajuste de un modelo de pérdidas de trayectoria tiene menor desviación estándar, en ambientes semiurbanos o rurales. Esto se traduce en una mayor ﬁabilidad del modelo en los mismos.
De los cálculos de correlación, realizados en un ambiente urbano, detallado en la Sección 4.4.1, se concluye que existe una fuerte relación entre las dos orillas de un río. De las pruebas estadísticas, se concluye que no se puede caracterizar con sólo una ecuación los diferentes ambientes. Se observa también que en la mayoría de las mediciones, el ruido no es un factor importante en el decaimiento de la señal, en los primeros 300 metros. Esto indicaría que si se desarrolla una red con este o menor alcance, el nivel de ruido es despreciable.
6.2. Recomendaciones
Existen diferentes variables que pueden ser mejoradas en estudios posteriores y que no fueron tomadas en cuenta en este por ser un primer estudio exploratorio de LoRaWAN. A continuación se presentan las principales:
• Una de las aspiraciones de esta tecnología es el gran alcance que provee, sin embargo, al haber utilizado en este estudio una metodología que se enfocaba hacia la caracterización de la señal a través de diferentes ambientes forestales, no se obtuvieron alcances mayores a 1600 metros.
• En algunos de los puntos que se tomaron, por problemas del terreno, no se pudo cumplir con la metodología propuesta, lo que causó que existan mejoramiento o disminución repentina de RSSI, visible en las gráﬁcas del Anexo A.

Pablo Avila Campos

64

Universidad de Cuenca
• Al tomarse puntos en un intervalo relativamente pequeño de diez metros, se compensó de alguna manera el limitado número de mensajes enviados (diez), sin embargo, este se podría ampliar al doble para disminuir la desviación estándar y mejorar la ﬁabilidad de las muestras.
• La cantidad de mensajes recibidos correctamente no es una medida ﬁable de la cobertura ya que tiende a variar rápidamente con las condiciones del entorno.
• Los equipos presentan tasas de datos deﬁnidas por LoRaWAN, sin embargo, no están implementados todos, por lo que en este estudio sólo se pudieron probar dos, que de manera básica, varían el SF.
6.3. Trabajos Futuros
En esta sección, se explica cómo se podrían aplicar los resultados obtenidos y cómo estos pueden ser mejorados o ampliados con futuras investigaciones.
• Como se mencionó en las conclusiones, la topografía es un parámetro importante. Uno de los aspectos en que se puede trabajar a futuro es la variación de la altura de la antena receptora. Esto ayudaría a determinar con que altura se consiguen los mejores resultados.
• Las potencia de transmisión es un factor clave al analizar la cobertura. En este estudio solo se utilizó la mayor, sin embargo se propone en un estudio futuro probar al menos tres potencias ya que el uso continuo de la máxima puede afectar a la vida útil de los dispositivos.
• Aunque ya existen trabajos en los que se varían los parámetros de LoRa, estos aún no se realizan sobre ambientes forestales. Un futuro estudio podría no utilizar LoRaWAN y probar si se dan mejoras al hacerlo.
• La escalabilidad de una red LoRaWAN, aunque requeriría cierta cantidad de nodos, es un parámetro que no ha sido medido bajo condiciones forestales y que presenta una alternativa de estudio interesante que podría ser enfocada desde un punto de vista de red.
• Otra de las ventajas de LoRa es el bajo consumo energético. Se puede realizar un estudio futuro de consumo utilizando los DR planteados por LoRaWAN para determinar las diferencias de consumo energético.
• Aunque los parámetros de red dependen de los equipos y las capacidades de la misma, se puede realizar un estudio de retardos y variaciones de retardos de mensajes desde que son enviados por el nodo hasta que son recibidos por el servidor.

Pablo Avila Campos

65

Universidad de Cuenca
Anexos

Pablo Avila Campos

66

Universidad de Cuenca
Apéndice A
Conﬁguración de Dispositivos
A.1. Instalación y conﬁguración del servidor y Gateway LoRaWAN

En este punto se detalla la conﬁguración sugerida por Microchip para un primer acercamiento al kit de desarrollo de LoRaWAN. Para este procedimiento, se utilizó la Guía de Usuario de la Tecnología LoRa [9]. Un sistema LoRa puede ser implementado de muchas maneras, sin embargo, el kit de Evaluación utilizado puede ser conﬁgurado como se observa en la Figura A.1.

Pablo Avila Campos

68

Universidad de Cuenca

Figura A.1: Esquema de conﬁguración del kit LoRa [9]
A.1.1. Instalación
La suite de desarrollo de tecnología LoRa tiene todos los componentes necesarios para conﬁgurar el sistema LoRa. Incluye la utilidad de desarrollo, la cual ha sido desarrollada para ayudar al usuario a evaluar, desarrollar e implementar LoRa con el kit de evaluación. El objetivo de esta suite es la de proveer un único paquete que haga que la introducción del usuario a una red LoRaWAN fácil. El contenido de la suite de desarrollo es el siguiente:
• La utilidad de Desarrollo

Pablo Avila Campos

69

Universidad de Cuenca
• Servidor Docker y la base de datos de evaluación • Java Runtime Environment
Para iniciar la instalación, los paquetes necesarios deben ser descargados de la siguiente página web:
http://www.microchip.com/DevelopmentTools/ProductDetails.aspx?PartNO=dv164140-2 Una vez descargada la suite de desarrollo de LoRa, se procede a instalar. Por defecto el directorio de instalación es Microchip/LoRaSuite. Figura A.2.

Figura A.2: Instalación de la suite de desarrollo de LoRa
Se deben elegir todos los componentes y de esta manera se completa la instalación. Uno de los componentes elegidos es Java Runtime, este se instalará durante la instalación de los demás componentes.
A.1.2. Preparación del Sistema
Para preparar al sistema se deben hacer los siguientes pasos:

Pablo Avila Campos

70

Universidad de Cuenca
Abrir VirtualBox
VirtualBox corre Docker Engine, en el cual se encuentra almacenado el servidor LoRaWAN y la base de datos. En Windows y MAC OS, Docker corre de manera virtual usando VirtualBox y de manera nativa en sistemas Linux de 64 bits. Para Windows y MAC también es necesario conﬁgurar el reenvío de puertos que se realizará en la siguiente sección. Figura A.3.

Figura A.3: Virtualización de Docker en Windows

Agregar Reglas de Reenvío de Puertos en VirualBox
En VirtualBox se busca la opción de conﬁguración, luego red, y clic en avanzado. En Reenvío de Puertos, se agregan las reglas de la Figura A.4.

Pablo Avila Campos

71

Universidad de Cuenca Figura A.4: Reglas de Reenvío de Puertos

Asignación de IP estática
Este paso conﬁgura al puerto Ethernet del computador con una IP ﬁja de tal manera que coincida con la dirección del servidor que tiene conﬁgurada el Gateway. La conﬁguración se la realiza en el adaptador Ethernet y en IPv4. Quedaría como en la Figura A.5.

Pablo Avila Campos

72

Universidad de Cuenca

Figura A.5: Conﬁguración de IP estática en adaptador de red Ethernet

A.1.3. Conﬁguración del Servidor
Como se dijo anteriormente, el servidor se encuentra virtualizado y es manejado a través de VirtualBox, sin embargo, primero es necesario instalarlo. Una vez instalado, para correr el servidor, no es necesario abrir VirtualBox. Solo abrir el terminal de Docker y correr el Servidor LoRaWAN.

Abrir el Terminal Docker El Terminal Docker sirve para enviar comandos a Docker que a su vez corre el Servidor y Base de datos de evaluación. Para correrlo, se da doble click sobre su icono que se encuentra en la carpeta Docker. Se abrirá una ventana como se observa en la Figura A.6.

Pablo Avila Campos

73

Universidad de Cuenca

Figura A.6: Terminal Docker
Cargar la Imagen Docker
Para cargar la imagen de Docker, se utiliza el siguiente comando: docker load < /C/microchip/LoRaSuite/Docker/mchplora Crear el contenedor Docker
En este punto, se va a crear un contenedor con el nombre loraserver, utilizando la imagen recién cargada. El comando es el siguiente: docker create --name lora_server –p 1700:1700/UDP –p 3306:3306/TCP -p 5000:5000/UDP mchplo Este contenedor asigna el puerto 1700 para tráﬁco UDP y 3306 para TCP. Iniciar el Contenedor
Con este comando, el contenedor Docker correrá. docker start lora_server

Pablo Avila Campos

74

Universidad de Cuenca Una vez que el contenedor ha sido creado, el servidor puede iniciar con este comando y continuará activo aún si VirtualBox o el Terminal Docker están cerrados.
A.1.4. Conﬁguración de Red
Conectar los dispositivos LoRa Con el contenedor de LoRa creado e iniciado, conectar las tarjetas de evaluación de LoRa a los puertos USB del computador. A continuación, abrir el software de Utilidad de Desarrollo. La interfaz se presenta en la Figura A.7.

Figura A.7: Software de Utilidades de LoRa Microchip
Conﬁguración del Gateway El Gateway ya viene conﬁgurado de fábrica sin embargo se deben conﬁrmar los parámetros del mismo. En la Figura A.8, se muestra como deben estar conﬁgurados.

Pablo Avila Campos

75

Universidad de Cuenca

Figura A.8: Software de Utilidades de LoRa Microchip - Gateway

En este punto, si se siguieron los pasos anteriores, al igual que en la imagen anterior, se debería observar un indicador verde y el enunciado online en la esquina de conﬁguración del Gateway y en el panel LCD del mismo. Hay veces en que el Gateway tarda unos segundos en pasar a online. Hay veces en que es necesario desconectar y reconectar el Gateway al puerto USB del computador Conﬁguración para Personalización Auto-Creada
Con esta conﬁguración, se puede hacer uso inmediato del servidor de evaluación. Esta conﬁguración hace uso de ABP utilizando direcciones preconﬁguradas. Para hacer uso de esto se debe acceder a la pestaña LoRaWAN en el módulo RN y dar click en la opción de Conﬁguración para Personalización Auto-Creada, como se observa en la Figura A.9.

Pablo Avila Campos

76

Universidad de Cuenca

Figura A.9: Conﬁguración para Personalización Auto-Creada
Agregar el Servidor a la lista de Dispositivos y conexión con MySQL
En la pestaña Server, se elige Add. De esta manera se agrega un servidor a la interfaz. Este servidor será el que recibirá los paquetes enviados por el módulo RN o mota. Antes de poder hacerlo, debe conectarse a la base de datos. Para la conexión con MySQL, se abre el servidor y se da click en Connect to IP. Figura A.10.

Figura A.10: Conexión con el servidor MySQL

Pablo Avila Campos

77

Universidad de Cuenca
A.1.5. Conﬁguración Adicional para 915 MHz
Conﬁgurar el Módulo RN para 8 Canales Dado que el Gateway del kit solo admite ocho canales, se debe conﬁgurar al módulo RN para que transmita en los mismos. Para hacerlo, se da click en la pestaña de Canales MAC, se dehabilitan los canales y se da click en habilitar 8 canales. Esto asegura la compatibilidad entre los dos dispositivos ya que el módulo RN admite por defecto hasta 63 canales. Figura A.11.

Figura A.11: Habilitación de ocho canales en el módulo RN

Enviar un Mensaje de prueba Uplink no conﬁrmado
El objetivo de este punto es visualizar un mensaje transmitido por el módulo RN en el Gateway. En la pestaña LoRaWAN, existe la ventana de comunicación. Se pone un payload en hexadecimal, un puerto del 1 al 223 y se da click en transmitir, como se observa en la Figura A.12.

Pablo Avila Campos

78

Universidad de Cuenca

Figura A.12: Envio de un mensaje Uplink desde el módulo RN
Cambiar la región del Gateway
El Gateway asume por defecto que trabaja con 868 MHz (Región 4), por lo que es necesario conﬁgurarlo para 915 MHz (Región 0). En la pestaña Database del Servidor, se selecciona la opción de unidades Gateway y se da click en Cambiar Región hasta que quede en Región 0. Figura A.13.

Figura A.13: Cambio de Región del Gateway
De esta manera, cuando el Gateway reciba un paquete válido, el mismo se verá en la pestaña de Base de datos.
A.2. Conﬁguración del Nodo
Como se dijo en la descripción de equipos, el Nodo o Mota, permite su control mediante comandos ASCII. Estos comandos son enviados desde el Raspberry Pi y fueron programados en Python.
Para automatizar y acelerar el proceso de envío de paquetes, se implementó un botón físico que permite el envío de los 10 paquetes con DR0 y enseguida los otros 10 con DR3. Durante el proceso de envío, se mantiene encendido un diodo LED, que sirve como indicador de que el transmisor debe mantenerse lo mas estable posible.
A continuación, se describen los programas implementados en el Raspberry Pi:

Pablo Avila Campos

79

Universidad de Cuenca
Programa de Inicio Se activa al encendido del Raspberry Pi y permite el sensado continuo del pulsante de envío. A continuación el código:
GPIO.setmode(GPIO.BCM) GPIO.setup(18, GPIO.IN, pull_up_down=GPIO.PUD_UP)
while True: input_state = GPIO.input(18) if input_state == False:
os.system(’/home/pi/lm.py’) time.sleep(0.5)
os.system(’/home/pi/lm2.py’) time.sleep(0.5) Una vez que se detecta que se pulsó el botón de envío, se corren lm.py y lm2.py que como se explicará a continuación envían los paquetes con DR0 y DR3 respectivamente. Envío de Mensajes
lm.py y lm2.py conﬁguran el puerto USB para el envío de los comandos, el pin para el encendido del diodo LED, conﬁgura las diferentes claves de LoRaWAN, activa mediante ABP, conﬁgura el DR y envía paquetes numerados del uno al diez. A continuación el código utilizado:
LedPin = 11 # pin11
BAUD_RATE = 57600
class LoRaSerial(object): def __init__(self,_serial_port): ’’’ configures serial connection ’’’ self._ser = serial.Serial(_serial_port, BAUD_RATE)
# timeout block read self._ser.timeout = 8

Pablo Avila Campos

80

Universidad de Cuenca
# disable software flow control self._ser.xonxoff = False
# disable hardware (RTS/CTS) flow control self._ser.rtscts = False
# disable hardware (DSR/DTR) flow control self._ser.dsrdtr = False
# timeout for write self._ser.writeTimeout = 0
#print "Resetting LoRa Tranceiver..." self.write_command(’sys reset’,False) #print "Configuring Tranceiver..." #Mac Configuration self.write_command(’mac set devaddr 001AD314’) self.write_command(’mac set appskey 3C8F262739BFE3B7BC0826991AD0504D’) self.write_command(’mac set nwkskey 2B7E151628AED2A6ABF7158809CF4F3C’) self.write_command(’mac set adr off’) self.write_command(’mac set sync 34’) self.write_command(’mac set pwridx 5’) self.write_command(’mac set dr 0’) self.write_command(’mac save’)
# Configure sub-bands for ch in range(0,63):
self.write_command(’mac set ch status %d %s’%(ch, ’on’ if ch in range(0,7) else ’off’))
# join the network #print "Attempting to Join Network..." self.write_command(’mac join abp’) response = self.read() if response == ’accepted’:
print "LoRa Tranceiver Configured. Joined (ABP)" else:
print "ERROR: mac join returned unexpected response: ", response

Pablo Avila Campos

81

Universidad de Cuenca
def read(self): ’’’ reads serial input ’’’ return self._ser.readline().strip()
def write(self, str): ’’’ writes out string to serial connection, returns response ’’’ self._ser.write(str + ’\r\n’) return self.read()
def write_command(self, config_str, check_resp=True): ’’’ writes out a command ’’’ #print "Command: ’%s’"%config_str response = self.write(config_str) if check_resp and response != ’ok’: print "Command: ’%s’"%config_str print "Response: ’%s’"%response
def send_message(self, data): ’’’ sends a message to gateway ’’’ # print "Sending message... " # send packet (returns ’ok’ immediately) self.write_command(’mac tx uncnf 5 %s’%data) # wait for success message response = self.read() if response == ’mac_tx_ok’: print "Message sent successfully!" else: print "ERROR: mac tx command returned unexpected response: ", response

Pablo Avila Campos

82

Universidad de Cuenca

def receive_message(self): ’’’ waits for a message ’’’ pass

if __name__ == "__main__":

port = ’/dev/ttyACM0’

packets = 10

#Configure indicator LED

GPIO.setmode(GPIO.BOARD)

# Numbers GPIOs by physical location

GPIO.setup(LedPin, GPIO.OUT) # Set LedPin’s mode is output

#Configure Module

loramote = LoRaSerial(port)

#Send Data

GPIO.output(LedPin, GPIO.HIGH)

for i in range(1,packets+1):

loramote.send_message(i)

time.sleep(1)

GPIO.output(LedPin, GPIO.LOW)

GPIO.cleanup()

lm2.py es exactamente el mismo programa con la diferencia que en lugar de DR0, se usa DR3.

Pablo Avila Campos

83

Universidad de Cuenca
Apéndice B
Desencriptado y Almacenamiento
Este apéndice, se presentan las herramientas utilizadas para convertir los archivos .txt capturados con Wireshark en archivos .csv decodiﬁcados y con estadísticas de transmisión.

Pablo Avila Campos

84

Universidad de Cuenca
B.1. Desencriptación de Paquetes - LoRaWAN
El siguiente código, esta basado en el decodiﬁcador de paquetes LoRaWAN [46]. Está escrito en Javascript y provee una manera rápida de desencriptar la carga útil de los paquetes, usando Node.js y npm. Para la correcta desencriptación, se requiere de la clave de sesión de aplicación y de red que pueden ser encontradas en el la interfaz Microchip del gateway.
#!/usr/bin/env node
"use strict";
/** * LoRa Decrypt Code * Ucuenca
*/ var lora_packet = require(’../lib/index.js’); var cmdlineArgs = process.argv;
//Start var inputData = new Buffer(cmdlineArgs[2], ’base64’); var packet = lora_packet.fromWire(inputData); var AppSKey_hex = "3c8f262739bfe3b7bc0826991ad0504d"; var NwkSkey_hex = "2b7e151628aed2a6abf7158809cf4f3c"; var decrypted = lora_packet.decrypt(packet, new Buffer(AppSKey_hex, ’hex’), new Buffer(NwkSkey_hex, ’hex’)); //Output console.log (decrypted)
Para usarlo, desde la consola se corre directamente el nombre del archivo que se encuentra ubicado en el directorio: C:\Users\pavil\AppData\Roaming\npm\node_modules\lora-packet\ bin, seguido de la carga útil en formato HEX. Por ejemplo:
lora-decrypt QBTTGgAAAwAFoM4Z08E=

Pablo Avila Campos

85

Universidad de Cuenca
B.2. Desencriptado y Almacenaje
El código que se presenta a continuación, fue desarrollado en python y su objetivo es el de ordenar, desencriptar, almacenar y generar un archivo total de cada medición. Abre los archivos .txt capturados en las mediciones, los ordena, los desencripta utilizando el código del Apéndice B.1, separa DR0 y DR3, ﬁnalmente almacena cada transmisión en archivos independientes .csv.
Al terminar presenta el PER, las medias de RSSI, SNR, además de desviaciones estándar de cada transmisión en un archivo .csv.
#Este Script abre los archivos .txt que contienen las #capturas y crea archivos .csv con los paquetes de DR0 y DR3 #Al final, genera un archivo Total #Creado por: Pablo E. Avila C import csv import subprocess import statistics #Directorios de las mediciones y de los resultados path = ’D:\\Users\\pavil\\MEGA\\LoRaTesis\\Data\\Capturas\\Medicion4’ pathr = ’D:\\Users\\pavil\\MEGA\\LoRaTesis\\Data\\Capturas\\Medicion4\\Conversiones’ npackets = 10 ncaptures = 152 RSSIAVEA = [0]*ncaptures RSSIAVEB = [0]*ncaptures SNRAVEA = [0]*ncaptures SNRAVEB = [0]*ncaptures DIST = [0]*ncaptures PERSA = [0]*ncaptures PERSB = [0]*ncaptures STDDEVRSSIA = [0]*ncaptures STDDEVRSSIB = [0]*ncaptures STDDEVSNRA = [0]*ncaptures STDDEVSNRB = [0]*ncaptures
for file in range(1,ncaptures+1): #Name of file nfile= str(file) data = open(path+’\\’+nfile+’.txt’,’r’).read()

Pablo Avila Campos

86

Universidad de Cuenca
dataDic = {} dataDicA = {} dataDicB = {} #Index of values tmstp=[pos for pos in range(len(data)) if data[pos:].startswith(’tmst’)] chanp=[pos for pos in range(len(data)) if data[pos:].startswith(’chan’)] rfchp=[pos for pos in range(len(data)) if data[pos:].startswith(’rfch’)] freqp=[pos for pos in range(len(data)) if data[pos:].startswith(’freq’)] modup=[pos for pos in range(len(data)) if data[pos:].startswith(’modu’)] datrp=[pos for pos in range(len(data)) if data[pos:].startswith(’datr’)] codrp=[pos for pos in range(len(data)) if data[pos:].startswith(’codr’)] lsnrp=[pos for pos in range(len(data)) if data[pos:].startswith(’lsnr’)] rssip=[pos for pos in range(len(data)) if data[pos:].startswith(’rssi’)] sizep=[pos for pos in range(len(data)) if data[pos:].startswith(’size’)] datap=[pos for pos in range(len(data)) if data[pos:].startswith(’data’)] #Packet Number n = int(len(tmstp)/2) #Extract data dataDic[0] = ’TMST’,’CHAN’,’RFCH’,’FREQ’,’MODU’,’DATR’,’CODR’,’LSNR’,’RSSI’,’SIZE’,’DATA’ dataDicA[0] = ’TMST’,’CHAN’,’RFCH’,’FREQ’,’MODU’,’DATR’,’CODR’,’LSNR’,’RSSI’,’SIZE’,’DATA’ dataDicB[0] = ’TMST’,’CHAN’,’RFCH’,’FREQ’,’MODU’,’DATR’,’CODR’,’LSNR’,’RSSI’,’SIZE’,’DATA’ for index in range(0, n):
DATA = data[datap[index]+7:datap[index]+36] DATAB = DATA[0:DATA.index(’"’)] DATAC = subprocess.check_output(’lora-decrypt ’ + DATAB, shell=True).decode(’utf-8’) DATAD = DATAC[8:DATAC.index(’>’)].replace(" ", "") dataDic[index+1] = int(data[tmstp[index]+6:chanp[index]-2]), int(data[chanp[index]+6:rfchp[index]-2]) ,int(data[rfchp[index]+6:freqp[index]-2]), float(data[freqp[index]+6:freqp[index]+16]), str(data[modup[index]+7:datrp[index]-3]), str(data[datrp[index]+7:codrp[index]-3]), str(data[codrp[index]+7:lsnrp[index]-3]), float(data[lsnrp[index]+6:rssip[index]-2]), int(data[rssip[index]+6:sizep[index]-2]), int(data[sizep[index]+6:datap[index]-2]), int(DATAD)
#Separo DRO and DR3

Pablo Avila Campos

87

Universidad de Cuenca
i=1 j=1 for index in range(0,n):
line = dataDic[index+1] if line[5] == "SF10BW125":
dataDicA[i]=line i+=1 else: dataDicB[j]=line j+=1 #No de Datos Recibidos npacketsrecA = len(dataDicA)-1 npacketsrecB = len(dataDicB)-1
#Extraer RSSI en vectores RSSIA = [0]*npacketsrecA RSSIB = [0]*npacketsrecB
for index in range(1,npacketsrecA+1): line = dataDicA[index] RSSIA[index-1]= line[8]
for index in range(1,npacketsrecB+1): line = dataDicB[index] RSSIB[index-1]= line[8]
#Extraer SNR en vectores SNRA = [0]*npacketsrecA SNRB = [0]*npacketsrecB
for index in range(1,npacketsrecA+1): line = dataDicA[index] SNRA[index-1]= line[7]
for index in range(1,npacketsrecB+1): line = dataDicB[index] SNRB[index-1]= line[7]
DIST[file - 1] = file * 10

Pablo Avila Campos

88

Universidad de Cuenca
#Vector de distancias
if len(dataDicA) > 1: #Para evitar archivos sin paquetes.
RSSIAVEA[file-1] = statistics.mean(RSSIA) SNRAVEA[file-1] = statistics.mean(SNRA) PERSA[file-1] = (npackets-npacketsrecA)/(npackets) if len(dataDicA) > 2: #STANDARDDEV necesita al menos dos valores
STDDEVRSSIA[file-1] = statistics.stdev(RSSIA) STDDEVSNRA[file-1] = statistics.stdev(SNRA) # Guardo datos en archivo .csv w = csv.writer(open(pathr+’\\’+nfile+"A"+".csv", "w", newline=’’)) for key, val in dataDicA.items(): w.writerow(val)
if len(dataDicB) > 1: #Para evitar archivos sin paquetes. RSSIAVEB[file-1] = statistics.mean(RSSIB) SNRAVEB[file-1] = statistics.mean(SNRB) PERSB[file-1] = (npackets-npacketsrecB)/(npackets) if len(dataDicB) > 2: #STANDARDDEV needs at least two values STDDEVRSSIB[file-1] = statistics.stdev(RSSIB) STDDEVSNRB[file-1] = statistics.stdev(SNRB) # Guardo datos en el archivo .csv w = csv.writer(open(pathr+’\\’+nfile+"B"+".csv", "w", newline=’’)) for key, val in dataDicB.items(): w.writerow(val)
headers = [’Distancia(m)’,’RSSI_DR0(dBm)’,’SNR_DR0’,’STDEVRSSI_DR0’, ’STDEVSNR_DR0’,’PER_DR0’,’RSSI_DR3(dBm)’,’SNR_DR3’,’STDEVRSSI_DR3’, ’STDEVSNR_DR3’,’PER_DR3’] rows = zip(DIST,RSSIAVEA,SNRAVEA,STDDEVRSSIA,STDDEVSNRA,PERSA,RSSIAVEB, SNRAVEB,STDDEVRSSIB,STDDEVSNRB,PERSB) w = csv.writer(open(pathr+’\\’+’RESULTADOS’+’.csv’,"w", newline=’’)) w.writerow(headers) for row in rows:
w.writerow(row) print(’Decodificacion Terminada!’)

Pablo Avila Campos

89

Universidad de Cuenca
En los documentos adjuntos del archivo pdf, se encuentran los códigos presentados en esta Sección.

Pablo Avila Campos

90

Universidad de Cuenca
Apéndice C
Mediciones de RSSI y SNR
Este apéndice se encuentra dividido en dos partes. En la primera parte C.1, se presentan las gráﬁcas resultantes del RSSI pertenecientes a las cuatro mediciones realizadas. Por otro lado, en la sección C.2, se presentan los resultados de SNR de las mediciones.

Pablo Avila Campos

91

Universidad de Cuenca
C.1. Mediciones de RSSI
Se realizaron cuatro mediciones en las que se transmitieron 10 paquetes por cada tasa de datos. En cada medición se realizaron transmisiones cada 10 metros. La Medición 1 y 2 corresponden al ambiente urbano, la tercera al semiurbano y la cuarta al rural. A continuación se presentan las medias de cada trasmisión con sus intervalos de conﬁanza calculados utilizando la desviación estándar y la distribución t-student.
RSSI con DR0 en Medición 1

Figura C.1: Medición de RSSI del Ambiente 1 con DR0 - Río Tomebamba RSSI con DR3 en Medición 1

Pablo Avila Campos

92

Universidad de Cuenca
Figura C.2: Medición de RSSI del Ambiente 1 con DR3 - Río Tomebamba RSSI con DR0 en Medición 2

Figura C.3: Medición de RSSI del Ambiente 1, orilla 2 con DR0 - Río Tomebamba RSSI con DR3 en Medición 2

Pablo Avila Campos

93

Universidad de Cuenca
Figura C.4: Medición de RSSI del Ambiente 1, orilla 2 con DR3 - Río Tomebamba RSSI con DR0 en Medición 3

Figura C.5: Medición de RSSI del Ambiente 2 con DR0 - Río Machángara RSSI con DR3 en Medición 3

Pablo Avila Campos

94

Universidad de Cuenca
Figura C.6: Medición de RSSI del Ambiente 2 con DR3 - Río Machángara RSSI con DR0 en Medición 4

Figura C.7: Medición de RSSI del Ambiente 3 con DR0 - Río Yanuncay RSSI con DR3 en Medición 4

Pablo Avila Campos

95

Universidad de Cuenca

Figura C.8: Medición de RSSI del Ambiente 3 con DR3 - Río Yanuncay

C.2. Mediciones de SNR
En cada transmisión, a más de recibir el RSSI, también se recibió el SNR que fue almacenado y utilizado para el cálculo de las pérdidas de trayectoria y realizar las gráﬁcas que se muestran a continuación:

SNR con DR0 en Medición 1

Pablo Avila Campos

96

Universidad de Cuenca
Figura C.9: Medición de SNR del Ambiente 1 con DR0 - Río Tomebamba SNR con DR3 en Medición 1

Figura C.10: Medición de SNR del Ambiente 1 con DR3 - Río Tomebamba SNR con DR0 en Medición 2

Pablo Avila Campos

97

Universidad de Cuenca
Figura C.11: Medición de SNR del Ambiente 1, orilla 2 con DR0 - Río Tomebamba SNR con DR3 en Medición 2

Figura C.12: Medición de SNR del Ambiente 1, orilla 2 con DR3 - Río Tomebamba SNR con DR0 en Medición 3

Pablo Avila Campos

98

Universidad de Cuenca
Figura C.13: Medición de SNR del Ambiente 2 con DR0 - Río Machángara SNR con DR3 en Medición 3

Figura C.14: Medición de SNR del Ambiente 2 con DR3 - Río Machángara SNR con DR0 en Medición 4

Pablo Avila Campos

99

Universidad de Cuenca
Figura C.15: Medición de SNR del Ambiente 3 con DR0 - Río Yanuncay SNR con DR3 en Medición 4

Figura C.16: Medición de SNR del Ambiente 3 con DR3 - Río Yanuncay

Pablo Avila Campos

100

Universidad de Cuenca

Bibliografía

[1] Semtech, “LoRa Modulation Basics,” num. May, pp. 1–26, 2015. [En línea]. Disponible: http://www.semtech.com/images/datasheet/an1200.22.pdf
[2] M. Knight, “Decoding LoRa : Realizing a Modern LPWAN with SDR,” Proceedings of the 6th GNU Radio Conference,, 2016.
[3] L. Vangelista, A. Zanella, y M. Zorzi, “Long-range IoT technologies: The dawn of LoRaTM,” Lecture Notes of the Institute for Computer Sciences, Social-Informatics and Telecommunications Engineering, LNICST, vol. 159, num. Fabulous, pp. 51–58, 2015.
[4] N. S. Sornin, M. S. Luis, T. I. Eirich, T. I. Kramp, y O. A. Hersent, “LoRaWAN ™ Speciﬁcation,” Semtech, Tech. Rep., 2015.
[5] Microchip Technology Inc., “LoRa(R) Technology Evaluation Kit - 900 - dv164140-2.” [En línea]. Disponible: http://www.microchip.com/DevelopmentTools/ProductDetails.aspx? PartNO=dv164140-2
[6] Microchip, “LoRa Technology Gateway User’s Guide,” Microchip, Tech. Rep., 2016.
[7] Microchip Technology Inc., “LoRa ® Mote User’s Guide,” Microchip, Tech. Rep., 2016.
[8] Rpi Foundation, “Raspberry Pi 3 Model B - Raspberry Pi.” [En línea]. Disponible: https://www.raspberrypi.org/products/raspberry-pi-3-model-b/
[9] Microchip, “LoRa Technology Evaluation Suite User’s Guide,” Microchip, Tech. Rep., 2016.
[10] A. Augustin, J. Yi, T. Clausen, y W. Townsley, “A Study of LoRa: Long Range & Low Power Networks for the Internet of Things,” Sensors, vol. 16, num. 9, p. 1466, 2016. [En línea]. Disponible: http://www.mdpi.com/1424-8220/16/9/1466
[11] M. T. Lazarescu, “Design of a WSN platform for long-term environmental monitoring for IoT applications,” IEEE Journal on Emerging and Selected Topics in Circuits and Systems, vol. 3, num. 1, pp. 45–54, 2013.

Pablo Avila Campos

101

Universidad de Cuenca
[12] F. Astudillo y A. Vázquez, “Aplicación de tecnologías inalámbricas al sistema de predicción de caudales en la cuenca del río Tomebamba,” pp. 1–10, 2016.
[13] G. Chamorro, “Guía de hidrometría de aguas superﬁciales,” SENAMHI-Lima Perú, 2008. [En línea]. Disponible: http://www.senamhi.gob.pe/pdf/aprendiendohidrometria.pdf
[14] K. Mikhaylov, J. Petäjäjärvi, y T. Hänninen, “Analysis of Capacity and Scalability of the LoRa Low Power Wide Area Network Technology,” European Wireless 2016, pp. 119–124, 2016.
[15] K. Mikhaylov, “On the Coverage of LPWANs: Range Evaluation and Channel Attenuation Model for LoRa Technology,” in ITS Telecommunications (ITST), 2015 14th International Conference on, 2016, pp. 55–59.
[16] R. S. Sinha, Y. Wei, y S.-H. Hwang, “A survey on LPWA technology: LoRa and NB-IoT,” ICT Express, vol. 3, num. 1, pp. 14–21, 2017. [En línea]. Disponible: http://linkinghub.elsevier.com/retrieve/pii/S2405959517300061
[17] O. Georgiou y U. Raza, “Low Power Wide Area Network Analysis: Can LoRa Scale?” IEEE Wireless Communications Letters, vol. 6, num. 2, pp. 162–165, 2017.
[18] A. J. Wixted, P. Kinnaird, H. Larijani, A. Tait, A. Ahmadinia, y N. Strachan, “Evaluation of LoRa and LoRaWAN for wireless sensor networks,” Proceedings of IEEE Sensors, vol. 0, pp. 5–7, 2017.
[19] J. Petäjäjärvi y K. Mikhaylov, “Evaluation of LoRa LPWAN technology for remote health and wellbeing monitoring,” (ISMICT), 2016 10th . . . , 2016. [En línea]. Disponible: http://ieeexplore.ieee.org/abstract/document/7498898/
[20] M. Aref y A. Sikora, “Free space range measurements with Semtech LoRa technology,” 2014 2nd International Symposium on Wireless Systems within the Conferences on Intelligent Data Acquisition and Advanced Computing Systems, IDAACS-SWS 2014, num. September, pp. 19–23, 2014.
[21] M. Haghighi, Z. Qin, D. Carboni, U. Adeel, F. Shi, y J. A. McCann, “Game theoretic and auction-based algorithms towards opportunistic communications in LPWA LoRa networks,” 2016 IEEE 3rd World Forum on Internet of Things, WF-IoT 2016, pp. 735–740, 2017.
[22] L. Gregora, L. Vojtech, y M. Neruda, “Indoor Signal Propagation of LoRa Technology,” 2016 17th International Conference on Mechatronics - Mechatronika (ME), pp. 13–16, 2016.
[23] J. So, D. Kim, H. Kim, H. Lee, y S. Park, “LoRaCloud: LoRa platform on OpenStack,” IEEE NETSOFT 2016 - 2016 IEEE NetSoft Conference and Workshops: Software-Deﬁned Infrastructure for Networks, Clouds, IoT and Services, pp. 431–434, 2016.

Pablo Avila Campos

102

Universidad de Cuenca
[24] Iswandi, H. T. Nastiti, I. E. Praditya, y I. W. Mustika, “Evaluation of XBee-Pro transmission range for Wireless Sensor Network’s node under forested environments based on Received Signal Strength Indicator (RSSI),” Proceedings - 2016 2nd International Conference on Science and Technology-Computer, ICST 2016, pp. 56–60, 2017.
[25] V. Harvanova y T. Krajcovic, “Implementing ZigBee network in forest regions - Considerations, modeling and evaluations,” 2011 International Conference on Applied Electronics, pp. 1–4, 2011.
[26] A. Palaios, K. N. Singh, y M. Petri, “Propagation Models for Users Crossing Forest Areas in Central European Forest Environments,” IEEE Waveforms and Signal Processing Propagation, pp. 14–19, 2016.
[27] I. F. Akyildiz y M. C. Vuran, Wireless Sensor Networks, 2010.
[28] R. Soltani, B. Bash, D. Goeckel, S. Guha, y D. Towsley, “Covert single-hop communication in a wireless network with distributed artiﬁcial noise generation,” in 2014 52nd Annual Allerton Conference on Communication, Control, and Computing (Allerton). IEEE, sep 2014, pp. 1078–1085. [En línea]. Disponible: http://ieeexplore.ieee.org/document/7028575/
[29] Wireless Personal Area Network (WPAN) Working Group, “IEEE 802.15.4 IEEE Standard for Low-Rate Wireless Networks.” [En línea]. Disponible: https: //standards.ieee.org/ﬁndstds/standard/802.15.4-2015.html
[30] P. Baronti, P. Pillai, V. Chook, S. Chessa, y A. Gotta, “A survey on the state of the art and the 802.15.4 and ZigBee standards,” Computer communications, 2007.
[31] I. Bluetooth SIG, “Bluetooth Core Speciﬁcation 5.0.” [En línea]. Disponible: http://www.mouser.com/pdfdocs/bluetooth-5-faq.pdf
[32] E. Khorov, A. Lyakhov, A. Krotov, y A. Guschin, “A survey on IEEE 802.11 ah: An enabling networking technology for smart cities,” Computer Communications, 2015. [En línea]. Disponible: http://www.sciencedirect.com/science/article/pii/S0140366414002989
[33] M. Centenaro, L. Vangelista, A. Zanella, y M. Zorzi, “Long-range communications in unlicensed bands: the rising stars in the IoT and smart city scenarios,” IEEE Wireless Communications, vol. 23, num. 5, pp. 60–67, oct 2016. [En línea]. Disponible: http://ieeexplore.ieee.org/document/7721743/
[34] J. Bardyn, T. Melly, y O. Seller, “IoT: The era of LPWAN is starting now,” European Solid-State, 2016. [En línea]. Disponible: http://ieeexplore.ieee.org/abstract/document/ 7598235/
[35] M. Bor y U. Roedig, “LoRa Transmission Parameter Selection,” Proceedings of the 13th IEEE International, 2017. [En línea]. Disponible: http://www.research.lancs.ac.uk/ portal/services/downloadRegister/164374357/lora{_}tps{_}r1342.pdf

Pablo Avila Campos

103

Universidad de Cuenca

[36] M. Bor, J. Vidler, y U. Roedig, “LoRa for the Internet of Things,” Proceedings of the 2016 International Conference on Embedded Wireless Systems and Networks, pp. 361–366, 2016.

[37] P. Neumann, J. Montavont, y T. Noël, “Indoor deployment of low-power wide area networks (LPWAN): A LoRaWAN case study,” Wireless and Mobile, 2016. [En línea]. Disponible: http://ieeexplore.ieee.org/abstract/document/7763213/

[38] A. Bose y C. Foh, “A practical path loss model for indoor WiFi positioning enhancement,” & Signal Processing, 2007 6th International . . . , 2007. [En línea]. Disponible: http://ieeexplore.ieee.org/abstract/document/4449717/

[39] S. M. Chung, K. T. Kim, J. Song, y H. Y. Youn, “Enhancing node connectivity by utilizing RSSI for ZigBee-based WSN,” 2016 International Conference on Information and Communication Technology Convergence, ICTC 2016, pp. 555–560, 2016.

[40] J. Zheng, C. Wu, H. Chu, y Y. Xu, “An improved RSSI measurement in wireless sensor networks,” Procedia Engineering, vol. 15, pp. 876–880, 2011. [En línea]. Disponible: http://dx.doi.org/10.1016/j.proeng.2011.08.162

[41] T. Rama Rao, D. Balachander, A. Nanda Kiran, y S. Oscar, “RF propagation measurements in forest & plantation environments for Wireless Sensor Networks,” International Conference on Recent Trends in Information Technology, ICRTIT 2012, pp. 308–313, 2012.

[42] D. H. Kim y J. Y. Lim, “Using Wi-Fi and LoRa,” 2016 Ieee, pp. 1–3, 2016.

[43] T. Petrić, M. Goessens, L. Nuaymi, L. Toutain, y A. Pelov, “Measurements, performance and analysis of LoRa FABIAN, a real-world implementation of LPWAN,” IEEE International Symposium on Personal, Indoor and Mobile Radio Communications, PIMRC, pp. 1–7, 2016.

[44] W. Lee, “Estimate of local average power of a mobile radio signal,” IEEE Transactions on Vehicular Technology, 1985. [En línea]. Disponible: http://ieeexplore.ieee.org/abstract/ document/1623289/

[45] L. Alliance, “LoRaWAN™ 1.0.2 Regional Parameters,” Microchip, Tech. Rep., 2017.

[46] Anthonykirby, “LoRaWAN packet decoder.” [En línea]. Dis-

ponible:

https://lorawan-packet-decoder-0ta6puiniaut.runkit.sh/?data=

QBTTGgCAAAAFTmIoiUo6uQ{%}3D{%}3D

[47] W. Mendenhall, R. Beaver, y B. Beaver, “Introducción a la probabilidad y estadística,” International Thomson Editores,, p. 780, 2010. [En línea]. Disponible: http:// investigadores.cide.edu/aparicio/data/refs/Mendenhall{_}Prob{_}Estadistica{_}13.pdf

[48] A. L. Webster, Estadistica Aplicada a los Negocios, McGraw-Hill, Ed. Bogotá: McGrawHill, 2000.

Pablo Avila Campos

104

Universidad de Cuenca
[49] Microchip, “RN2903 Datasheet,” Microchip, Tech. Rep., 2017. [50] T. Helmenstine, “Calculate Percent Error.” [En línea]. Disponible: https://sciencenotes.
org/calculate-percent-error/

Pablo Avila Campos

105

