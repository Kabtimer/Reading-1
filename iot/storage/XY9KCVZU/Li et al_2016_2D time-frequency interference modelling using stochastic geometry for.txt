2D Time-frequency interference modelling using stochastic geometry for performance evaluation in
Low-Power Wide-Area Networks

Zhuocheng Li∗,†, Steeve Zozor∗, Jean-Marc Brossier∗, Nade`ge Varsier† and Quentin Lampin† ∗ Univ. Grenoble Alpes, GIPSA-Lab, F-38000 Grenoble, France
Emails: (zhuocheng.li,steeve.zozor,jean-marc.brossier)@gipsa-lab.grenoble-inp.fr † Orange Labs, Meylan, France, Emails: (zhuocheng1.li,quentin.lampin,nadege.varsier)@orange.com

arXiv:1606.04791v2 [cs.NI] 12 Nov 2016

Abstract—In wireless networks, interferences between transmissions are modelled either in time or frequency domain. In this article, we jointly analyze interferences in the timefrequency domain using a stochastic geometry model assuming the total time-frequency resources to be a two-dimensional plane and transmissions from Internet of Things (IoT) devices timefrequency patterns on this plane. To evaluate the interference, we quantify the overlap between the information packets: provided that the overlap is not too strong, the packets are not necessarily lost due to capture effect. This ﬂexible model can be used for multiple medium access scenarios and is especially adapted to the random time-frequency access schemes used in Low-Power Wide-Area Networks (LPWANs). By characterizing the outage probability and throughput, our approach permits to evaluate the performance of two representative LPWA technologies Sigfox R and LoRaWAN R .
Index Terms—2D time-frequency interference; time-frequency random access; capture effect; stochastic geometry; IoT; LPWANs.
I. INTRODUCTION
Trading bit rates for better link budgets, LPWANs provide long range wireless connectivity to IoT devices [1], [2], [3]. Such networks provide a promising alternative to traditional cellular or multi-hop networks and are indeed envisioned to provide nationwide connectivity over industrial, scientiﬁc and medical (ISM) bands to battery-powered IoT devices that transmit little amount of data over long periods of time, e.g., water & gas meters. Thanks to the long range, the IoT devices can communicate directly with the base stations in a star topology.
Random access schemes such as Aloha are commonly used in LPWANs in which multiple devices access frequency resources with neither carrier sensing nor contention mechanisms [4], [5]. This reduces the communication overhead and the packet air time, but it increases the risk of collisions between packets when they overlap in time domain. Multiple works have been dedicated to the interferences modelling in time domain [6], [7], [8], [9]. In [8], the product of power and overlapping time duration between a transmission of interest and an interfering transmission is used to represent the quantity of interfering, then the sum is taken over multiple interfering transmissions to give the total interference.
Note that interference modelling of transmission overlapping in frequency domain is also well studied in the partially

overlapped channels (POC) scenarios [10], [11], [12], which are commonly used for networks such as IEEE 802.11. The interference factor in the case of POC is evaluated as the accumulated energy in overlapped frequency domain [10]. It has been proven that the use of POC can indeed improve the network throughput in comparison to common orthogonal channelization schemes [12], [10].
Our work differs from the aforementioned interference models in that it’s the ﬁrst, to the best of our knowledge, to consider the joint overlapping in both time and frequency domains. Our model based on stochastic geometry is a highlevel ﬂexible one which can be adapted to multiple scenarios.
In section II, existing works on LPWANs performance evaluation are introduced. In section III, our interference modelling approach is described and expressions of SINR, outage probability and network throughput are given. Then in section IV, we give the results on probabilistic evaluation of overlapping. Finally in section V, the developed model is used to study performances of two different LPWA technologies, Sigfox R and LoRaWAN R . Section VI concludes the article and introduces some research perspectives.
II. RELATED WORK
Multiple works exist for the performance evaluation of LPWANs [13], [14], [15], [16]. Most of these works use Poisson processes to model the packet arrival, which we believe is not the most adapted for periodic packet sending scenarios in LPWANs. For example, a device reporting on a daily basis would not send more than one message per day. However, as Poisson models the intensity of packet arrival, an intensity of one message per day represents in fact the mean value, i.e., one message on average per day, which is not quite the case described. In [13], multiple annuli LoRaWAN R cell structure is well modelled and illustrated with a few applicative scenarios. This structure is considered in our article but channel effects and capture effect are added to our model thus making it more complete and realistic. In [14], the performances of a random Frequency Division Multiple Access (random FDMA) scenario are studied in the pure Aloha case, but the capture effect with little overlap between packets is not considered. In [16], the performances in terms of packet delivery ratio and throughput of LoRaWAN R

and Sigfox R are simulated. However, the simulation process and the numerous network parameters are not exposed enough thus lacking of transparency and possibility of reuse. In [15], some interesting insights on the limits of LoRaWAN R are given, but again the model is based on Poisson process and there is no possible extension to account for the capture effect. In this article, in order to give the limit of the performance, we study the outage probability and throughput of LoRaWAN R and Sigfox R when every node is transmitting as frequently as possible, according to either the ISM band duty cycle constraints or technology-related constraints, which result in message sending periods in the order of 1 to 10 minutes. This scenario of the saturation throughput could be that of packet and object tracking systems [17]. Other less frequent IoT scenarios such as water & gas metering can be evaluated using our model thanks to its ﬂexibility.
III. THE “CARDS TOSSING” MODEL
A. Assumptions
N devices Ik share limited time-frequency resources denoted by [0 ; T ] × [0 ; F ] to send packets to a single base station, with k = 0, 1 . . . N − 1. F is the bandwidth and T the message sending period. I0 is the user of interest. gk(t, f ) the packet sent by user Ik. We make the following assumptions:
1) Messages from all the senders have the same rectangleshaped time-frequency support, since they are limited in time duration, denoted by ∆t and bandwidth occupancy, denoted by ∆f . Then gk takes the form gk(t, f ) =
mk(t, f ) 1Ik (t, f ) where 1A stands for the indicator
function of set A and Ik = [tk ; tk +∆t]×[fk ; fk +∆f ] denotes the time-frequency support of node Ik (for the sake of simplicity, we use the same notation Ik for the sender itself and the time-frequency support of its message); tk is the initial time of transmission and fk the lowest frequency of the packet. tk ∈ [0; T − ∆t], and fk ∈ [0; F − ∆f ] (see ﬁgure 1). 2) There is no cooperation between the devices, i.e., random access considered. The couples (tk, fk) are thus independent. They are also assumed to be uniformly distributed, as it is probably optimal in terms of dispersing the packets and avoiding collisions. 3) Given support Ik, the time-frequency energy of the information packet is uniformly distributed over Ik,
i.e., E |gk(t, f )|2 | Ik = ρk1Ik (t, f ), where ρk is the
energy density. 4) The channel is affected by an additive time-
frequency white noise ξ(t, f ) of energy density γ, i.e., E |ξ(t, f )|2 = γ.
Assumption 3 is the ideal and most efﬁcient way of using time-frequency resources [10]. In practice, transmit spectrum mask is usually applied to specify the upper limit of power permissible and attenuate the signal outside the mask. An attenuation of 30dB to 50dB is observed in real-world scenarios [10], so this assumption can be considered as realistic. Notice that the common Aloha scenario is encompassed in

this formalism by ﬁxing ∆f = F . In this case, fk = 0 but tk remains random.

B. SINR expression

As mentioned in the introduction, interference can be mod-

elled as the sum of accumulated energy in time-frequency

domain, which is calculated as the sum of energy com-

ing from different interfering transmissions. The SINR is

deﬁned as the ratio between the energy of the message

of interest, E |g0(t, f )|2 dt df and the interference

I0 N −1

E |gk(t, f )|2 dt df plus noise, i.e.,

k=1 I0∩Ik

SINR =

ρ0 ∆t ∆f

N −1 k=1

ρk

Sk

+

γ

∆t

∆f

(1)

where Sk = µ (I0 ∩ Ik) is the surface between the transmis-

sion of interest I0 and an interfering one Ik (µ is the surface

measure). We can normalize Sk with respect to the surface of

the

time-frequency

support

of

transmissions,

i.e.,

Xk

=

Sk ∆t ∆f

.

Thus, the SINR can be recast as

SINR =

ρ0

N −1 k=1

ρk

Xk

+

γ

(2)

The overlapping phenomenon between packets is similar to the game of players tossing cards onto a table and trying to recognize their own cards afterwards (see ﬁgure 1). When there are too many players, the probability of overlapping will increase to the extent that it’s highly probable to be unable to recognize a card. In the next subsection, we illustrate in two different scenarios, the interest of our “cards tossing” model in the derivation of the outage probability and throughput of wireless systems in function of the number of devices N .

Fig. 1. Illustration of the “cards tossing” game, where each rectangle represents the information packet Ik. The rectangle in bold represents the transmission of interest, i.e., the packet I0, while the gray areas depict the sub regions in collision (the darker the area, the larger the number of “cards” covering the sub region). The light blue area is deﬁned as the non border area [∆t; T − 2∆t] × [∆f ; F − 2∆f ], denoted by B. The light green deﬁned as the border area [0; T − ∆t] × [0; F − ∆f ] \B. These two areas constitute [0; T − ∆t] × [0; F − ∆f ].
C. Outage and throughput model
1) With multipath fading and path loss: The ﬁrst scenario is when the packets from devices suffer from path loss and fading. ρk can be thus expressed as ρk = ρtmh l(rk).

• ρtm models the transmission energy density, which is supposed to be identical for all devices.
• l(rk) models the distance-dependent attenuation, e.g., path loss, where rk is the Euclidean distance between device k and the base station. We choose the following non singular model [18] expressed as l(rk) = α [max(rk, rc)]−β, where rc is a critical distance to avoid l(rk) taking inﬁnity when rk tends to 0. Here we ﬁx it to 1m. α is a constant modelling system-level losses and gains which is ﬁxed to 1 in our study. β is the path loss exponent assumed to be greater than 2.
• h is a random variable modelling small scale, largescale or com√posite distance non dependent fading. We suppose that h results from a rayleigh multipath fading which gives h exponential cumulative distribution function (cdf), i.e., PH (h) = 1 − exp(−λh) (with P denoting the cdf and E(h) = λ). The mean value λ is ﬁxed to 1 in our study. Note that other forms of fading can be considered with our paradigm.

The SINR can be thus recast as follows,

h

SINR =

+ N −1
k=1

rk−β

h

Xk

r0−β

γ ρtm r0−β

(3)

In order to study the distance distribution of devices in the

cell, we deﬁne rmax as the distance to the base station of

the most distant devices, in the sense that their transmissions

barely satisfy the target SINR, denoted by ζ in the presence

of

only

path loss, i.e.,

ρtm rm −aβx γ

=

ζ.

This gives

us

rmax

=

β ρtm . ζγ

Let us denote Pr the probability measure. Suppose that

every packet is repeated nrep times, and the repetitions

are independent. The outage probability can be deﬁned as [Pr [SINR < ζ]]nrep , which is further expressed as follows,

OPnrep (r0) =

Pr

h

<

rm−βax r0−β

+

ζ

N −1 k=1

rk−β

h

Xk

r0−β

nrep
(4)

Note that repetition mechanism is a commonly used scheme

in LPWANs to trade efﬁciency for robustness of transmission.

Naturally, OPnrep (r0) depends on the position of the device of interest. Distant devices with larger r0 suffer from greater OPnrep (r0). Suppose that the devices are uniformly distributed in the cell of the base station, which is deﬁned as in the

shape of an annulus formed with smaller radius rc and larger

radius rmax. The probability density function (pdf) of rk can

be

expressed

as

pR(r)

=

2r rm 2 ax−rc2

(p

is

used

to

denote

the

pdf). The notation k is omitted for the sake of simplicity.

Global outage probability OPnrep is deﬁned as the outage probability averaged over r0, i.e.,

OPnrep =

rmax rc

OPnrep (r0)

2r0 rm2 ax −

rc2

dr0

(5)

The effective throughput is deﬁned as the average number

of non repetitive packets received per unit time and is denote

by Th(nrep), which can be expressed as follows,

Th (nrep )

=

N (1 − OPnrep ) T nrep

(6)

Recall that N is the number of devices, and T the message

sending period. In the case of pure Aloha, i.e., packets

considered lost when they collide in time or frequency domain,

i.e., XΣ =

N −1 k=1

Xk

=

0.

Assuming

Xk

and

rk

independent,

our outage probability can be recast as,

OPAlohanrep (r0) =

Pr [XΣ = 0] + Pr [XΣ = 0] Pr

h

<

rm−βax r0−β

nrep
(7)

One can observe that (7) is greater than (4), as (4) includes the capture effect, i.e., certain packets not considered lost even in case of collision. OPAlohanrep and ThAloha(nrep) can be calculated in the similar way. By deﬁnition, OPAlohanrep ≤ OPnrep and ThAloha(nrep) ≤ Th(nrep).
2) With perfect power control: We consider another sce-
nario in which the packets of different devices are supposed to arrive at the base station with identical energy density, i.e., ρ0 = ρk = ρ, thanks to a certain power control mechanism. The SINR can be recast in this case as,

1

SINR = XΣ + SNR−1

(8)

where

SNR

=

ρ γ

.

The

outage

probability

can

be

recast

as,

OPnrep = Pr XΣ ≥ ζ−1 − SNR−1 nrep

(9)

In this case the non fairness between devices in terms

of distance to the base station is resolved. OPnrep does not depend on r0 any more, but only on γ, the target SINR ζ and

ρ, the energy density that results from the power control. The

average

throughput

can

be

recast

as

Th (nrep )

=

. N (1 −OPnrep )
T nrep

The quantities to be simulated are listed in table II.

In both scenarios, we should ﬁrst study the probabilistic

distributions of Xk and XΣ. In the next section, we derive

the probabilistic evaluations of Xk and XΣ. In the case

of multipath fading and path loss, the exact distribution of

N −1 k=1

rk−β

h

Xk

remains

difﬁcult

to

evaluate

even

with

the

distribution of Xk derived and rk, h and Xk assumed to be

independent random variables. We use Monte Carlo method

to evaluate it.

IV. PROBABILISTIC EVALUATIONS
The results of Xk and XΣ are different in 1D case and 2D case. We ﬁrst give the results of Xk in the easier 1D case in section IV-A, i.e., ∆f = F so interference happens only when there is overlap in time domain. Physical layer technologies such as spreading spectrum fall into this case. Then the results of Xk in the more complicated 2D case are given in section IV-B, where overlapping can happen in both time and frequency domains, random FDMA approach belongs to this case. The results on XΣ are given in section IV-C.

We denote by pXk (resp. pXΣ ) the pdf of Xk (resp.XΣ), by PXk (resp. PXΣ ) the cumulative distribution function (cdf) of Xk (resp. XΣ).

The overlapped surface between two packets Xk is deter-

mined by their relative position in [0; T ]×[0; F ]. Recall that tk

and fk are deﬁned over[0 ; T − ∆t] and [0 ; F − ∆f ]. We can

thus

deﬁne

τk

=

|tk −t0 | ∆t

and

ϕk

=

|fk −f0 | ∆f

as

the

normalized

absolute time and frequency difference between emission I0

and Ik, see ﬁgure 2. τk and ϕk are deﬁned over [0 ; Nt − 1]

and [0 ; Nf − 1] respectively. From the assumption 2, (τk, ϕk)

also have identical distributions. For the sake of brevity, we

will omit index k in the expressions, i.e., pdf of (τk, ϕk) (resp.

τk and ϕk) is denoted by pτ,ϕ (resp. pτ and pϕ) , and the (cdf)

denoted by Pτ,ϕ (resp. Pτ and Pϕ).

∆f − (fk − f0)

Ik

I0
fk ∆t − (tk − t0)
f0

t0

tk

Fig. 2. When an emission Ik collides with I0, the overlapped surface, represented in gray, is (∆t − |tk − t0|)(∆f − |fk − f0|).

A. 1D “cards tossing” game

In the 1D game, f0 = fk = 0 so that ϕk = 0. fk and ϕk become deterministic and independent of tk. We have

Xk = (1 − τk)1[0 ; 1)(τk)

(10)

One can easily deduce that

1−x

Pr[Xk > x] =

pτ (u)du

(11)

0

which gives Pr[Xk > x] = Pτ (1 − x) and the probability of collision pc = Pr[Xk > 0] is given by Pτ (1).
In the case where tk are assumed uniformly distributed over [0 ; T − ∆t], the cdf of Xk, PXk can be derived as follows,

PXk

=

1

−

Pr[Xk

>

x]

=

1

−

(2Nt

− 3 + x)(1 (Nt − 1)2

−

x)

(12)

where x ∈ [0 ; 1). pXk can be obtained by deriving PXk for

x

=

0,

and

pXk (0)

=

PXk (0)

=

1

−

2Nt −3 (Nt −1)2

.

B. 2D “cards tossing” game

Recall that tk and fk are assumed independent and uni-

formly distributed over [0 ; T − ∆t] and [0 ; F − ∆f ]. Denote

T ∆t

by Nt

and

F ∆f

by Nf .

A simple look at the geometrical conﬁguration plotted in

ﬁgure 2 allows to express the normalized surface as

Xk = (1 − τk)(1 − ϕk)1[0 ; 1)2 (τk, ϕk)

(13)

Thus, for x ∈ [0 ; 1), we have Pr[Xk > x] = Pr[(1 − τk)(1 − ϕk) > x], we immediately get,

1−x

1−

x 1−u

Pr[Xk > x] =

pτ,ϕ(u, v) dv du (14)

0

0

where the bound of the ﬁrst integral is due to the fact that

when

u

≥

1

− x,

1−

x 1−u

≤

0,

the

inner

integral

is

zero.

The

probability of collision is pc = Pτ,ϕ(1, 1) . When tk and fk

are independent and uniformly distributed over [0 ; T − ∆t]

and [0 ; F − ∆f ], some long algebra leads to,

(a + b x)(1 − x) + (c + x)x ln x

PXk = 1 −

(Nt − 1)2(Nf − 1)2

with

a 

=

(2Nt − 3)(2Nf − 3)

(15)





b = 9 − 2Nt − 2Nf



 

c

=

2 (Nt − 2)(Nf − 2)

Similar procedures as in 1D game should be taken to ﬁnd pXk .

C. Probabilistic evaluation of XΣ
Let’s ﬁrst consider the probabilistic evaluation of XΣ in the 2D case. Notice that [0; T − ∆t]×[0; F − ∆f ] can be divided into two areas i.e., the non border area denoted by B and the border area denoted by B. We have B = [∆t; T − 2∆t] × [∆f ; F − 2∆f ], and B = [0; T − ∆t] × [0; F − ∆f ] /B. See ﬁgure 1. For the sake of brevity, we deﬁne the event that (t0, f0) falls into the non border area B also as B. The event that (t0, f0) falls into the border area as B.
In fact pXk|B = pXk|B because a packet in B has greater chance to be corrupted by an interfering one as it can come from all directions. A packet in B cannot be interfered from certain positions of (tk, fk) out of border, resulting in a smaller probability of being corrupted. In section IV-A and IV-B, we could have separated the derivation in B and B and obtained the same results. For PXΣ , instead of evaluating it separately in B and B, we give the approximation as follows,

PXΣ = PXΣ|B Pr(B) + PXΣ|B Pr(B)

≈ PXΣ|B

=

PXk |B

∗

p(k−1)∗
Xk |B

≈ PXk ∗ pX(kk−1)∗

(16)

where ∗ stands for convolution, and (k − 1)∗ the (k − 1)
times convolution. When Pr(B) Pr(B) (This hypothesis
is realistic in the case where T ∆t and F ∆f , which
is veriﬁed in most LPWANs scenarios [1], [2], [3], [13], [19],
[15], [16]), the ﬁrst approximation is obviously valid. The
second approximation comes from PXk = PXk|B Pr(B) + PXk|B Pr(B) ≈ PXk|B, and it’s the same with pXk . We use PXk and pXk obtained in the case of independent and uniform distribution in section IV-A and IV-B to evaluate (16).
The reasoning and the evaluation of XΣ in the 1D case is similar and thus omitted.

V. APPLICATION
Let us now illustrate how our model can be used to evaluate the performance of two LPWA technologies.
A. Sigfox R
1) 2D “cards tossing” parameters: First, we consider Sigfox R , an LPWA technology based on Ultra Narrow Band (UNB) [14]. The packet takes only a bandwidth ∆f around 100Hz. In doing so, the noise power γ∆f is greatly reduced and the transmission range is thus increased. In the physical layer, binary phase-shift keying (BPSK) is used. In the medium access control (MAC) layer, random FDMA scheme is adopted [19], i.e., due to transmitter oscillator’s jitter, it’s not possible to channelize, so a packet is transmitted at a randomly chosen frequency in the available frequency band of 40kHz.
Sigfox R also limits the number of messages per node to 140 messages per day, which equals to a message around every 617s [16]. T is ﬁxed to 617s, i.e., devices transmit as frequently as possible. The maximal allowed payload size per packet is 12 bytes. With the preamble and cyclic redundancy check (CRC) ﬁelds, the transmission duration ∆t of a packet is around 1.76s [20]. Note that this ∆t and T satisfy the European Telecommunications Standards Institute (ETSI) requirement of 1% duty cycle constraints in the 868MHz band [21]. The “cards tossing” game of Sigfox R falls into the 2D case described in IV-B and its parameters, i.e., ∆f , F , ∆t and T are given in table I.
2) Outage and throughput model for Sigfox R : For now, there is no report of any power control mechanism in Sigfox R , so the model introduced in III-C1 is chosen. Parameters ρtm, γ, ζ, β, rmax are also listed in table I. The derivation of these parameters is as follows.
The maximum transmission power in 868MHz is ﬁxed to 14dBm i.e., ρtm∆f = 14dBm [21]. Thanks to UNB, Sigfox R beneﬁts from a reduced noise ﬂoor around -154dBm, i.e., γ∆f = −154dBm. This gives us a link budget around 168dB. Let’s consider a reception threshold of 8dB, a shadow fading margin of 10dB as well as a penetration loss of around 15dB for urban environment. This gives us a target SINR around 33dB, i.e., ζ(dB) = 33dB. Finally let’s consider a path loss exponent β of 3.6 for urban environment. All of these parameters give us a rmax of 5.2km for urban scenario.
3) Simulation: Taking all the parameters of Sigfox R , formulae (4)–(5)–(6)–(7) expressing the ﬁrst 6 quantities listed in II (For the deﬁnition of SF , see section V-B) are simulated and the results are given in ﬁgures 3 and 4.
Figure 3 shows that capture effect represented by the difference between the solid and dashed lines decreases with the distance r0, because naturally the devices nearer to the base station have more chances to beneﬁt from the capture effect. Repetitions do reduce the outage probability.
Figure 4 shows that OPnrep is not greatly reduced in the capture case than in the pure Aloha case; the improvement in Th(nrep) increases with N , as more collisions happen with higher N , thus amplifying the capture effect, but the high collision regime is not the optimal zone for the low-power

TABLE I TABLE OF NOTATIONS

Outage and throughput model
“cards tossing” model Transmission power ρtm ∆f (dBm) Noise ﬂoor γ∆f (dBm) Target SINR ζ (dB) Path loss exponent β Range rmax (km) Cell form Payload size (bytes) Application bit rate (bits/s) F(kHz) ∆f T(s) ∆t(s) Number of channels

Sigfox R With path loss
and fading 2D 14
-154 33 3.6 5.2 Single annulus 12 54.5 40 100Hz 617 1.76 1

LoRa R Perfect power
control 1D
See section V-B3
-117 See table III
3.6 See table III Multiple annuli See table III See table III
125 125kHz See table III See table III
3

TABLE II TABLE OF SIMULATED QUANTITIES

OPnrep (r0) OPnrep
Th (nrep ) OPAlohanrep (r0)
OPAlohanrep
ThAloha (nrep )
OPnrep (SF ) ThSF (nrep)

Outage probability in function of r0 and nrep Global outage probability averaged over r0 or SF Average effective throughput in function of nrep Outage probability in pure Aloha scenario in function of r0 and nrep Global outage probability in pure Aloha scenario averaged over r0 or SF Average effective throughput in function of nrep in pure Aloha scenario Outage probability in function of SF and nrep Average effective throughput of a certain SF in function of nrep

Fig. 3. Outage probability in function of r0 and N . The solid line represents the pure Aloha case, the dashed line the case with capture effect. The ﬁve series of curves in each sub ﬁgure represent from top to bottom the case where N = 30000, 20000, 10000, 1.
devices to function. Device density pR(r) increases with distance r0 and further devices barely beneﬁt from the capture effect, so devices at the cell edge are probably the bottleneck of the network performance, i.e., it’s them that stops the network performance from getting better. One can also observe that repetitions reduce the global outage probability but also result in lower effective throughput because of the introduced

Fig. 4. Global outage probability and average effective throughput in one hour for Sigfox R scenario. The ﬁve colors in each sub ﬁgure from top to bottom represent nrep = 1, 3, 5, 7, 9. Solid line represents the pure Aloha case, dashed line the case with capture effect.
redundancy. Our abacuses permits to ﬁnd the optimal nrep in function of the target outage probability, N , throughput and energy cost.
B. LoRaWAN R
1) 1D “cards tossing” parameters : LoRaWAN R is another LPWA technology based on spectrum spreading [22]. The spreading factor is denoted by SF and can vary from 6 to 12. Every packets are spread in the available bandwidth F , i.e., ∆f = F . In Europe 3 default channels are used, each with a bandwidth of 125kHz [22]. Different SF result in different bit rate. The smaller the SF , the higher the bit rate. Different payload sizes are also speciﬁed for different SF . ∆tSF can thus be calculated, the detail can be found in [13], [23]. TSF is ﬁxed to 100∆tSF according to the ETSI duty cycle constraint of 1% [21] in the 868MHz band. Transmissions from different SF are considered orthogonal and do not interfere with each other [13], [16], [23], so

the “cards tossing” game of LoRaWAN R can be seen as

seven orthogonal and parallel 1D games described in section

IV-A, each having three orthogonal channels of bandwidth

F = 125kHz, different ∆tSF and TSF . The corresponding

game parameters are listed in table I and III [13], [23].

2) Multiple annuli cell structure: The greater the SF , the

lower the sensitivity of transmission associated [23] . This

results in smaller ζSF required for greater SF . Transmission with greater SF can thus reach further. rSF is deﬁned as

the maximum distance that a transmission with a certain

SF can barely reach, with only path loss considered, i.e.,

ρtm rS−Fβ γ

= SNR = ζSF ,

where

ρtm∆f

takes

the

maxmimum

allowed power 14dBm [21]. The noise power is around

−117dBm. Let’s add a shadow margin of 10 dB as well

as a penetration loss of around 15 dB, to give us the ζSF for different SF , see table III. The path loss exponent n

is ﬁxed to the same 3.6 as in Sigfox R scenario. With the

maximal allowed transmission power ρt∆f of 14 dBm, the

communication ranges rSF in terms of path loss for different

SF are thus calculated and listed in table III. These are the

ranges

with

which

the

reception

SNR

=

ρt rS−Fn γ

barely

satisﬁes

ζSF , in presence of only path loss and without considering fading and interferences, i.e., ζS−F1 − SNR−1 = 0.

Further devices should use greater SF to simply reach out to

the base station, while nearer devices can beneﬁt from higher

bit rate of smaller SF . Let’s consider a ideally pre-conﬁgured

network where all the devices located in the annulus deﬁned

by rSF and rSF −1 take spreading factor SF (For SF 6, it’s the annulus between r6 and rc) so that they make use of the smallest possible SF and thus the highest possible bit

rate while guaranteeing the communication range at the same

time [13], [15]. The probability of a node falling into a certain

annulus denoted by pSF is proportional to its surface [15]. The number of devices taking a certain SF is thus just N pSF . ζSF , rSF and pSF are listed in table III.
LoRaWAN R network support over-the-air activation of

the node which requires the node to open 2 successive

downlink windows after a uplink transmission, in order to

receive the MAC layer commands from the network [22].

Also, LoRaWAN R network infrastructure can manage the

SF and date rate by means of an ADR (Adaptive Data

Rate) scheme, which also necessitates the node to listen to

gateway downlink transmissions. Note that the downlink and

uplink in LoRaWAN R share the same channels, so collision

phenomenon may be aggravated by the use of downlink.

The pre-conﬁgured network that we consider is the scenario

without nodes listening to gateway, i.e., there is only uplink

transmissions. Each node is set to an appropriate SF according

to its distance from the gateway.

3) Outage and throughput model with power control

scheme for LoRaWAN R : To improve the fairness of devices

located in the same annulus and having the same SF , we

consider the following ideal power allocation strategy : Al-

locate ρtm∆f = 14dBm to the devices with distance rSF

to make sure they get covered; Make sure that the reception

power density attenuated by path loss of all devices in the same

TABLE III PARAMETERS OF LORAWAN R

SF Sensitivity ζSF Range pSF Payload ∆tSF Bit rate TSF

(dBm) (dB) rSF (km)

(bytes) (s) (Kb/s) (s)

6

-121

21

1.13

0.13

242

0.233 8.309 23.3

7

-124

18

1.37

0.06

242

0.400 4.840 40.0

8

-127

15

1.67

0.09

242

0.707 2.738 70.7

9

-130

12

2.02

0.13

115

0.677 1.359 67.7

10

-133

9

2.45

0.19

51

0.698 0.585 69.8

11

-135

7

2.78

0.17

51

1.561 0.261 156.1

12

-137

5

3.16

0.23

51

2.793 0.146 279.3

annulus, denoted by ρ, is identical and equal to that of devices with distance rSF , i.e., ρtmrS−Fβ. Fading effect is neglected
in this case. This setting falls into the perfect power control paradigm introduced in sub section III-C2. ζS−F1 − SNR−1 = 0
according to the section V-B2. By shrinking all the annuli,

our power allocation scheme can in fact result in non zero ζS−F1 − SNR−1. With cdf of XΣ already given in section IV,
there is no problem in evaluating this adaptation.

In our scenario, the non fairness between devices with the

same SF but different distance r0 is removed, i.e., OPnrep

doesn’t depend on r0 any more, but non fairness exists

between different SF as SF with greater pSF have greater

device number N pSF and thus greater OPnnrreepp(SF ) expressed

as OPnrep (SF ) = Pr X NSF ≥ 0

. Th(nrep) =

k=1

12 SF =6

ThSF (nrep)

should

be

recast

as

follows,

Th (nrep )

=

12 SF =6

3NpSF (1 − OPnrep (SF )) TSF nrep

(17)

where the factor three comes from the three available channels.

The outage probability averaged over SF is expressed as

OPnrep =

12 SF

=6

OPnrep

(S

F

)pSF

.

Quantities

to

be

simu-

lated are listed in table II. Note that in the scenario consid-

ered, OPnrep coincides with OPAlohanrep , and Th(nrep) with ThAloha(nrep) as there is no tolerance of overlapping.

4) Simulation: The simulation results in the LoRaWAN R

case are given in ﬁgures 5 and 6. Figure 5 shows the non

fairness in terms of outage probability between different SF ,

which is directly related to pSF , which again is dictated by non uniformity of device density in function with r0.

Fig. 5. Outage probability of LoRaWAN R in function of N and SF . From top to bottom, the ﬁve curves in each sub ﬁgure represent N = 250, 200, 150, 100, 1. Sub ﬁgure on the left is the case where nrep = 1, on the right nrep = 3.

Fig. 6. The ﬁgure in the top represents average effective throughput in one hour. The ﬁve different colors from top to bottom represent the case nrep = 1, 3, 5, 7, 9. The ﬁgure in the middle represents average effective throughput in one hour of different SF , with nrep = 1. The numbers on the curves stand for the SF . The ﬁgure in the bottom represents the global outage probability. The colors have the same meaning as described earlier.
Several observations can be made from ﬁgure 6. First, repetition mechanism reduces overall outage probability but also the average effective throughput as redundancy is introduced. It increases energy cost as well. Second, the differences between ThSF (nrep) are multiple, dictated by pSF and TSF . pSF determines OPnrep (SF ), while TSF determines the speed of message sending. For example, SF 6 is the fastest of all SF , but as p6 > p7, the curve of SF 6 reaches its maximum much earlier than SF 7, which limits its performance. SF 12 has the worst performance as it has the longest TSF and biggest pSF , which again conﬁrms that the devices at the cell edge are probably the bottleneck of the network performance.
At last, if we try to compare Sigfox R and LoRaWAN R , we can see that even though Sigfox R can support more devices but in terms of throughput, it’s of the same order as LoRaWAN R . Note that the payload sizes in LoRaWAN R are much more important than that of Sigfox R (see table I and III). It seems that Sigfox R is more suitable for applications with a lot of devices having smaller trafﬁc, while LoRaWAN R can support applications with more important trafﬁc but less devices.

VI. CONCLUSION AND PERSPECTIVES
In this article, we provide a high-level ﬂexible model whose interest is illustrated by the performance evaluation of two LPWA technologies. To the best of our knowledge, this is the ﬁrst model which considers joint time-frequency interference. Note that our paradigm can be adapted to other systems to evaluate the relationship between number of devices, repetition times, outage probability, throughput and energy cost. Capture effect is also taken into account in our model so further questions such as how to amplify it intelligently can be investigated in the future. We believe that our model provides a useful dimensioning tool for the future IoT scenarios.
Our model can be completed in the mathematical level. First, when the hypotheses T ∆t and F ∆f are not satisﬁed, algorithmic approach seems to be more adapted due to the difﬁculty in the probability evaluation on the border area. Second, the proportion between ∆t and ∆f has an inﬂuence on the probability distributions of Xk and XΣ, thus comes the question of the best strategy of proportioning the time duration and frequency occupancy of the information packet, in order to minimize the overlapping. At last, it’s possible to formulate a more general problem of ﬁnding the best strategy to use a 2D time-frequency resource, always in terms of minimization of overlapping phenomenon. We have the options between orthogonal division of the frequency band, division into multiple partially overlapping bands (POC), and random FDMA if we go to the extreme.
In both the LPWANs scenarios considered, cell edge devices seem to be the bottleneck of the global network performance. A possible solution is the densiﬁcation of the infrastructure, knowing that IoT devices can communicate with multiple base stations i.e., multiple reception or macro-diversity. A study on the k-coverage of devices is given in [24]. By combining the k-coverage model for LPWANs and our “cards tossing” model, we can jointly design the infrastructure deployment and MAC layer of devices, in order to improve the network performance while limiting the cost.
REFERENCES
[1] Marco Centenaro, Lorenzo Vangelista, Andrea Zanella, and Michele Zorzi. Long-range communications in unlicensed bands: The rising stars in the IoT and smart city scenarios. arXiv preprint arXiv:1510.00620, 2015.
[2] George Margelis, Robert Piechocki, Dritan Kaleshi, and Paul Thomas. Low throughput networks for the IoT: Lessons learned from industrial implementations. In Internet of Things (WF-IoT), 2015 IEEE 2nd World Forum on, pages 181–186. IEEE, 2015.
[3] Lorenzo Vangelista, Andrea Zanella, and Michele Zorzi. Long-range IoT technologies: The dawn of LoRaTM. In Future Access Enablers of Ubiquitous and Intelligent Infrastructures, pages 51–58. Springer, 2015.
[4] N. Abramson. The ALOHANet – surﬁng for wireless data. IEEE Comm. Magazine, 47(12):21–25, 2009.
[5] A. S. Tanenbaum and D. J. Wetherall. Computer Networks. Prentice Hall, Boston, 5th edition, 2011.
[6] Christopher Ware, Joe Chicharo, and Tadeusz Wysocki. Modelling of capture behaviour in ieee 802.11 radio modems. In IEEE Int. Conf. on Telecomm., 2001.
[7] JENSC Arnbak and Wim Van Blitterswijk. Capacity of slotted ALOHA in Rayleigh-fading channels. IEEE Journal on Selected Areas in Comm., 5(2):261–269, 1987.

[8] Kyungwhoon Cheun and Sunyoung Kim. Joint delay-power capture in spread-spectrum packet radio networks. IEEE Transactions on Comm., 46(4):450–453, 1998.
[9] Jeongkeun Lee, Wonho Kim, Sung-Ju Lee, Daehyung Jo, Jiho Ryu, Taekyoung Kwon, and Yanghee Choi. An experimental study on the capture effect in 802.11 a networks. In Proceedings of the second ACM international workshop on Wireless network testbeds, experimental evaluation and characterization, pages 19–26, 2007.
[10] Arunesh Mishra, Vivek Shrivastava, Suman Banerjee, and William Arbaugh. Partially overlapped channels not considered harmful. In ACM SIGMETRICS Performance Evaluation Review, volume 34, pages 63–74, 2006.
[11] Eduard Garcia Villegas, Elena Lopez-Aguilera, Rafael Vidal, and Josep Paradells. Effect of adjacent-channel interference in IEEE 802.11 WLANs. In 2007 2nd international conf. on cognitive radio oriented wireless networks and comm., pages 118–125. IEEE, 2007.
[12] Guoliang Xing, Mo Sha, Jun Huang, Gang Zhou, Xiaorui Wang, and Shucheng Liu. Multi-channel interference measurement and modeling in low-power wireless networks. In Real-Time Systems Symposium, 2009, RTSS 2009. 30th IEEE, pages 248–257. IEEE, 2009.
[13] Konstantin Mikhaylov, Juha Peta¨ja¨ja¨rvi, and Tuomo Haenninen. Analysis of capacity and scalability of the LoRa Low Power Wide Area Network Technology. In European Wireless 2016; 22th European Wireless Conference; Proceedings of, pages 1–6. VDE VERLAG GmbH, 2016.
[14] Claire Goursaud and Yuqi Mo. Random unslotted time-frequency aloha: Theory and application to iot unb networks. In Telecommunications (ICT), 2016 23rd International Conference on, pages 1–5. IEEE, 2016.
[15] Ferran Adelantado, Xavier Vilajosana, Pere Tuset-Peiro, Borja Martinez, and Joan Melia. Understanding the limits of LoRaWAN. arXiv preprint arXiv:1607.08011, 2016.
[16] Brecht Reynders, Wannes Meert, and Soﬁe Pollin. Range and coexistence analysis of long range unlicensed communication. In Telecommunications (ICT), 2016 23rd International Conference on, pages 1–6. IEEE, 2016.
[17] Shancang Li, Li Da Xu, and Shanshan Zhao. The internet of things: a survey. Information Systems Frontiers, 17(2):243–259, 2015.
[18] Muhammad Aljuaid and Halim Yanikomeroglu. Investigating the gaussian convergence of the distribution of the aggregate interference power in large wireless networks. IEEE Trans. On Vehicular Tech., 59(9):4418– 4424, 2010.
[19] Minh-Tien Do, Claire Goursaud, and Jean-Marie Gorce. On the beneﬁts of random fdma schemes in ultra narrow band networks. In Modeling and Optimization in Mobile, Ad Hoc, and Wireless Networks (WiOpt), 2014 12th Int. Symposium on, pages 672–677. IEEE, 2014.
[20] Claire Goursaud and Jean-Marie Gorce. Dedicated networks for IoT: PHY/MAC state of the art and challenges. EAI endorsed transactions on Internet of Things, 2015.
[21] ETSI. http://www.etsi.org/deliver/etsi tr/103000 103099/103055/01.01. 01 60/tr 103055v010101p.pdf. Accessed: 2016-10-24.
[22] LoRaWANTM Speciﬁcation. https://www.lora-alliance.org/portals/0/ documents/whitepapers/LoRaWAN101.pdf. Accessed: 2016-10-24.
[23] LoRaWANTM Tranceiver Speciﬁcation. http://www.semtech.com/ images/datasheet/sx1272.pdf. Accessed: 2016-10-24.
[24] Zhuocheng Li, Tuong-Bach Nguyen, Quentin Lampin, Isabelle Sivignon, and Steeve Zozor. Ensuring k-coverage in low-power wide area networks for internet of things. https://hal.archives-ouvertes.fr/hal-01353801.

