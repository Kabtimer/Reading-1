sensors
Article
Overcoming Limitations of LoRa Physical Layer in Image Transmission
Akram H. Jebril 1,2, Aduwati Sali 1,*, Alyani Ismail 1 and Mohd Fadlee A. Rasid 1 1 Wireless & Photonic Networks Research Center of Excellence (WiPNet), Department of Computer and Communication System Engineering, Faculty of Engineering, UPM, Serdang 43400, Selangor, Malaysia; jebrillakram@gmail.com (A.H.J.); alyani@upm.edu.my (A.I.); fadlee@upm.edu.my (M.F.A.R.) 2 Department of Communication Engineering, Technical College of Civil Aviation & Meteorology, Esbea, Tripoli 84116, Libya * Correspondence: aduwati@upm.edu.my; Tel.: +60-1328-63177
Received: 17 May 2018; Accepted: 10 August 2018; Published: 27 September 2018
Abstract: As a possible implementation of a low-power wide-area network (LPWAN), Long Range (LoRa) technology is considered to be the future wireless communication standard for the Internet of Things (IoT) as it offers competitive features, such as a long communication range, low cost, and reduced power consumption, which make it an optimum alternative to the current wireless sensor networks and conventional cellular technologies. However, the limited bandwidth available for physical layer modulation in LoRa makes it unsuitable for high bit rate data transfer from devices like image sensors. In this paper, we propose a new method for mangrove forest monitoring in Malaysia, wherein we transfer image sensor data over the LoRa physical layer (PHY) in a node-to-node network model. In implementing this method, we produce a novel scheme for overcoming the bandwidth limitation of LoRa. With this scheme the images, which requires high data rate to transfer, collected by the sensor are encrypted as hexadecimal data and then split into packets for transfer via the LoRa physical layer (PHY). To assess the quality of images transferred using this scheme, we measured the packet loss rate, peak signal-to-noise ratio (PSNR), and structural similarity (SSIM) index of each image. These measurements verify the proposed scheme for image transmission, and support the industrial and academic trend which promotes LoRa as the future solution for IoT infrastructure.
Keywords: LoRa; wireless sensor network (WSN); low-power wide-area network (LPWAN); image encryption; peak signal to noise ratio (PSNR); structural similarity index measure (SSIM)

1. Introduction
Wireless remote sensing (WSN) technologies vary in their ability to transfer data at low powers, high speeds, and over long ranges. Today, low-power wide-area networks (LPWANs) are the ideal WSN technology as their extended coverage, low cost, and energy saving features (which are possible without the need for communication infrastructure [1]) make them complementary to short-range wireless technologies, such as Wi-Fi and Bluetooth Low Energy, and credible alternatives to cellular technology, for urban-scale Internet of Things (IoT) applications. This ability for long-range communication to thousands of devices (star topologies) at a low cost and limited power consumption is due to improvements in duty cycling and networking protocols [2]. Long Range (LoRa), narrowband IoT (NB-IoT), IEEE 802.15.4, Sigfox and LTE-M are examples of recent LPWAN technologies used by (IoT) applications to connect wireless sensors to extend the deployment of the IoT and reduce power consumption.
One of the most important features of LPWANs is the ability to enhance the signal-to-noise ratio (SNR) at the receiver by narrowing its bandwidth or by spreading the energy of the signal over a wider

Sensors 2018, 18, 3257; doi:10.3390/s18103257

www.mdpi.com/journal/sensors

Sensors 2018, 18, 3257

2 of 22

Sensors 2018, 18, x FOR PEER REVIEW

2 of 22

frequency range. For example, in NB-IoT, narrowing the bandwidth to less than 25 kHz increases

thewSidNeRr farneqdueenhcyanrcaensgeth. eFoprerefxoarmmpalne,ceinofNtBh-eIotTra, nnsacreriovweri.ngAthsiembilaanrdewffiedctht istoploesssibthleanw2it5h kSHigzfox

whinencrtehaesebsatnhde wSNidRthanisdrendhuacnecdestothaepperorfxoirmmaatneclye o1f00thHe ztr.aWnsictehivLeorR. Aa, snimarirloawr einffgectthies pbaonssdibwleidwthithof a

recSeiigvfeorxewnahbelnestthhee bdaencdowdiindgthofistrarendsumciesdsiotonsawppitrhoxsimgnaatellaym1p0l0ituHdze.sW19i.t5hdLBobReal,ownarthroewnionigsetﬂheoor,

conbsaenqduweindttlhy oefnabrelicnegivceormenmabulneisctahtieodneactodloingeorfrtaranngsems itshsaionnostwheitrhtescighnnaiql aumesp. lTithuedecsap19a.b5ilditBybfeolrolwong

ranthgee ncoimsemfluonoirc, actoionnsewquiethntLlyoRenaacbhlianrgacctoemrimzeusniitcastiothneaftultounrgeenr ertawngoersktihnafnraosthruercttuecrehnfoiqruaeds.vTahneced

IoTcaappapbliilcitaytiofnors, sloinncge irtacnagne coconmnemctuhnuicnadtiorendswoifthIoTLoeRnad-dcheavriaccetsetroizoesneitgaatsewthaye, afuntdudreoensentwotonrkeed
speincfiraalsrteruqcutiurreemfoernatsdvtoanccoendnIeocTt atoppoltihcaetrioenxsi,sstiinncgenitectwanocroknsn. eIcnt thhuinsdpraepdesro, fwIoeTdeenmd-odnesvtircaetsettohoenﬁerst apgpalitceawtiaoyn, aonfdLdooResaninotaneWedSsNpefcoiraltrreaqnusifreermrienngtsimtoacgoensneocftmtoaontghreorvexeisfotirnegstnsetcwaportuksr.eIdn bthyisapnapimera,ge senwseordeamndonussteradtefothremfiarnstgarpovpelicmatoionnitoofriLnogRianinthae WSaSbNakfoBretrrnanasmferdriisntgriicmt aogfeMs oaflamysainag(rsoeveeFfoigreusrtes 1). CucrarpetnutrleydGbPyPa(n2Gim/a3gGe) steenchsonroalongdyubsyedErfoicrssmoannCgroo.v[e3]muosneditotroinmgoinnittohre tShaebastkatBuesrnoafmthedimstrainctgroofve treMesablayysrieaad(sienegFdigautarefr1o).mCusorriel nmtloyisGtuPPre(,2sGm/3oGke) ,tescehanloelvoeglymbeyaEsurircesmsoennCtso,.a[n3]dutseemdptoermatounrietosrenthseors. Sustbetsametuqpsueroeafnttuthlryee, mstheanenssgoerrods.vaSetuatbrtesreeasqnbusyefenrrterlayed,ditnhtgoesdtehadetaactfaoromtrmamnsusofnielrimtryeodcisettonuttrehere, sacmonmodkmpe,ruosneciaetyslescveedenlttmeoreadanesduvrepelrmoopecenssttssre,adatentgdoies to dperveevleonpt stthraetedgeigersatdoaptiroenveonft tthhee mdeagnrgadroavtieonfoorfestht.eUmsainnggrLovoeRafoaressat. WUsSinNg wLoitRhaImasaageWsSeNnsworisthfor theImﬁarsgtetsimenesoinrstfhoirstahreefairbset stiimdee iitnwthilisl hareelpa binestihdee ietnwviilrlohnemlpeinnttmheoennitvoirroinngmpernotcmesosn,iittowrinilgl cporonctreisbsu, te in iatdwdiilnl gcoLnPtrWibAutNe cinapaadbdiilnitgiesLPoWf rAedNuccianpgabpiloitwieesrocfonresduumcipntgiopno(wpeorwceornesdumbyptbioantte(rpioews eforerdyebayrs), cosbtaottfeirniesstaflolartiyoenar(sn)o, cnoesetdoffoirnmstaolrleateioxnpe(nnsoivneeeeqdufioprmmenotr)eaenxdpeinncsriveaeseeqtuhieprmanengte) oafntdrainnscfreerarsiengthdeata (sereanFgigeuorfet2rafnosrfemrroinregidnafotarm(seaetiFoing)u. re 2 for more information).

FFigiguurere1. 1G.oogGleoomgalpe ilmluasptraitlilnugsttrhaetilnocgattihone olfotchaetitoanrgeotfmtahnegrtoavrgeeftormestansigteroinveSafboarkesBtersniatem,inMaSlaabysaika.
BeTrnhaemr,eMstaolaf ythsiea.paper is structured as follows. First a LPWAN image transferring related works is discussed. Then, a background is provided about LoRa network and some important parameters dicTtahteinrgestitos f othpeerpaatipoenr. iAs sftterructthuirse, daascofomllpoawrisso. nFirisst adoLnPeWbAeNtwiemenagLeotRraansafnedrriontghererlaLtPedWwAoNrks is dteicshcunossloegdi.eTs hwehni,cah bhaicgkhglirgohutsndthies apdrovavnidtaegdesaboofutthiLsotRecahnneiqtwueorfkoranWdSsNomapepilmicaptoiorntasn. tApfaterramtheist,ers dicdtaetainilgs oitfstohpeenroavtieolnim. Aagfteertrtahnisf,ear ceoxmpepraimriesonnt ainsddohnowe biet twwaesesnetLuopRaraenddisoctuhsesredL.PWWeAsNubtseecqhuneonltolgyies whliscthahnidghdlisgchutssstthheeardevsualntstaogfetshoisf ethxipsetreimchennitq,utoe fvoerriWfyStNheavpipabliiclaittyioonfsi.mAafgtertrthaniss,fderetoavilesr othf ethLeonRoavel impahgyestircanl lsafyeerre. xOpuerrrimeseunltts ainnddichaotewthiat twLaosRsaeits uanp iadreealdtiescchunsoselodg.yWfoer smuabnsgerqouveenmtlyonlitsotrainngdWdSisNcu. ss
the results of this experiment, to verify the viability of image transfer over the LoRa physical layer. Ou2r. RreeslualttesdinWdoicraktse that LoRa is an ideal technology for mangrove monitoring WSN.
Most of the recent research on LoRa network focuses on its outdoor performance and coverage. 2. RSieglnaitfeicdanWtloyr,kLsoRa proved it can deliver more than half of the packets from 5–10 km range in urban
appMliocsatiofntshaenrdeciennmt raersietiamrcehaopnplLicoaRtiaonnsetwwhoerrke f1o5c–u3s0eskmonditistoanuctedsoorbspeerrvfeodrm[4a]n. cAe faenwd sctouvdeireasge. Sigenxipﬁrceassnetdlyc, oLnocReranprreogvaerddinitgciamnadgeeltirvaenrsmmoisrseiotnhaonvehratlhfeoLfotRhea npeatcwkoetrskfsrionmce i5m–1a0geksmdermanagned ianhuigrhban

Sensors 2018, 18, 3257

3 of 22

applications and in maritime applications where 15–30 km distances observed [4]. A few studies
expressed concern regarding image transmission over the LoRa network since images demand a high amouSnentsoorsf2b01i8t,s18a,nx dFOcRoPnEsEuR mREeVImEWore energy in the transmission operation. One of these si3gonf 2i2ﬁcant
relateadmwouonrtkosfisbiatspaanpdercobnysuCmoengmdourec Penhearmgy [i5n] twhehotrabnusimltisasnio“nooffp-ethraet-isohn.elOvnees loofwth-ecsoestsicgonmifipcaonntents” imagereslaetnesdowr oprlkastfiosrampawphericbhysChoonwgedducpPrhoammis[i5n]gwrheosublutsiltoafntr“aonffs-mthiet-tsihneglviemsalogwes-coovstecroLmopRoan,eanlttsh”ough only aim1a.8gke msenrsaonrgpelaatcfhoiremvewdhtihchisswhoitwheodupt rpoamckiseint glorsess.uAltns ootfhtrearnpsampiettrinbgyiFmaangeest oavl.e[r6L] ogRivae, salathtohueoghretical analyosnislyfoar 1t.h8eknmewrawngierealechssieveisduathlisewnsitohrouptroptaocckoelt ulossins.gALnooRthaermpoadpuerlabtiyonFabnuettthails. [w6]asginvoest taested
outdothoerosruetnicliakleanoaulyrspisapfoerr.the new wireless visual sensor protocol using LoRa modulation but this was Tnootthteestbeedstoouftdoouorrsknuonwlikleedoguer ,ptahpeerre. is no other study testing LoRa physical layer (PHY) capabilities
in imagesTtoratnhsembiessstioonf foourr akmnoawnlgedrogve,etfhoerreestisarneoa oththuesr fsatru.dTyhitessitsinbgecLaouRsae pithsylsoicnagl rlaaynegre(cPaHpYa)bility affectcsatphaebbilaitniedswinidimthagwehs itcrhanissmciosnsisoindeforerda ambainggrboavrerifeorreinsttarraenastmhuitstifnagr. iTmhiasgiessbaencadumseuitlstilmonegdriaandgaeta [7]. Althocmuaupglahtbi,mimlietdyoisaatfdofaefctattsh[7et]h.ceAulrbtrhaenondutwgihimd, mtphloeswmt hoeifcnthhteeidscuncroernetwnsitdoiemrrkepsdleamareebnsitgheodbrantrerrtiawenrogrikensntareratenwsshmoorirktttsirn,agtnhgieemynaehgteawsvoearknasd,wide bandwthiedythhaavnedahwigidhedbaatandrwatiedt(he.gan.,dZhibiggheed, aLtTaEra, teetc(.e).,ga.,nZdibthgeeey, hLaTvEe, eatcs.e)r, iaonuds tphreoybhleamvewaitsheraioluims ited link bpurodbgleemt [8w].itMh oareliomvieter,dLloinRka baunddgoetth[e8r].LMPWoreAoNvesr,arLeoRchaeaanpderoitnheirnsLtaPlWlaAtiNons aanred cdhoeanpoetr rienquire repeaitnesrtsalfloatriodnisatnandcdeobneostidreeqLuPirWe rAepNeaatreerschfoeradpiesrtatnoceinbsetsaildleanLdPWdAo Nnoatrreecqhueiarpeerretpoeiantsetrasllfaonrdddisotance. Also,nLoPt WreqAuNirse repqeuaitreerslefsosr pdioswtanercec.oAnlsuo,mLpPWtioAnN(sereqFuiigrue rles2s)p. ower consumption (see Figure 2).

FigurFeig2u. reLP2.WLAPWNAisNciusrcruernrtelnytltyhtehestasttaet-eo-of-ft-hthee--aarrtt tteecchhnnoolologgyyinintrtarnasnmsimttiinttginimg aigmeas ggeivsegnivgelonbagllobal concecronnfcoerrnlofwor ploowweprocwoenrsucomnpsutimonptaionndalnimd iltiemditbeadnbdawniddwthid[t9h].[9(a].) (LaP) WLPAWNAsNasreatrheethheighhiegshteisnt iennergy efﬁcieiennncedyragtayanredafftlieoc.iwenecsyt ianncdolsotws.e(sbt )inLPcoWstAs.N(bs)aLrPeWthAeNlosnagreestthienloconvgeesrtaginecroavnegreagaenrdanthgee laonwdetshteinlowdaetsat rate.
In thIen ftohlelofwollionwginsegcsteioctnio, nd,edtaetialsilsababoouuttLLooRRa neettwwoorrkkssanadndcocmompapriasorinssonwsithwiotthheorthLPerWLAPNWAN netwonrektws oarrkesdairsecduisssceudss.ed.
3. Bac3k. Bgarockugnrdound
3.1. L3o.R1.aLNoRetawNoertkwork LoRaL,oRwah, iwchhischtanstdasndfsorfotrhteheiniintiitailalleletttteerrss ooff tthhee wwoorrddss‘L‘LonogngRaRnagne’g, ei’s, aiscoamcboimnabtiionnatoiof n of
commcpourmonvimcidauetnisoiscniagttnieoicfnhicnateoncltholyngloioelnosggaienersdraapnnrgdoetotphcraoonltsoo,ctdohleesvr, eLdlPoeWvpeeAldoNpbeytdeSchbemnyotSleoecgmhiet(seC.cMhamo(Cdauraimllaltoair,oiCnlloAw, ,itCUhASL,AoRU),aStAhisa)b,taptshreaodtvides signiﬁoncasnptrlyeadlo-snpgeecrtruramngteechthnaiqnueost,haenrdLaPWvaAriNatiotenchofnoalocghiireps.spMreoadduslpaeticotrnumwi(tChSSL)oRmaodiuslabtaiosned on spreaidn-tsepgreactterdumwitthecfhonrwiqauredse, rarnodr caorvraercitaiotinon(FEoCf a) [c1h0i]r.pLospRrae’sadCSsSpeiscttrhuemke(yCfSaSc)tomr ofodrulolantgiodnisitnatnecgerated with fsoigrnwaal rtdraenrsrfeorr wcoitrhreacthioignh-(qFuEaCli)ty[1li0n]k. ,LeovRena’swCheSnS tihsethsiegnkaelypfoawcteorrifsourplotnog20didsBtalnocweesrigthnaanl tthraensfer with anohisigehfl-oqoura[l1i1ty,12li]n. kL,oeRvaeunsews huenniqtuheefrseigquneanl cpyoswhiefrt kiseyuipngto(F2S0Kd) fBorlodwemerotdhualantitnhgesnigonisaelsﬂ1o9.o5rd[B11,12]. LoRabuelsoews uthneiqunoeisfereqflouoern. cIyn schoifnttrkaesty,inogth(eFr SnKe)twfoorrkdetemchondoulolagtiiensgasreigntyaplsica1l9ly.5 odnBlybecalopwablteheofnoise ﬂoor.dIenmcoodnutrlaatsitn,gostihgenralnsewtwithorpkotweecrhsnoofl8o–g1i0esdaBraebtoyvpeicthaellynooisnelyflocoarp[a1b0l]e. of demodulating signals with powers ofT8h–e1n0odvBeltayboofvLeotRhae insoiinseofﬂfeoroinrg[1a0c].ontinuous phase between different chirp symbols in the
Tphreeamnobvleelptayrtoof fLtohRe aphisysinicaolflfaeyreinr gpaackceotn, twinhuicohuesnpabhlaessesibmeptwleer eannddimffoerreenatcccuhriartpe tsiymminbgoalsndin the preamfinrbetqlheueepLnaocryRtasoynfnoctdhhereo[1pn3ihz].yaAtsiiocsnian,lgwllaeityhLeooruRtparagecaqktueeiwrti,anwyg chcaoincsthclyoevcneoarmbhplueonsndesrniemtdsspfoolefrrsgqeaunnaedrreamtkiniolgormea esatecetcrtlsue[dr1a4lto]e.catilmcloinckg and

Sensors 2018, 18, 3257

4 of 22

frequency synchronization, without requiring costly components for generating a settled local clock in the LoRa node [13]. A single LoRa gateway can cover hundreds of square kilometers [14].
The LoRa MAC layer or LoRaWAN is the communication protocol and system architecture layer of a LoRa network. It has the greatest inﬂuence on network capacity, quality of service, battery lifetime of individual nodes, and security. To isolate the testing of the LoRa physical layer and its ability to transfer images at a limited bandwidth, LoRaWAN was not used in this paper.
3.2. The LoRa Physical Layer
LoRa can commonly refer to two distinct layers: a physical layer using the CSS and a link layer. The LoRa physical layer consists of many parameters which can be conﬁgured into 6720 different settings [15] to offer a wide range of choices for ensuring a good quality link or consuming less energy. The most important parameters of the LoRa physical layer are the carrier frequency (CF), spreading factor (SF), bandwidth (BW), transmission power (TP), and coding rate (CR). These are discussed further in the proceeding paragraphs, and Table 1 below.

Table 1. LoRa parameter settings and their effects on communication performance [2].

Setting Bandwidth Spreading Factor Coding Rate Transmission Power

Values 125, . . . , 500 kHz

26,

...

,

212

chips symbol

4/5, . . . , 4/8 −4, . . . , 20 dBm

Effects
A higher bandwidth is required for transmitting data at high rates (1 kHz = 1 kcps). However, increasing this parameter decreases the communication range and sensitivity.
A higher spreading factor (SF) increases the communication range, radio sensitivity, and the signal-to-noise ratio (SNR). However, energy consumption consequently increases.
Bigger coding rates increase the protection against decoding errors and interference bursts at the expense of longer packets and higher power consumption.
The signal-to-noise ratio is increased by increasing the transmission power at the cost of energy expenditure.

The following are deﬁnitions for these parameters:

• Carrier Frequency: CF represents the central transmission frequency used in a band. This can be

programmed between 137 MHz to 1020 MHz, in steps of 61 Hz.

• Spreading factor: SF is the ratio between the symbol rate and the chip rate. It can be set between 6 and 12 in LoRa [16]. For each SF, there are 2SF chips per symbol. SF has a

more signiﬁcant inﬂuence on energy consumption than increasing the transmission power,

which increases the communication range. Hence, modifying the SF is more effective in reducing

the energy consumption while maintaining the communication range. A larger SF increases the

communication sensitivity and data bit rate and reduces the time on air (TOA).

• Bandwidth: BW is the range of frequencies available for transmission. A larger BW allows

transmission at higher data rates but with a shorter TOA and lower sensitivity. In contrast, a lower

BW enables a higher sensitivity but a lower data bit rate.

• Coding rate: FEC offers protection against interference and can be conﬁgured by setting the CR to

4/5, 4/6, 4/7, or 4/8. In LoRa, more robust protection from interference requires a higher CR,

which increases the TOA.

• Transmission power: In LoRa, the power required to transmit a speciﬁc data packet can be

adjusted as appropriate. The relationship between SF and the data bit rate in LoRa is deﬁned

as follows

Rb

=

SF

×

1 [2SF/BW] bits/s

(1)

Sensors 2018, 18, 3257

5 of 22

where BW is the modulation bandwidth in Hz. From Equation (1), we note that spreading factor is directly proportional to the data rate [17].
3.3. Comparison of LoRa and Other LPWAN Technologies
In the following sections, we compare LoRa to a number of prominent LPWAN technologies, to demonstrate that it is the best choice for the WSN monitoring mangrove forests in Malaysia.
3.3.1. LoRa versus NB-IoT
NB-IoT is a network technology based on the long-term evolution (LTE) standard that offers connectivity in the 200 kHz spectrum. Most current IoT applications adopt this technology because of its good coverage and low cost of deployment. NB-IoT has been speciﬁed under 3GPP release 13 for inclusion within the LTE system.
The advantages of the NB-IoT standard include the ability to deploy the technology using existing LTE networks, a large coverage area, and a high quality of customer service. Similarly, features of the LoRaWAN standard are a long communication range, and thus, coverage area, long time service of user terminals, low cost of network deployment and user terminals, and a high penetrating power. However, the data rates achievable with LoRaWAN are relatively low [18].
Despite the large coverage area and high-quality link offered by NB-IoT even when implemented using existing LTE networks, the cost of the deployment of this technology is expensive compared to LoRa, as a greater cost is incurred in upgrading existing base stations [18].
3.3.2. LoRa versus IEEE 802.15.4
The IEEE 802.15.4 standard offers data rates approaching 250 kbit/s. However, the transmission range greatly depends on the environment. While, for a clear line-of-sight this can reach 1000 m, the range is measured in tens of meters in most cases. Three unlicensed frequency bands are supported by the IEEE 802.15.4 standard: 868 MHz in Europe, 928 MHz in North America, and 2.4 GHz worldwide [19].
In general, LoRa is less sensitive with respect to interference than IEEE 802.15.4g. Research on channelization has proven that it is resilient enough to obtain high packet reception rates (PRR), even with strong interference from IEEE 802.15.4g signals, which are communicated in the same frequency band. The impact of these signals depends signiﬁcantly on the conﬁguration of the LoRa network (i.e., the SF and BW). At high data rates, LoRa tolerates interference from signals with amplitudes that are 6 dB higher than the power of the actual LoRa signal being received. At low data rates, this tolerance goes up to 16 dB, as deﬁned by the acceptable PRR [20].
3.3.3. LoRa versus Sigfox
Of the wireless communication technologies that have been classiﬁed for IoT applications, the two that are commonly deployed in the ISM band (LoRaWAN and Sigfox) are long range. Sigfox is a proprietary ultra-narrowband technology, developed by an eponymous company based in Labège, France, which uses differential binary phase-shift keying (DBPSK) modulation. In contrast, modulation with LoRa is based on proprietary spread spectrum techniques and Gaussian frequency shift keying [21]. Communication in Sigfox is performed in the 868-MHz frequency band, with the spectrum divided into 400 channels of 100 Hz. Sigfox claims that up to a million end-devices can be handled by only one access point, and the coverage can reach 50 km in rural areas and 10 km in urban areas [12].
With the Sigfox network, data packages are transmitted three times at random frequencies, to maximize the probability of successfully receiving at least one packet, as it is more sensitive to interference than LoRa networks. In [21], coverage and capacity for Sigfox and LoRaWAN on area covering 150 km2 of urban areas Northern Denmark tested, and found that uplink indoor coverage

Sensors 2018, 18, 3257

6 of 22

(20 dB penetration loss), the impact from interference is even worse, as the link budget is reduced, where LoRaWAN has 78% coverage and Sigfox less than 50% coverage.
3.3.4. Summary of the Advantages of LoRa
FSernosomrs 2t0h18e, 1c8o, xmFOpRarPiEsEoRnRsEVpIeEWrformed in the previous sections, it is evident that LoRa h6 aofs22many advan3.t3a.4g.eSsuomvmeraroythoef rthLePAWdvNannteatgwesoorfkLs.oRTahe most signiﬁcant advantages of LoRa with respect to its deployment in future infrastructure networks are [16]
From the comparisons performed in the previous sections, it is evident that LoRa has many
• Oadrvthanotgaognesaol vpearcoktehtertrLaPnWsmNinsseitownoruksi.nTghedmiffoesrtesnigtnSifFicsa(nftraodmva6nttaoge1s2o) fcLoonRcaurwreitnhtrleys,pwecithtoouitst data cdoelplilsoiyomnesnotrindfeugtruardeaintiforanstirnucpteurrfeonrmetwanocrkes, raerde u[1c6i]ng TOA.
• L• ongOrrathnoggeocnoaml pmacuknetictaratinosnmwisshieorneuosuintgdodoifrfecroevnet rSaFgse(fcraonmre6atcoh1s2e)vceornaclukrrielonmtlye,twreist,hwouhtidleatiandoor covecroalgliesiorneas cohredseghruadnadtiroendisn opfermfoermtearnscae,nrdedcuocvinegraTgOeAi.n multi-hop scenario approaches tens o•f kilLoomngetrraensg, e communication where outdoor coverage can reach several kilometres, while indoor
• Lowccoovsetroafgenertewacohreks dheupnldoryemdseonft masenteords easncdacnorveearcahgethine sminukltid-hiroepctslcyewnairtihooauptpinrotearcmheesdtieanrsyorfoutes,
kilometres,
• A• dapLtoiwvecdosattaofranteetswaonrkd dmepullotiycmhaenntnaesl mnooddeesmcantrarenasccheitvheerssinfokrdrierceecitvlyinwgitmhoeustsaingteesrmfreodmiaraylarge numrboeurteosf, network nodes,
• V• eryAlodwapetinverdgaytacorantseus manpdtimounltfiocrhaanlnoenlgmboadtetmerytralinfesctiemiver, s for receiving messages from a large • Highnpumenbeetrraotfinnegtwaborilkitnyoodfesr,adio signals; and, • O• perVaetrioynloiwn tehneerugnylcicoennsusemdprtiaonngfeo.r a long battery lifetime,
• High penetrating ability of radio signals; and, 3.4. L•imitaOtipoenrsattioonIminagtheeTurannliscmenissseidonraonvgeer. LoRa
W3.4S. NLims (itsaetieonFsigtouIrmea3g)e cTorannssimstisosiforneomveortLeosReansing nodes monitoring aspects of their environment, which senWdScNolsle(sceteedFidguatrae t3o) caosnisniskt coefnrteemroftoerspenrosicnegssninodgefsomr aonsiptoerciinﬁgcaaspppeclticsaotfiothne.irThenevbiriogngmesetndt,esign concewrhnicfhorseWndScNolsleicsteedndeartgaytocaonsisnukmcepnttieornfo, rwphroiccehsssihngoufoldr abseperceidficuacpepdliicnatioornd.eTrhetobiogfgfeesrt ldoensigg-nrange connceocnticoenrns afonrdWwSiNdse icsoevneerraggye.coHnosuwmepvteior,nt,hwehtircahnshfeoruoldf dbeatraedfruocmedtihneosrednesrintogonffoedr elsontog-trhanegseink is hindecorendnebcytiotnhseannadrrwoiwdebcaonvderwagied.tHh oowf ethvers,ethneetrwanosrfkesr oafnddatha efriromlimthietesdenmsienmg noordyefsotroctohme spinuktaistional procehsisnedse[r1e]d. Mbyotrheeovnaerr,roLwoRbaantedcwhindothloogfythceosnesntreatiwnoerdkstoan1%d tdhueitryl-icmyictleed(mi.ee.m, 3o6rys/fohr) caopmppliuetsattoiotnhael total transpmroiscseisosnesti[m1].eM, worheiocvhemr, eLaonRsa otenclhyncoalongtyracnonsmstriatidneadtato361%s edauchty-ocnyecleho(iu.er.,o3f6trsa/hn)sampipslsieiosntotitmhee [22]. This ltiomtailttartainosnmmissaikoenstitmraen, swfehricrhinmgedaantsaofnrloymcandetrvaincsems iltikdeatiam3a6gseeascehnsoonreshvoeurryocf otrmanpslmexis,saiosnatilmarege bit rate i[bs2ir2te]rq.aTutehiriisesdlirmefoqitruaittrhieoedncfmoomraktmheseutcnroaincmasmfteiourrnniniocgaftdiimoantaagofrefoidmmaadtage.evHidcaeestnalc.iekH,eaeinmltchaeog, uealgstehhnoLsuoogrRhs avLehoraRysactohhmaespaltbehxiel,iataysbiatloiltaycrogtome bine the fecaotmubrienseotfheLPfeWatAurenseotwf LoPrkWsAanndetwWoSrkNs annedtwWoSrkNs,ntertawnosrfkesr,rtirnagnsmfeurrlitnigmmeduilatimdaedtaiaodvaetra LoovRera is a challeLnogRianigs aiscshuaellbenecgainugseissoufethbeecdauatsae torfatnhsemdaistasitornanlsimmiistsaitoinonli.mitation.

FigFuirgeu3re. 3C.oCmompopsoistiitoionnooffaa wwiirreelleesssssseennssininggnentewtworokr(kW(SWNS) N[1)].[1].
The bandwidth of transmission is the most important factor that affects the performance of the TChSSe bteacnhdniwquidethusoedf tfroarnLsmoRisasmioondiuslathtieonm. oAstLiomRpa osrytmanbtolfaccotnosristthsaotfa2ffSeF ccthsirtphse, pweirthfoormneacnhcierpof the CSS teracnhsnmiqituteedupseerdsefcoorndLo(cRhairpmroadteu),laetqiuoanl. toAaLboaRndawsiydmthbooflocnoenHsiesrttsz o[1f22].SFMcohreiorpvesr,,wwiitth LoonReachirp modulation the bit rate and symbol rate at a given SF are proportional to bandwidth.
The duration of a LoRa symbol, Ts, can be calculated from the following equation, while the data bit rate can be calculated using Equation (1) [12]:

Sensors 2018, 18, 3257

7 of 22

transmitted per second (chirp rate), equal to a bandwidth of one Hertz [12]. Moreover, with LoRa modulation the bit rate and symbol rate at a given SF are proportional to bandwidth.
The duration of a LoRa symbol, Ts, can be calculated from the following equation, while the data bit rate can be calculated using Equation (1) [12]:

Sensors 2018, 18, x FOR PEER REVIEW

Ts

=

2SF BW

7 of 22
(2)

From Equations (1) and (2) we observe t=ha2t decreasing the bandwidth will decre(2a)se the

transmissFioronmraEtqeuaantidoncso(n1s)eaqnuden(2tl)ywinecorebasesrevethtehastendseictrievaitsyin. gHtheencbea,ntdowiimdtphrowvilel tdheecrpeaesrefotrhme ance of LotRraansamndissiinoncrreaatseeanthdeccoonmseqmuuenntilcyaitniocrnearsaentghee, stehnesibtiavnityd.wHiedntche,mtouismt pbreovliemtihteedp,ersfuocrmh atnhcaet oofnly a smallLeorRbaitarnadteindcaretaasceatnhebceotmramnusfneircraetido.nIrnanthgies, tphaepbearn, dthweidlothwmesutsBt bWe lcimonitﬁegdu, sruactihotnha(1t 2o5nlkyHa zsm) iaslluesred to
attainbitthreatheidgahteasctasnebnesittriavnistyferfroerdl.oIngthtirsapnaspmeri,ssthioenlosw. est BW configuration (125 kHz) is used to attain

the highest sensitivity for long transmissions. 4. Experimental Method

4. Experimental Method To verify the feasibility of image transferring over the LoRa physical layer, we conducted a practical mToeavseurirfeymtheentfeeaxspibeilriitmy eonf timinagtheetrSaanbsfaekrrBinegrnoavmer mthaenLgorRoavepfhoyrseicsat,l nlaoyretrh, wweestcoonfdtuhceteSdelaangor state,pMraacltaicyaslima.eFaosurrtehmisenext pexepriemrimenetn, tthinetLhoeRSaabtarkanBsemrniasmsiomnannogdroevwe afosrﬁesxte, dnotrothtwheesttoopfothf eaSSeklaynligfot rcrane, at a hsetaigteh, tMoaflaaypspiar.oFxoimr tahtiesleyx4p0ermim,eannt,dthteheLorRecaetirvaenrsmnoisdsieonwnaosdienswtaalslefdixetdo ttohethbeatcokp ooff aa fSokuyrli-fwt heel drivecwvrhaeneheeil,cladetr,iavwheheviicgehhhittcrolaef,vaweplphlericdohxoitmnraeavtkeelilylleod4m0oemntee,rakfnioldollmtohweetiernregcfeoeilvaloecwrhnimnogdeeaesawucahrsemmineesatnsatul,lretedomtaeolnltoth,wetobfoaacrllkothwoef faaosfrsoetuhsrse-ment of imaasgseesqsmuaelnittyofaitmdaifgfeerqeunatlidtyisattadnicffeesr,eanst dililsutsatnrcaetse,dasinillFuisgtruarteed4i.n Figure 4.

FiguFrieg4u.reL4o.RLaoRmaemaseuasreumremenetnstsfrforommddififffeerreenntt llooccaattiioonnssininSaSbaabkakBeBrnearnma(mPtx(P=tx14=d1B4md).Bm).
4.1. Hardware Setup 4.1. Hardware Setup
The transmission node, as illustrated in Figure 5, consists of a LoRa Arduino shield that comprise TofheantrRaNns2m90i3sstiroannsncoeidvee,ra(smiilcluroscthraipte) dstianckFeidguornea5n, cAorndsuisintso oMf EaGLAoRmaicArordpuroinceosssohri.eIltdisthgaotocdomtoprise of ankRnoNw29th0a3t tArardnusicneoivisearn(mopiecnroscohuirpce) bstoaacrkdeadndocnonantaiAnsrda uvienryosMimEpGleAmimcrioccroonptrolclersswohr.icIhtciasngboeod to knowcothnnaet cAterddtuoinvoarisouasntyoppeesnosfosuenrcsoerbs oaanrdddaenvdicecso. nFtuaritnhseramvoerrey, Asrimdupinleomcoincsruomcoenstlreoslsleprowwehricthhacnan be conneocthteedr ttionyvacorinoturoslltiynpgedseovficseesnssuocrhs aasnRdadspebveicrreys.PFi,uwrthhiechrmisomreo,rAe rcdoumipnloiccaotendsuanmdecsolnessisdeproewd ears than otherfutilnlyyfcuonncttrioonllailncgodmepvuitceers[s2u3]c.hAansARdaasfprubietrTrTyLPSi,ewriahliJcPhEiGs mcaomreeracocmonpnleicctaetdedtoatnhde Acorndusiidneorbeodaards fully functwpiohanosatoulssc.eoTdmhfepotruratcnearspm[tu2is3rsi]ni.ogAninnmoAadgedecasi.frrAcuuliisttoTi,sTapLoMwSieecrrroeiadSlDbJyPcaEarG1d2 cVaadbmaapetttroearryci,sownchoninecnchetiecsdtcehdtoatrotghesedavAbeyrdathuseoinlcaoarppbtauonraeerdld, was usedefnosrucrainpgtuthrienngoidmeacgoeusl.dAblesop,oawMereicdroaSt Da rceadrudcaeddacpotsot.rAisllctohnenseecctoemdptoonseanvtseatrheeecnacplotsuerdedinpahotos. The trwaenastmheirspsiroonofnboodx,etcoirpcruoittecist tphoewmefrreodmbaydvae1r2seVenbvaitrtoenrmy, ewnhtailcchoinsdcihtioanrgs,eadsbsyhoawsnolianrFpigaunreel,6e. nsuring the node could be powered at a reduced cost. All these components are enclosed in a weatherproof
box, to protect them from adverse environmental conditions, as shown in Figure 6.

Sensors 2018, 18, 3257 Sensors 2018, 18, x FOR PEER REVIEW Sensors 2018, 18, x FOR PEER REVIEW
Sensors 2018, 18, x FOR PEER REVIEW

8 of 22 8 of 22 8 of 22
8 of 22

FiguFrSFeieiggr5uiua.rrleeCJP5o5.E.mCGCpoocmomanmppeoeonnrnatees.nn(to3tss)foLotfhof tRethhaeLeSoLLhRoioeRaRladatrtrtararanadnnsisomsmmaiidsissassspiiioootnennrn.nn(ooo4d)ddeSee::D:((11(C)1)a)AArAdrrddMruudioinundoiounMloMe.eMeggaaegmmaiiccmrrooipcprrrooocpceerssossocorer..s(s(22o))rT.TTT(2LL) TTL SeriaSlFeJirgPiuaElrGeJP5cE.aGmCcoeamrmape.or(na3.e)(n3Lt)soLRoofaRtSahheSihLeiloedlRdararatdrdaiionosaamddiaasppsittoeenrr..n((4o4)d)SeSD:D(C1C)araAdrrdMduMoidnouodleMu.leeg. a microprocessor. (2) TTL
Serial JPEG camera. (3) LoRa Shield radio adapter. (4) SD Card Module.
Figure 6. Completed transmission node enclosed in a weatherproof box and fixed on top of a Skylift FiguFrceirga6un.reeCa6ot.maChpoemliegptheltedtoetfdr4a0tnramsnm.smisissisoinonnnooddeeeenncclloosseeddiinnaawweaetahtehreprrpoorof obfoxboanxdanfidxeﬁdxoendtoopnotfoapSokfyalifStkylift cArardnuecSScFriraiinamamgtnonuaieielrUlaaehaartnret6lalyio.aygC,h,hmhteotehtihmiigegocehprhfrtorlte4eeopoc0tcfefree4modi4i0vcv0t.emremrasr.sn.nnosomroddaiesens(di(ossenseetenaFoFcidkiggeeuuderrneoecn7l7oaast)oe) cdpcooinonnfssaiiistswt.tsseTaohotfhfeaesareLpLcoroooRRomafapbRRooNNxn2ea29nn90td0s33faiMMxreeododadoluusnloleteoeccpnoocnonlftotrarsooeSlldlkleeydidlnifbsbtiyydaeanna
ASwiremdautihSlianiemrorlpyiUlr,aontroholyfem,btroihecxecr,oerapiesvcrsoeehicrvoeneswrsonondroienadn(eFsdie(gsesueteFareciFgk7iegubdu.reroen77ata)o)pccooonnfssiitis.sttTsshooefsfaeaLcLoomoRRapaRonNRe2Nn9t20s93a0rM3eoaMdlsuoldeeuncolcelnotcsroeodnllteirndosblildyeedaanby an ArduwAineraodtuhUiennroporUomnoiofcbmrooixpc,rraoospcsrehosocsewosrsnoairnnadFnidsgtusartcaekc7kebed.doonnttoopp ooff iitt.. TThheesseecocmompopnoennetsnatsreaarlesoalesnocleonsecdloisnesdidienaside a weathweeraptrhoeorpfrboooxf ,baosx,sahsoswhonwinn iFnigFuigruer7eb7.b.

(a)

(b)

(a)

(b)

Figure 7. (a) Receiver node: (1) Arduino Uno (2) LoRa RN2903 Module. (b) The receiver node enclosed

Finigsuidre a7.w(ae)aRtheceerpivreoronf obdoex:.(1) Ard(uai)no Uno (2) LoRa RN2903 Mo(dbu)le. (b) The receiver node enclosed

FitnoisgtiuedsiFreFiFnteniiisgaisgg7itiuduudw.aerrer(teeaeaada)78w8t.wiRhf(sesfaeeehaeh)acrtorRotephehwiweernvecrosrtespeopridtrtvrfhohnioebsoeoeortfofdarnrbxebnoeo.co:dccxexee(e.i1.si:vv).(e1eAr)rArnndroouddduineeinoiionnUsUstntanaololll(e(e22dd)) LLooononRRttahahReReNbNb2aa29cc90kk03o3MoffMotthdohuedelufefo.ole(uub.rr)(--Tbwwh)hheTeerheeeelcledrdievrrcieivevrienevovevdreeehnheioicncdllceeloieinsnnedcoolrorddseerdr

to tesFt iigt uatredi8ffsehroenwtsdtihsetarnecceesi.ver node installed on the back of the four-wheel drive vehicle in order

Ftoigtuesrteit8asthdoifwfesretnhtedriesctaenivcesr. node installed on the back of the four-wheel drive vehicle in order to

test it at different distances.

SSeennsosorrss22001188, ,1188, ,x3F2O57R PEER REVIEW Sensors 2018, 18, x FOR PEER REVIEW

99oof f222 9 of 22

FigurFei8g.uCreo8m. Cpolemtepdletreedcerievceeirvnerondoedﬁexfeixdedtotoththeebbaacckk ooff aa ffoouurr--wwhheeeledl rdivrievveevheichleictloeetnoaebnleatbelsetitnegstaitng at Fdigifuferreed8nif.tfCedroeisnmttapdnlicesettaesn.dcerse.ceiver node fixed to the back of a four-wheel drive vehicle to enable testing at different distances.
4.2. Experimental Setup 4.2. Experimental Setup
4.2. ExperimFiegnutrael S9eitlulupstrates the operation of the complete test setup. Here, the TTL camera captures a JPEGFFiJdigiPmaguEtuaaGrregienie9mt9hoaiielfgllluSetuhDsosetftrmramtahettemaeesnmsogtrthayrhnoeaegvnoroedoppvtcereoreravteartesetiro.ietosnsAn.thfAootifesfftrtdethrtahehtteahicsicios,no,mtmohthpeapelhAleAeetrtexreddatuudteeieisnnsctotiomssMeMeatltEuuEfGpopGr.A.mAHHmaemtie.rcTerirec,oh,rpetohtrhhpoeeecrxTeoaTscTdsTeoLesLrcsicsomcaaarmvamsleeasdervatrahteaaescicapstaphhtphetoutetupnorrehesostaoa JdPaEtGa iitnmratanhgsefeeSroDrefdmthteoemtmhoearrynecgaerniovdverceontvordeeeretsvs.itaAhtfihsteedrLaotthRaiasin,ptthohyesaicAhaerlxdlaauydienerc.oiTmMhiasEldGfaoAtramimsasitpc. rlTiothpinertohoce8ex4sa-scdoheracrsiamacvtaeelrsdptahcteakepitsshtohteon dtaratansinfteotrhreeendaSbDtloemtthraeenmrsemocrieysisvaioenrnd.nOcoondvceeevratilsal ttthhheiesseLdpoaaRtcaakienptthsoyhasaivhceaelbxelaaedyneercre.icmTeihavliesfdod,ratmhtaeayits.aTrsephsleiethnitenxbtyoadt8he4ec-icAmhraadrluadicnatoetarUpinsaotchkeents trtoanesnfaepbrrrloeecdetrstasoontrshtmeo irasespcieeorinsvo.enOrannl occodemeaplvluitatheterh,seweLhpoearRcekatehpteshyyhasarivecaerlebalaessyeenemrr.beTlcehediisvaedndda,tdathiissepyslapaylreietdisnuestnoint8gb4My-cAthhaTerLaAAcrBtdecruopidnaeoc.kUentso tporeoncaebssleortrtaonasmpeisrssioonna.lOconmcepaultletrh,ewsehepraectkheetys haareverebaesesnemrebcleeidveadn,dthdeisypalareyesdenutsbinygthMeAATrLdAuiBnocoUdne.o processor to a personal computer, where they are reassembled and displayed using MATLAB code.
Figure 9. Experimental setup for transferring images of the mangrove forest between two LoRa nodes. 4.2.1. Image Encryption Scheme for LoRa Transmission
Data transmission from high bit rate devices, such as image sensors, over the LoRa network is FiFgviuegrrueyre9s.9lEo. xwEpx.eprSeiumricmehnetinantlfaoslersmteutaputpifoofnrortirstarnainnsfasefprerprirrniongpgirmiimaateaggefesosoroffttrhtahenemsmfeaarnngwgrroiotvhveetffhooirrseesstttebcbehetntwwoeleoeegnnyttwwbooecLLaoouRRseaa nnooofddteehsse..
bandwidth limitation and LoRa constrained to 1% duty-cycle (i.e., 36 s/h) which means only can
44.2.2.1.1.D.ItfmIaromatraanatgsrtgmeareanEinstEnfsdencmarcrrtryiainysp3sgpti6itodoisnoanetnafaSrcSfochrchmohoemenmhmenieghoefohdfoueorbrsriLottLoforotRagrRtaaaeatneTsdTwmrreaaavinysnissscsi.meomHsni,isostsswismuiioeocenvhn.eTra,hsietiLmhoaaRsgaaeMlismeAniCtseoldarysae,brioliivstyetrytpothicceoalpLlyeorwReaistphnoeinmtswiabgoleerk is very Dslaotwa .trSaunscmh iisnsifoonrmfraotmionhigish binitarpapterodperviiactees,fsourchtraasnismfeargewsiethnsothrsis, otveecrhtnhoeloLgoyRabneecatwusoerkoifs vtherey bsalnowdw. Sidutchh liinmfoitramtiaotnioannids iLnoaRpaprcoopnrsitartaeinfoerdtrtaon1s%ferdwuittyh-ctyhcislete(ci.hen.,o3l6ogsy/hb)ewcahuiscehomf tehaensbaonndlywcidatnh trliamnsitmatiitodnaatand36LsoReaacchoonnsterahionuerdotfot1ra%nsdmuitsys-icoynclteim(ie.e..T, 3h6e sL/ohR)awMhiAchCmlaeyaenrsisotnylpyiccaanllytrraensspmonitsdibaltea for transferring data from nodes to gateways. However, it has a limited ability to cope with image

Sensors 2018, 18, 3257

10 of 22

36 s each one hour of transmission time. The LoRa MAC layer is typically responsible for transferring data from nodes to gateways. However, it has a limited ability to cope with image data due to the typical image size and the encryption used in the MAC layer. Hence, to enable transmission of image data, the LoRa physical layer is used with a new encryption method instead (see Appendix A).
With the new method the image is captured by the Adafruit TTL camera and then saved in SD memory in the JPEG ﬁle format. From there it is subsequently converted into a hexadecimal formatted ﬁle. The Arduino processor then splits the hexadecimal ﬁle into packets containing 84 hexadecimal characters, which is the largest ﬁle size that can be transferred over the LoRa bandwidth at one time. To begin serial data transfer, the LoRa radio transmission command ‘radio tx’ is sent to the receiver node, followed by the hexadecimal packet. Data transfer is paused until the LoRa receiver node sends an acknowledgement that the initial packet has been received successfully. Then, subsequent packets are transmitted.
4.2.2. Receiving Images over LoRa
The LoRa radio adapter in the receiver node listens for transmitted signals (see Appendix A) and sends a receipt of acknowledgement when they successfully arrive. Once all hexadecimal packages have been received, they are collected into one data variable by the Arduino processor and then sent, through a serial connection, for processing in MATLAB in order to retrieve image data from the hexadecimal package.
4.2.3. MATLAB Manipulation of Received Images
MATLAB is used to help control the process of sending and receiving data through the LoRa adapters and to analyse the quality of the images before and after transfer over the LoRa network, using the PSNR and MSE. Prior to transmission, the MATLAB code sends a prompt message asking the user to enter a number from 1 to 6 to trigger transmission. These numbers correspond to the settings for the SF which, in this case, vary from 7 to 12. Following this, the data transfer process described above is initiated. The MATLAB code for triggering data transfer, retrieving received data packets, and saving and displaying the reassembled image is highlighted in the Appendix A (Figure A5).
4.3. LoRa Physical Layer Settings
The conﬁguration of the LoRa radio parameters for the transmitter and receiver nodes are summarized in Table 2, where a bandwidth of 125 kHz is used as the narrowest BW value that can be conﬁgured by the LoRa RN2903 Module. The aim of using this value is to ensure the highest sensitivity rate and long communication range. The used values of SF ranges from 7 to 12. Those values can be chosen by the default settings recommended by Semtech, the LoRa developer.

Table 2. Settings of the LoRa physical layer during testing.

BW

SF

PT CR

125 kHz From 7 to 12 14 4/8

4.4. Metrics

The peak signal-to-noise ratio (PSNR) is typically used to assess the quality of an image transmitted over a network. As image quality is assessed quantitatively, this based on the difference between the pixels of the image reconstructed following transmission and the original image [24].
The PSNR of a transmitted image can be calculated as

PSNR

=

10

log

S2 MSE

(3)

Sensors 2018, 18, 3257

11 of 22

where, for an 8-bit image, S is 255 and MSE is the mean squared error, which is the average of the squared difference in the intensity pixels in the original image and the output image [24]. This is calculated as

MSE

=

1 mn

m−1 n−1
∑ ∑ [I(i, j) − K(i, j)]2
i=0 j=1

(4)

where m and n are the respective length and width of the image in pixels I(i,j) and K(i,j) are functions describing the intensity of individual pixels in the transmitted and received image, respectively.
Studies comparing reconstructed images with original images using PSNR and MSE have reported that these two metrics are not sufﬁcient for image quality assessment. It is advised that another metric called the ‘structural similarity index’ (SSIM) is used in addition to these, to measure the degree of similarity between the original and the transmitted image. Hence, in testing the ability of LoRa to transmit images using the proposed method, we used these three metrics to deﬁne the transmission quality.

5. Results
In this section, we consider the results of the data transfer of captured mangrove forest images over the LoRa physical layer using different SFs and at different distances. In addition to the quality assessment metrics, we also consider packet loss and the effect of the surrounding environment on transmission.

5.1. Packet Loss in LoRa Transmission
Table 3 shows a series of characteristics that deﬁne the success of image transmission over the LoRa physical layer. With this set of experiments, the SF was varied from 7 to 12, and communication ranges between 1 and 7 km were tested. In this table, we record the number of hexadecimal packets received, the packet loss ratio, and the time elapsed for data transfer (calculated using additional code in the receiver node) for each SF and distance setting.

Table 3. Packet loss measurements.

SF Setting
7 7 7 7 7 7 8 8 8 9 9 9 10 10 10 11 11 11 12 12 12 12

Distance (km)
1 2 3 4 5 6 4 5 6 4 5 6 4 5 6 4 5 6 4 5 6 7

Received Image
Y Y Y Y N N Y N N Y N N Y N N Y Y N Y Y Y N

Number of Transmitted
Packets
314 315 317 312 311 309 312 316 310 318 315 310 309 311 310 313 313 316 317 315 318 319

Number of Received Packets
314 315 317 312 296
0 312 309
0 318 310
0 309 309 237 313 313 293 317 315 318 310

Packet Loss Elapsed Time

Ratio

(Average)

0 P (0%) 0 P (0%) 0 P (0%) 0 P (0%) 15 P (4.82%) 309 P (100%) 0 P (0%) 7 P (2.21%) 310 P (100%) 0 P (0%) 5 P (1.58%) 310 P (100%) 0 P (0%) 2 P (0.64%) 73 P (23.54%) 0 P (0%) 0 P (0%) 23 P (7.27%) 0 P (0%) 0 P (0%) 0 P (0%) 9 P (2.82%)

1 min + 7 s 1 min + 7 s 1 min + 7 s 1 min + 7 s 1 min + 7 s 1 min + 49 s 1 min + 49 s 1 min + 49 s 1 min + 49 s 3 min + 13 s 3 min + 13 s 3 min + 13 s 5 min + 48 s 5 min + 48 s 5 min + 48 s 8 min + 50 s 8 min + 50 s 8 min + 50 s 14 min + 27 s 14 min + 27 s 14 min + 27 s 14 min + 27 s

Sensors 2018, 18, 3257

12 of 22

Sensors 2018, 18, x FOR PEER REVIEW

12 of 22

Remarkably, we observed no packet loss between 1 and 4 km, when SF = 7 (see Table 3 above) wherwe htiemrReeetmiemlaaerpkeaslbealdpys,dewduerdiounbrgsinedrgvadetdaatnatroatrpnaasncfskeferertwlwoasasss blleeesstwss tethheanann12a2nmmdini4n. k.WmWe, waelshaoelsnoobSsoFebr=sv7eerd(vsetehedaTttah4b.a8let2%34.a8ob2fo%tvheeo) f the packeptasckweetsrewleorsetlowsthwenhetnhethiemiamgaegewwasastrtarannssffeerrrreedd oovveerraa55kkmmrarnagneg. eA. llAplal cpkaectskewtesrwe leorset wlohsetnwhen transtfrearnrsinfegrraintgraant graensgoefs 6ofk6mkmanadndabaobovvee. .SSiimmiillaarrllyy,, nnooppaacckketetlolsossws awsaosbosebrsveerdvaetddaisttadniscteasnscheosrtsehr orter than t4haknm4wkmhewnhSeFn =SF8=, 98,a9nadn1d01.0T. hTehecocommmmuunniiccaattiioonnrraanngge ewwithitohuotuptapckaectkleotssloinsscrienacseredatsoed5 ktom5 km whenwShFen=SF11= a11ndan6d k6mkmwwhheenn SSFF ==1122. .WWithitthhethlaettelartSteFr, aSFpa, cakeptalockssetoflo2s.8s2%ofw2a.8s2o%bsewrvaesdo(bseseerved
(see TTaabblle 3 aabboovvee).).MMosotsitmipmoprtoarnttannottnicoettihcaettahnatSFanofS7Froedf u7creesdthuecetismtehelatipmseededlauprisnegdtrdaunsrfienrg, atnradnsfer,
and SSFF 1122 iiss pprreeferraabblleeffoorrlloonnggddisitsatnacnecetrtarnasnmsimssisosni.oAn.t Athtetheneden12d i1m2aigmesagouest ofu2t 1ofw2e1rewrerceirveecdeived successuscfucelslysfu(slelye T(saebeleTa4b) laen4d) manodstmreomstarrekmabalrekarebsleulrtesstuhltast tShFa7t, SSFF78,, SaFn8d, SaFn9d wSFe9rewveerrey vcelorysec, laolsteh,ough the maeltahsouurgehmtehnetms ewaesurereimnednitfsfewreernet idnidstiaffnerceenstadnisdtatnhciessisancdletahrilsyisshcloewarlnyisnhoFwignuirneF1i0g.ure 10.

Table 4. Summary of the numbers of successfully and unsuccessfully received images. Table 4. Summary of the numbers of successfully and unsuccessfully received images.
Total Y N To21tal 1Y2 N9
21 12 9

100

90

80

Packet loss ratio (%)

70

SF7

60

SF8

50

SF9

SF10 40
SF11

30

SF12

20

10

0

4

5

6

Distance in (km)

FigFuigreur1e01.0C. CororrerlealatitoionnbbeettwweeeennSSFFaannddppacakcekteltoslos srsatrioa.tio.

Visual inspection of the images before and after transfer over the LoRa network (see Table 5) Vinidsiucaatleitnhsepseucctcieosns ooffththeeneimwaimgeasgebeenfocrryepatinodn sacfhteemr etr, aanlthsfoeurgohvseormtehoef LthoeRreacenievtewdoimrkag(esseeweTraeble 5) indicaftfeecthteedsbuycnceosisseo. Bf ythseplnitetwingimthaisg‘ehiegnhcrbyitprtaitoendsactah’eimnteo,paaltchkoetus,gwhesoarme eabolfe thoeovreecrceoivmeedthime LagoResa were
affectbeadndbwy indothisleim. Bityatsiopnli.tting this ‘high bit rate data’ into packets, we are able to overcome the LoRa
bandwidth limitation.

SSSeeennnsssoooSSSrrreeesssnnnss2s22ooo000SSSrrr111eeesss888nSnn222,,,ssse000111ooonSSS111888rrrseee8s88ss,,,onnn,,,rxxx222ssss111000oooFFF8882111rrrOOO,,,s0888ssxxx1,,,RRR22281110FFF00,PPP8881OO1O11,,,E8EE888RRRxxx,E,EE,,111FFFRRRPPP3888OOO2EEE,,R,RR5xEERERRxxEEE7RRRFFFVVVPPPOOORERREEIIIEEEREEERRWWWRRRVVVPPPIIIERRREEEEEEEEEWWWRRRVVVIIIRRREEEEEEWWWVVVIIIEEEWWW

TTTaaabbbTTTllleeeaaab5b55bT...lllaTTTeeeVVVbaaa555iiilbbbssse...uuulllTTVTVVeee5aaaaaai.iilll555sssbbbVccc...uuullloooVVVieaaaeesmmmllliiiu555sssccc.appp.u.uuoooVlVaVaaammmcrrrllliiioisiisspppcccsssumuuoooaaaaaammmnnnrrrpllliiissascbpbbppccoooroooeeeaaainnnmtttmsmrrrwwwioiibbbssspppneeeoooaaaeeetttnnnbrwrwrwnnnieiibbbssseeteoooeoeeoweeerrrntttnnnnniiiwwwegggbebboooiiieeeennnneerrreeetttiiaiaannnwowgwgglllriiioooeaaaenennigerrrnnneeaaaiiininndddglggllnaiaiiaoaootttnnnnnnrrrlrraaaaiddidiaglgllgnnnniaaatititsssnndnrrrnnnfffaaaeaeeadddtnnnlrrrllrrrrsassaatatteeefrffrrnnnneeedaddaadsddrrrnnnfrrriiiessstmmmeetetrfffrrrdddeaeearaaaerrrnnngiggiirrrdmmmssseeefffsssdddieaaaeemrggfgffrriiirooorrmmmeeeaeeerrrsssgdddaaaeeeefffgggaoaaooisiimmemeecccrrrfshsshhoeeaeaafffraaagSSSggoooccceeFFFeerrrhhhsasseseesscfSSSffeeeaaahoooFFtFttcccrtttrrhShhiiisssennneeFeeeSSSaagaggtttsFcFFctctteuihuuiihhnnnssstsssteeeSgggSSeeeitttnFFdFddtttuuuiiigsnnnssiiiennneeugggtddtdtstttuuuieeeeiiiniinnsssdsnnnegeetgttgiiididdtttnnnnueeeuugggisiisssstnnnttte...eeeiiidnsndndttteeetgggiisissinn...nntttigiitnnntt.eeegggsss...tttiiinnnggg...

OOOOrrrriiigggOOOiiinnnnrrraaaiiiaggglllliiiOOOnnnrrraaaiiilllgggOiiiOOnnnrrraaaiiilllgggiiinnnaaalll

RRReeeccceeeRRRRiiivvveeeeeecccdeddeeeRiRRiiivvvveeeeeeecccdddeeedRiRiiRvvveeeeeecccdddeeeiiivvveeeddd

OOOrrriiigggOOOiiinnnrrraaaiiiggglll OiiiOOnnnrrraaaiiiilllggggOiiiOOinnnnrrraaaiaiilllgggliiinnnaaalll

RRReeeccceeeRRRiiivvveeeeeecccdeddeeRiRRiivvveeeeeecccdddeeeRRiRiiRvvveeeeeecccdddeeeeiiiivvvveeeedddd

111333 ooo1fff1113232233o222oooffff21112222333222ooofff111222333222ooofff 222222

DDDD=== =111DDDkkk1===mmmk111,,,DDDmkkkSSSmmFmFF===, S=1==11,,,DDDFSSS7k77kkFFFm=mm======11,1,,7777SSSkkkFFFmmm===,,, S777SSFFF === 777

DDD === 222DDDkkk===mmm222,,,DDDkkkSSSDmmFmFF=== =2==22,,,=DDDSSS7k77kk2FFFm=mm==k===22,2,,m777SSSkkkFFFmm,m=S==,,,FS777SSFFF====7777

DDDD=== =333DDDkkk3===mmmk333,,,DDDmkkkSSSmmFmFF===, S=3==33,,,DDDFSSS7k77kkFFFm=mm======33,3,,7777SSSkkkFFFmmm===,,, S777SSFFF === 777 DDDD=== =444DDDkkk4===mmmk444,,,DDDmkkkSSSmmFmFF===, S=4==44,,,DDDFSSS8k88kkFFFm=mm======44,4,,8888SSSkkkFFFmmm===,,, S888SSFFF === 888

DDD === 444DDDkkk===mmm444,,,DDDkkkSSSDmmFmFF=== =4==44,,,=DDDSSS7k77kk4FFFm=mm==k===44,4,,m777SSSkkkFFFmm,m=S==,,,FS777SSFFF====7777 DDD === 444DDDkkk===mmm444,,,DDDkkkSSSDmmFmFF=== =4==44,,,=DDDSSS9k99kk4FFFm=mm==k===44,4,,m999SSSkkkFFFmm,m=S==,,,FS999SSFFF====9999

Sensors 2018, 18, 3257
SSSeeennnsssoooSSSrrreeesssnnnss222sooo000SSSrrr111eeesss888nnn222,,,sss0001o11ooSS1S118r88rrees8es8s8,,,nnn,,,xxx222sss11100o0ooFFF88811r1rrOOO,,,s8s88sxxx,,R,2RR221110FF0F0PPP88811OOO1,,,8EEE88RRxxRx,,EEE, 111FFRFRRPPP888OOOEEE,,RRR, xERERxERxEEERRRFFFVPVVPPOOOERERERIIIEEEREERERWWWRRRVVVPPPIIEIRERREEEEEEEEWWWRRVVRVIIIRRREEEEEEWWWVVVIIIEEEWWW Original

Received

Table 5. Cont.

Original

Received

14 of 22 111444 ooofff111242244222ooofff111222444222ooofff111222444222ooofff222222

DDDD=== =444DDDkkk4===mmmk444,,,DDDmkkSSSkmmFFFm==,=S4=4==,4,,DDFDSSSk1k11kFFF000m=mm======44,,4,111SS1Sk0kk000FFFmmm===,,,S11S1S0F00FF===111000

DDD === 444DDDkkk===mmm444,,,DDDkkSSSkDmmFFFm=== 4=4==,4=,,DDDSSSk1k11k4FFF111m=mm==k===44,,4,m11SS1Skkk111FFFmm,mS===,,,FS11S1S1F11FF====11111111

DDDD=== =444DDDkkk4===mmmk444,,,DDDmkkSSSkmmFFFm==,=S4=4==,4,,DDFDSSSk1k11kFFF222m=mm======44,,4,111SS1Sk2kk222FFFmmm===,,,S11S1S2F22FF===111222 DDDD=== =555DDDkkk5===mmmk555,,,DDDmkkSSSkmmFFFm==,=S5=5==,5,,DDFDSSSk1k11kFFF222m=mm======55,,5,111SS1Sk2kk222FFFmmm===,,,S11S1S2F22FF===111222

DDD === 555DDDkkk===mmm555,,,DDDkkSSSkDmmFFFm=== 5=5==,5=,,DDDSSSk1k11k5FFF111m=mm==k===55,,5,m11SS1Skkk111FFFmm,mS===,,,FS11S1S1F11FF====11111111 DDD === 666DDDkkk===mmm666,,,DDDkkSSSkDmmFFFm=== 6=6==,6=,,DDDSSSk1k11k6FFF222m=mm==k===66,,6,m11SS1Skkk222FFFmm,mS===,,,FS11S1S2F22FF====11112222

Sensors 2018, 18, 3257

15 of 22

5.2. Quality Assessment of Received Images
After reassembling the received images into the JPEG ﬁle format, we calculated the values of PSNR, MSE, and SSIM for the different transmission conditions using MATLAB, for image quality assessment. The results of these calculations are summarised in the following table.
We observed from Table 6, that the values of MSE and SSIM were 0 and 1, respectively, at communication distances between 0 and 3 km when SF was set to 7. These values indicate that the original and the received images were identical in these transmission conditions. The same values were calculated for images transmitted with SFs of 10, 11, and 12 at a distance of 4 km from the transmission node. The following table (Table 7) summarizes the SF settings where the original and transmitted image are identical.

Table 6. Summary of image quality metrics (MSE, PSNR, and SSIM) calculated using MATLAB.

SF Distance (km)

MSE

PSNR (dB) SSIM

7

1

7

2

7

3

7

4

8

4

9

4

10

4

11

4

11

5

12

4

12

5

12

6

0 0 0 98.7301 9.4572 8.9987 0 0 189.3394 0 62.4792 234.5309

INF INF INF 28.1863 38.3732 38.5890 INF INF 25.3584 INF 30.1734 24.4288

1 1 1 0.9321 0.9953 0.9968 1 1 0.9437 1 0.9625 0.9528

INF refers to inﬁnity. We obtained this when the value of a divisor was small, such that the result of the subsequent MATLAB calculation was numerically undeﬁned.

Table 7. LoRa physical SF setting which has identical image quality metrics.

SF Distance (km) MSE PSNR (dB) SSIM

7

1 to 3

10

4

11

4

12

4

0

INF

1

0

INF

1

0

INF

1

0

INF

1

5.3. Effects of Fresnel Zone
Although the results of this experiment demonstrate that by adopting the proposed encryption scheme image data can be transferred over the LoRa physical layer, they do not indicate the full capabilities of LoRa communication based on the nine trials which ended in failure. We posit that the reason for these failures was the dense growth of coconut trees around the mangrove area, which worked as obstacles preventing signals from traveling between the transmitter and receiver nodes. These trees lie in the so-called ‘Fresnel zone’, deﬁned in point-to-point networks by a cylindrical ellipse drawn between the transmitter and the receiver nodes, as illustrated in Figure 11. It is known that this zone should be at least 60% free of obstructions, such as buildings, mountains, or trees, failing which, signal energy loss is incurred. This, reduce the performance of the wireless link, as was the case with our experiment. Hence, it is important to have a clear ‘line of sight (LOS)’ between the transmitter and the receiver, as much as possible [25]. In our experiments, the transmitter node was ﬁxed on a Skylift at a height of 40 m. The height of the receiver node, which was installed on the back of a four-wheel drive vehicle did not exceed 5 m. On average, coconut trees are approximately 12 m tall. This height can sometimes approach 25 m in isolated incidences [26]. Consequently, these trees fall in

Sensors 2018, 18, 3257 SSeennssoorrss 22001188,, 1188,, xx FFOORR PPEEEERR RREEVVIIEEWW

16 of 22 1166 ooff 2222

the ﬁffraaslltll oiinnrdttehhreeFffriirersssttnooerlrddzeeorrnFFerr,eebssnanseeelldzzooonnnee,,thbbeaassgeeeddoomonnetttrhhyee oggfeeotohmmeeemttrryyeaoosffuttrhheeemmmeneeatasseuunrrveemimroeennntmt eeennnvvtii,rroaonsnmmilleeunnstt,t,raaassted in Figuriielllluu1ss2tt.rraaTtteheddisiinnhaFFsiiggauurnreee11g22a..tTTivhheiissehhfafaesscaat nnoeenggatahttiievveetreeaffnffeesccmtt ooinsnsttihhoeenttroraafnntsshmmeiiLssssoiiooRnnaoosffigtthhneeaLLlsoo.RRaa ssiiggnnaallss..

FigurFtFtreriieegg1eeuus1srr.aeaecIc1l1ttl11aua..sssIIltolollrububasssstttttiararoacacntltlieieooossnnftthholoiafafnttlleicicnn-aaoeenn-f-o-oaasffff-i-ffsgseeiichgcgtththsstptiigpgpononoianiainnlltt-tpp--ttetoeoorr--f-fppopooorormmiiinnnaatttnnwwwccieieirr.r.eeelleleessssssccoocmommmmmuunnuiicncaaitctiiaootnni.o. IInmm. aaIgmgeea33gssehho3owwshssohhwoowws ththhoeew the trees act as obstacles that can affect signal performance.

FigurFFeiigg1uu2rr.eeD1122e..nDDseenngssreeoggwrrootwhwttohhfooCffoCCcoooccnoonunuuttttrttrereeeeesssaaarrroouunnndddttthhheeemmmaanannggrgroorvvoeevfefoorfreoessrtte,,swwt,hhwiicchhhiffcaahllll fiiannlltthhiene fftiihrrssett oﬁorrrddseterrorder FresnFFerrleeszsnnoeenllezz.oonnee..

TToo ffiigguurree oouutt wwhheetthheerr oorr nnoott tthhee ttrreeeess aarree aaccttiinngg aass aann oobbssttaaccllee ooff ssiiggnnaall ppeerrffoorrmmaannccee bbeettwweeeenn tTthhoeeﬁssgeeunndrdeeerrouaantndwd htthheeethrreeercceeoiirvvenerro,,ttththheeeFFtrrreeessennseeallrzzeooannceetirnraagddiaiuusssaaannnoddbdsdtiiaaamcmleeettoeerfr scciaagnnnabbleepcceaarllfccouurllmaatteaeddncuuessbiinneggtwtthheeeen the

sendeffoorlllaloonwwdiinntghgeffoorrremmcueuillavasse::r, the Fresnel zone radius and diameter can be calculated using the following

formulas:

r === 88.86..66555666×××

D F

((55))

(5)

whewrwehheerree rr == TThhee rraaddiiuuss ooff tthhee FFrreessnneell zzoonnee
r = The raDDdi==uTTshhoeefddtihissettaaFnnrcceeesbbneeettwlwzeeoeennneRRxx aanndd TTxx ((kkmm)) D = The dFFis==tFaFnrreecqqeuubeenentccwyy ueuesseneddRiinxn tathhneedttrrTaanxnss(mmkimissss)iioonn pprroocceessss wwhhiicchh iiss 992211..99 MMHHzz
F = Frequency used in the transmission pFFrzzooocnneeesDsDiwiaammhieecttheerri=s= r9r 2××122.9 MHz
TThhee FFrreessnneell zzoonnee mmiiddppooiinntt ccaallccuuFllaazttoeeddneuusDsiinniaggmtthheeeteffoorlll=loowwr i×inngg2

((66)) (6)

The Fresnel zone midpoint calculated using the following

Fzone

midpoint

height

=

40 + 2

5

=

22.5

m

(7)

Sensors 2018, 18, 3257

17 of 22

where the 40 m and the 5 m are the height of the transmission and the receiver node from the ground respecSetnisvoersly20.18, 18, x FOR PEER REVIEW
17 of 22
The average height of the mangrove trees (coconut trees) were calculated because it useful to ﬁnd

ouusitnhgotwhemfoullcohwiitncganeqeunactriooancFhzothnreomugidhptohinetFhreeisgnhetl=zon4e0,2+so5in=ou2r2.e5xmperiment

they

calculated (7)

this

where the 40 respectively.

m

and

thAev5emrgearHe tehieghhetiogfhCt oofctohneutrtatnrsemesis=sion25an+2d1th2e=re1c8e.i5vemr node

from

the

ground

(8)

The average height of the mangrove trees (coconut trees) were calculated because it useful to

wherefinthdeo1u2t–h2o5wismthuechraitncgaenoefnccorocaocnhutthtrroeuegshhtehieghFtrsesnel zone, so in our experiment they calculated

Fthoirs euxsianmg pthle,fotlhloewFirnegsenqeulaztioonne for the ﬁrst kilometre distance between the transmission and

receiver nodes can be calcuAlvaetergdeuHsienigghtthoefaCboocvoenuEtqturaeteison=s (5)–(8)=as 1th8.e5fmollowing

(8)

where the 12–25 is For example,

the the

range of Fresnelr

zc=oonc8oe.n6fuo5tr6tt×rheeesfhir9es2it1g1kh.×9itlso×1m013e0tr6e

=dis9t.a0n1cme between

the

transmission

and

receiver nodes can be calculated using the above Equations (5)–(8) as the following

Fzone Diameter = 9.01 × 2 = 18.02 m Fresnel zone centre height = =Fzo8n.6e5m6id×poin9t21h1e.9×ig×h1t01−0Fzo=ne9R.0a1dmius = 22.5 − 9.01 = 13.49 m

Subtracting this value from thFezaovneerDagiaemheeteigrh=t9o.0f1c×oc2o=n1u8t.0t2remes roughly gives us the distance of the coconut trees which crossed the Fresnel zone.
Fresnel zone centre height = Fzone midpoint height − Fzone Radius = 22.5 − 9.01 = 13.49 m

Subtracting this value from the av1e8r.a5g−e h1e3ig.4h9t o=f 5c.o0c1onmut trees roughly gives us the distance of

the coconut trees which crossed the Fresnel zone.

After this, it is easy to ﬁnd out18h.5ow− 13m.49u=ch5.0t1hme Fresnel zone clearance is using the following calculations
After this, it is easy to find out how much the Fresnel zone clearance is using the following

calculations

Percentage of the zone that is non-free = 5.01 × 100 = 27.8% Percentage of the zone that is non-free = 1.. 8.0×2 100 = 27.8%
Percentage of the Fresnel zone that is free = 100 − 27.8% = 72.2%
Percentage of the Fresnel zone that is free = 100 − 27.8% = 72.2%

ThusT, haut sth, aet ﬁthrestfidrsitstdainstcaenc(e1 (k1mkm) b) ebtewtweeeenntthhee ttrraannssmmiittteterraannddthtehreecreeicveeirv,ethr,ethFreesFnreelsznoenlezwonaes was moremthoarne t6h0a%n 6c0l%eacrloeafroobfsotbrustcrtuioctnio.nT.hTihsismmeeaannsstthhee ccooccoonnuutttrtreeeesswwillilnlontoatffaefcftetchtetchleeacrlelianreloinf seigohftsight betwebeentwtheeentrthaenstrmanitstmeritatenrdanthdethreecreciveievre(rs(eseeFFigiguurree1133).

FigurFeig1u3r. eT1h3e. Tchaelccuallactuiloantioonf othf ethFerFersensenlelzzoonneebbeettwweeeenn tthheetrtarannsmsmittietrtearnadntdhethreecerievceerivaet rthaet ftihrset ﬁrst distance (1 km).
distance (1 km).
After applying the same calculations for the rest of the distances, the following results were Afofutenrda(psepelyTianbgleth8)e: same calculations for the rest of the distances, the following results were found (see Table 8):

Sensors 2018, 18, 3257

18 of 22

Table 8. Fresnel zone calculations for the measured distances.

Distance (km)
1 2 3 4 5 6

Fresnel Zone Radius (m)
9.01 12.75 15.61 18.03 20.16 22.08

Fresnel Zone Diameter (r × 2)
18.02 25.50 31.22 36.06 40.32 44.16

Percentage of Clear Fresnel Zone
72.2% 65.69% 62.82% 61.4% 59.3% 59.06%

It is obvious from these results (Table 8) that the clear Fresnel zone is less than 60% from the 5th km and above, where the wireless link performance will deﬁnitely be affected [27]. Therefore, the coconut trees at the place of measurement and were an obstruction in this scenario and prevent the clear line-of-site status between the transmitter and the receiver nodes. This is the reason for packet loss in the experiment.
6. Conclusions
Using LoRa as the main infrastructure for mangrove monitoring offers longer range connections, reduced costs (as the technology is free to use and the longer range of communication reduces the number of gateways required), and low power consumption, in line with the environmental goals of the mangrove monitoring project. In this paper, we demonstrated the concept of point-to-point data transfer by transmitting images over the LoRa physical layer. This transfer was achieved despite the limited bandwidth of LoRa, using a novel image encryption technique. Our demonstration highlights LoRa as an ideal technology for implementing a WSN for monitoring mangrove forests, which will aid authorities, researchers, and farmers in their efforts to restore dwindling mangrove plantations.
Author Contributions: Data Curation, A.H.J.; Formal Analysis, A.H.J.; Investigation, A.H.J.; Methodology, A.H.J.; Resources, A.H.J.; Software, A.H.J.; Visualization, A.H.J.; Writing–Original Draft, A.H.J.; Conceptualization, A.S.; Funding Acquisition, A.S.; Project Administration, A.S.; Supervision, A.S., A.I., M.F.A.R.; Validation, A.S., A.I., M.F.A.R.; Writing–Review & Editing, A.S., A.I., M.F.A.R.
Funding: This research was funded by UPM Putra Grant, grant number IPS/2017/9557100.
Acknowledgments: The authors would like to thank the technical support team comprised of Mohamad Zulkhairi Zakaria, Azizi Bin Mohd Ali, and Fathullah Hakim Md Marham, who gave a signiﬁcant help in establishing the project for conducting measurements in the target area.
Conﬂicts of Interest: The authors declare no conﬂict of interest.

Sensors 2018, 18, 3257 SSeennssoorrss 22001188,, 1188,, xx FFOORR PPEEEERR RREEVVIIEEWW
Appendix A AAppppeennddiixx AA

19 of 22 1199 ooff 2222

FFFiiiggguuurrreee AAA111... TTThhheee “““MMMAAACCC pppaaauuussseee””” cccooommmmmmaaannnddd uuussseeeddd tttooo ssstttoooppp dddaaatttaaa eeennncccrrryyyppptttiiiooonnn ooovvveeerrr ttthhheee MMMAAACCC LLLaaayyyeeerrr... FFFiiiggguuurrreee AAA222... AAArrrddduuuiiinnnooo cccooodddeee fffooorrr cccooonnnvvveeerrrtttiiinnnggg ttthhheee cccaaappptttuuurrreeeddd iiimmmaaagggeee iiinnntttooo hhheeexxxaaadddeeeccciiimmmaaalll pppaaaccckkkeeetttsss...

SSSeeennnssooorrrsss 222000111888,,, 111888,,, 3xx2FF5OO7 RR PPEEEERR RREEVVIIEEWW

20 of 22 2200 ooff 2222

FFFiiiggguuurrreee AAA333... LLLoooRRRaaa cccooommmmmmaaannnddd fffooorrr tttrrraaannnsssmmmiiissssssiiiooonnn ooofff ttthhheee hhheeexxxaaadddeeeccciiimmmaaalll pppaaaccckkkeeetttsss...

FFFiiiggguuurrreee AAA444... LLLoooRRRaaa cccooommmmmmaaannnddd ppprrreeepppaaarrriiinnnggg ttthhheee rrreeeccceeeiiivvveeerrr nnnooodddeee tttooo llliiisssttteeennn fffooorrr iiinnncccooommmiiinnnggg dddaaatttaaa...

SSeennssoorrss 2018, 18, 3x2F5O7 R PEER REVIEW

21 of 22 21 of 22

FFiigguurree AA55.. TThhee MMAATTLLAABB ccoonnttrroollss ffoorr iinniittiiaattiinngg tthhee iimmaaggee ccaappttuurree pprroocceessss aanndd rreeaasssseemmbblliinngg iimmaaggee ﬁfilleess ffrroomm ttrraannssmmiitttteedd hheexxaaddeecciimmaall ppaacckkeettss..

References

References

1. Nasri, M.; Helali, A.; Sghaier, H.; Maaref, H. Adaptive image transfer for wireless sensor networks (WSNs).

1. INnasPrrio, cMee.;dHineglaslio, fAt.h; Seg5htahieIrn, tHer.;nMataioanreafl, HCo. nAfderaepnticveeoimn aDgeestirganns&ferTfeocrhwnoirleolgeyssosfenInsotergnreattwedorSkyss(tWemSsNisn).

NInaPnoroscceaeledEinrga,sHoaf mthmea5mthetI,nTtuernnisaitaio, 2n3a–l2C5oMnfaerrcehn2c0e1o0n; pDp.es1i–g7n. & Technology of Integrated Systems in

2. CNaatntaonsci,aMle.E; Brao,aHnoam, Cm.;aRmöemt,eTr,uKni.sAian, 2E3x–p2e5riMmaerncthal2E01v0a;lupapt.io1n–7o. f the Reliability of LoRa Long-Range Low-

2. PCoawttaenr iW, Mire.;leBsosaCnoom, Cm.u; nRiöcamtieorn, .KJ.. SAenns.EAxpcteuraimtorenNteatlwE. v20a1lu7a, t6i,o7n. of the Reliability of LoRa Long-Range

3. ULonwite-PdoweNraWtioirneslessCCloimmamteunicCahtiaonng.eJ.. SeCnso.nAncetcutaetdor NMetwan. g20ro1v7,e6s, 7.|[CroMssaRlaeyfs]ia. Available online

3. hUtntpitse:d//uNnaftcicocn.isnCt/clilmimaateteC-ahcatinogne/.mCoomnennetcutemd-Mfora-ncghraonvgees/i|ctM-soalluatyisoinas. /Acovnanileacbtleedo-nmlianneg:rhotvtpess:(/a/ccuensfscecdc.oinnt2/

Acliumgautset-2a0ct1i8o)n. /momentum-for-change/ict-solutions/connected-mangroves (accessed on 2 August 2018).

44.. PPeettaajjaajjaarrvvii,, JJ..;;MMikikhhaayylolovv, K, K.; .R; oRivoaivinaeinne,nA,.;AH.;aHnnainnneinn,eTn.;, PTe.;ttPisestatlioss, aMlo.,OMn.thOencothveercaogveeorfagLePWofALNPsW: rAanNgse:

reavnaglueateivoanluaantdiocnhaannndelcahtatennnueal tiaotntemnuoadtieolnformLoodReal tfeocrhnLoolRoagyt.eIcnhnPorolocgeeyd. iInngsPorfoctheeed1i4ntghsInotfertnhaetio1n4tahl

ICnotenrfneraetniocneaolnCIoTnSfeTreelneccoemonmIuTnSicTaetlieocnosm(ImTSuTn)i,cCatoiopnesnh(IaTgSeTn),,DCeonpmenahrka,g2e–n4, DDeencemmabrker, 22–0415D; epcpe.m55b–e5r92.015;

5. pPpha. m55,–C59. .Low-cost, low-power and long-range image sensor for visual surveillance. In Proceedings of the

5. P2nhdamW,oCr.kLshoowp-coonstE, lxopwer-pieonwceesr ianndthleoDnge-sriagnngaenidmIamgeplseemnseonrtafotirovnisoufaSlmsuarrvt eOilblajencctes., INnePwroYcoeerkd,inNgYs,oUf SthAe,

23n–7dOWcotorbkesrho20p1o6n; pEpx.p3e5r–i4en0.ces in the Design and Implementation of Smart Objects, New York, NY, USA,

6. 3F–a7n,OCc.t;oDbienrg2,0Q1.6A; pnpo. v3e5l–w40i.reless visual sensor network protocol based on LoRa modulation. Int. J. Distrib.

6. SFeanns,.CN.;eDtwi.n2g0, 1Q8.,A14n. o[Cverol swsRireefle] ss visual sensor network protocol based on LoRa modulation. Int. J. Distrib.

7. SKeinrisc.hNeekt,wR. .2;0P1h8,a1m4,, dVo.-iD:1.0; .K11o7l7e/c1h5k5i0n1,4A77.;1A87l-6B5a9h80ri., M.; Paramonov, A. Transfer of Multimedia Data via

7. KLoirRicah. eInk,InRt.e;rPnhetaomf ,TVhi.n-Dgs.,; SKmoalertchSkpaince,sAa.n;dANl-eBxathGrei,neMra.t;ioPnarNametwonorokvs,aAnd. STyrsatnesmfes;rGoafliMniunlati,mOe.,dAianDdraeteav,vSia.,

LBoalRaan.dIinn,InS.t,erKnoeut cohf eTrhyianvgys,, YS.m, EardtsS.;pSapcersinagnedr:NCehxtamGe,nSewraittizoenrlNanedtw, o2r0k1s7a; nVdolSuymsteem10s;5G31a,lpinpi.n7a0, 8O–.7,2A0.ndreev,

8. SY.i,mB,aDla.n; dCihnu, nSg.,,KJ.o; uCchhoe,rYy.a; vSyon, Yg,.,HE.d; sJi.n; S, pDr.i;nKgiemr:, CS.h; aKmo,, SS.w; Sitmzeitrhla, nAd.;, R20ie1g7s;eVckoelur,mAe. 1A0n53e1x,ppepri.m7e0n8–ta7l2L0o. Ra

8. pYeimrfo, rDm.;aCnhceunevga, lJu.;aCtihoon,iYn.;trSeoenfga,rmH..;IJninP,rDoc.;eKedimin,gSs.;ofKtoh,eS2.;0S1m8 IitEhE, EAS.;eRniseogrsseAckpepr,liAca.tiAonnseSxypmerpimoseinutmal

(LSoARSa), pSeeorfuolr,mKaonrecae, 1e2v–a1lu4aMtioarnchin20t1r8e;eppfa. r1m–6. . In Proceedings of the 2018 IEEE Sensors Applications

9. SSyanmcphoeszi-uIbmor(rSaA, SR).,;SCeaonuol,, KMo.r-Dea.,S1t2a–te14oMf tharecAh r2t0i1n8;LpPp-W. 1A–6N. Solutions for Industrial IoT Services. Sensors

9. S20a1n6c,h1e6z,-I7b0o8r.r[aC, rRo.s;sCRaenf]o[,PMub.-MD.eSdt]ate of the Art in LP-WAN Solutions for Industrial IoT Services. Sensors

10. 2S0em16t,e1c6h,. 7L0o8R. a FAQs. Available online: https://docplayer.net/9473940-Lora-faqs-www-semtech-com-1-of-

10. S4-esmemtetcehc.hL-oseRmatFeAchQ-cso. rApvoarailtaibonle-loonrali-nfea:qh.htttmpsl:/(/adcoccepsslaeydeorn.n2etA/9u4g73u9s4t 02-0L1o8r)a. -faqs-www-semtech-com-1-of-

11. 4B-esrenmi,tAec.;hG-sreemggte, cWh.-cOonrptohreaUtiotinli-tlyoroaf-Cfahqi.rhptmMlo(daucclaetsisoendfoonr D2iAgiutagluSsitg2n0a1li8n)g. . IEEE Trans. Commun. 1973, 21,

11. B74e8rn–7i,5A1..;[CGrroesgsgR,eWf]. On the Utility of Chirp Modulation for Digital Signaling. IEEE Trans. Commun. 1973,

12.

2AIn1ut,eg7ru4n8set–ti7no5,f1AT. .h; iYnig, Js..;

Clausen, T.; Townsley, Sensors 2016, 16, 1466.

W. A Study [CrossRef]

of

LoRa:

Long

Range

&

Low

Power

Networks

for

the

Sensors 2018, 18, 3257

22 of 22

13. Atanasovski, V.; Leon-Garcia, A. Future Access Enablers for Ubiquitous and Intelligent Infrastructures; Springer: Cham, Switzerland, 2015.
14. Elkhodr, M.; Shahrestani, S.; Cheung, H. Emerging Wireless Technologies in the Internet of Things: A Comparative Study. Int. J. Wirel. Mob. Netw. 2016, 8, 67–82. [CrossRef]
15. Bor, M.; Roedig, U. LoRa Transmission Parameter Selection. In Proceedings of the 13th International Conference on Distributed Computing in Sensor Systems (DCOSS), Ottawa, ON, Canada, 5–7 June 2017; pp. 27–34.
16. Ochoa, M.N.; Guizar, A.; Maman, M.; Duda, A. Evaluating LoRa energy efﬁciency for adaptive networks: From star to mesh topologies. In Proceedings of the IEEE 13th International Conference on Wireless and Mobile Computing, Networking and Communications (WiMob), Rome, Italy, 9–11 October 2017.
17. Sinha, R.S.; Wei, Y.; Hwang, S.-H. A survey on LPWA technology: LoRa and NB-IoT. ICT Express 2017, 3, 14–21. [CrossRef]
18. Knyazev, N.S.; Chechetkin, V.A.; Letavin, D.A. Comparative analysis of standards for Low-power Wide-area Network. In Proceedings of the 2017 Systems of Signal Synchronization, Generating and Processing in Telecommunications (SINKHROINFO), Kazan, Russia, 3–4 July 2017; pp. 1–4.
19. IEEE Computer Society; LAN/MAN Standards Committee; Institute of Electrical and Electronics Engineers; IEEE-SA Standards Board. IEEE Standard for Local and Metropolitan Area Networks. Part 15.4, Amendment 3, Part 15.4, Amendment 3; Institute of Electrical and Electronics Engineers: New York, NY, USA, 2012.
20. Orfanidis, C.; Feeney, L.M.; Jacobsson, M.; Gunningberg, P. Investigating interference between LoRa and IEEE 802.15.4g networks. In Proceedings of the IEEE 13th International Conference on Wireless and Mobile Computing, Networking and Communications (WiMob), Rome, Italy, 9–11 October 2017.
21. Vejlgaard, B.; Lauridsen, M.; Nguyen, H.; Kovacs, I.Z.; Mogensen, P.; Sorensen, M. Interference Impact on Coverage and Capacity for Low Power Wide Area IoT Networks. In Proceedings of the 2017 IEEE Wireless Communications and Networking Conference (WCNC), San Francisco, CA, USA, 19–22 March 2017.
22. Pham, C. Building Low-Cost Gateways and Devices for Open LoRa IoT Test-Beds. In Proceedings of the International Conference on Testbeds and Research Infrastructures, Hangzhou, China, 14–15 June 2016; pp. 70–80.
23. Parrish, K. Arduino vs. Raspberry Pi. Available online: https://www.digitaltrends.com/computing/ arduino-vs-raspberry-pi/ (accessed on 2 August 2018).
24. Al-Najjar, Y.A.Y.; Soong, D.C. Comparison of Image Quality Assessment: PSNR, HVS, SSIM, UIQI. Int. J. Sci. Eng. Res. 2012, 3, 8.
25. Sherwin, T.; Easte, M.; Chen, A.; Wang, K.; Dai, W. A Single RF Emitter-Based Indoor Navigation Method for Autonomous Service Robots. Sensors 2018, 18, 585. [CrossRef] [PubMed]
26. Lima, E.B.C.; Sousa, C.N.S.; Meneses, L.N.; Ximenes, N.C.; Júnior, S.; Vasconcelos, G.S.; Lima, N.B.C.; Patrocínio, M.C.A.; Macedo, D.; Vasconcelos, S.M.M. Cocos nucifera (L.) (Arecaceae): A phytochemical and pharmacological review. Braz. J. Med. Biol. Res. 2015, 48, 953–964. [CrossRef] [PubMed]
27. Coleman, D.D.; Westcott, D.A. CWNA Certiﬁed Wireless Network Administrator Ofﬁcial Study Guide Exam PW0-104; John Wiley & Sons: New York, NY, USA, 2009.
© 2018 by the authors. Licensee MDPI, Basel, Switzerland. This article is an open access article distributed under the terms and conditions of the Creative Commons Attribution (CC BY) license (http://creativecommons.org/licenses/by/4.0/).

