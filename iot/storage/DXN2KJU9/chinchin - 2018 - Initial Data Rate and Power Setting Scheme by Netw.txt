Attribution-Noncommercial-No Derivative Works 2.0 Republic of Korea
Users are free only if the following conditions below,
l Replicate this work, distribute, transmit, display, Performances and can be broadcast.
Under the following conditions:
Attribution. You must indicate the author,.
Non-profit. You may not use this work for commercial purposes.
Prohibit changes. You adapt this work, Can not be modified or processed.
l You, For any reuse or distribution of this copyrighted work, License terms of this work For it must make clear to others.
l These conditions receive the permission from the copyright holder can not be applied.
User rights under copyright law are not affected by the above. this is License Code ( Legal Code) To understand is easily summarized. Disclaimer

Engineering Thesis
LoRaWAN In an environment transmission rate according to the network server, and
The initial transmit power allocation scheme Initial Data Rate and Power Setting Scheme
by Network Server in LoRaWAN
2018 year 8 month
Seoul National University
Computer Science
The School wins

LoRaWAN In an environment transmission rate according to the network server, and
The initial transmit power allocation scheme Initial Data Rate and Power Setting Scheme
by Network Server in LoRaWAN
Professor Tel Ladies

Must submit the thesis Master Thesis Engineering
2018 year 4 month
Seoul National University The School wins and Computer Engineering

Also it approved the MSc thesis yiseunghak

2018 year 6 month

Basis for
Vice-Chairman Committee Members

(sign) (sign) (sign)

green
It has been steadily increasing interest in the Internet of Things is expected to grow at a future Internet of Things San-up rapidly. However, the application of the Internet of Things Kane Orientation is roneun communication technologies such as existing cellular or WiFi communications can not meet the diverse needs of the Internet of Things applications because of the variety.
LPWA (Low Power Wide Area) network had to meet the terminal device are low power, by enabling the communication with long-range communication technology include conventional requirements of Internet applications difficult thing to meet in the network. LoRaWAN is one of the leading technology LPWAN.
In this paper, in order to solve the problem that the battery consumption of the terminal node, due to the increase in collision increases in LoRaWAN environment between the packet transfer and the perspective problem (near far problem). For this, by appropriately adjusting the transmit power of the terminal node in the network server, it was aimed at solving perspective problems. In addition, and it aims to reduce the power consumption of the terminal node to the spreading factor (spreading factor) and the collision probability that the terminal apparatus can cause liver properly allocated also as a packet.
In this paper we define the concept of the traffic load (traffic load) the transmission period, in view of that the transport packet size is different for each point and the application that the application is varied in real LoRaWAN environment. Traffic load was defined to reflect that it is loaded (load) to the network per unit for each different application. Traffic load of the leaf nodes is defined as the packet transmission period and the product of the ToA (Time on Air) are applications having, ToA is determined by the spreading factor, and the packet size, the bandwidth used by a terminal node. The network server of the leaf nodes by allocating a low spreading factor, i.e., high transmission rate to the terminal node having a high traffic load can not only reduce the probability of collision between transmission packet by allocating a spreading factor to a terminal node, based on traffic load the power consumption was trying to reduce. In addition, the network server with each other RSSI of a packet by a terminal node is sent by the gateway to solve the interference problem, perspective problems that may occur only between the end node that uses a different spreading factor ((Received Signal
-i-

Strength Indication) such that the value is equal as possible and adjusted the transmission power of the terminal node. When using the proposed method in this paper it was confirmed by simulation to adjust the transmission power and
spreading factor of a terminal node in the environment LoRaWAN decrease the power consumption of the collision probability, the leaf nodes as compared to previous studies. Key words: the traffic load, the spreading factor allocation scheme, transmit power allocation scheme Student ID: 2016-21223
- ii -

Contents
1. Introduction ··············································· ······························ One
2. LoRa performance issues and related research ··························· 4 2.1 LoRa seongnung issues ·············································· ················ 4
Wasteful power consumption of the terminal nodes caused by 2.1.1 crashes ·············· 4 2.1.2 perspective issues between nodes with different SF ······················· 4
2.2 ADR research ·············································· ··············· 6
2.2.1. Link-based ADR ··············································· ··············· 7 2.2.2 Network aware ADR ············································ ...... 9 2.3 motive (motivation) techniques ························· suggesting 12
3. The spreading factor and transmission power allocation scheme ···················· 16
3.1 System Model ··············································· ····················· 16
3.2 manner operation of the proposed scheme ······································· 17 3.2.1 SF allocation scheme ············································ ····················· 18 3.2.2 transmit power allocation scheme ··········································· ········· 22
4. Simulation results ············································· ········· 26
4.1 Experimental environment ··············································· ························· 26
4.2 Results and Analysis ············································· ··········· 27
5. Conclusion ··············································· ···························· 35
references ················································ ························ 36 Abstract ························ ················································ 38
- iii -

Table of Contents
[Table 1] SNR demodulation reference value by SF ········································ ·· 8 [Table 2] example LoRaWAN an application ····················· 12 [Table 3] transmission period and a packet size of the two applications .... ... 13 [Table 4] ····················· the variables used in the propagation path loss model 16 Table 5 the gateway according to the SF in the bandwidth 125 kHz
Reception ················································ ·························· 19 Table 6 the CCR values ​used in this paper, ············ ··························· 23 of the application used in Table 7 experiment environment
The type and proportion ··············································· ······················· 26 Table 8 ······· variables for calculating the power consumption of the terminal node 27. [Table 9] power consumption according to the state of the terminal node 27 ·························
Figure CONTENTS
[Figure 1] The basic structure of the network LoRa ····························· 2 [Figure 2] interference with other SF Problems in Perspective 5 ······························· consumption according to Figure 3 by application of different SF allocation
Power compared ················································ ···················· 14 Figure 4. system model of the proposed scheme .......................................... ·············· 17 [Figure 5] proposed by the traffic load in the SF agreement algorithms
Change process ················································ ····················· 21 [Figure 6] proposed SF allocation method of pseudo-code that ················ 21 .... Figure 7 suggest transport doctor of the power allocation scheme code ····· 25 [Figure 8] packet transmission success rate corresponding to the number of terminal nodes ··········· 28 [ Figure 9 a corresponding to the number of the leaf node a terminal node per average
Power consumption ················································ ······················· 28
- iv -

Figure 1 0] A terminal node corresponding to the number of terminal nodes per average power consumption ( B recht compared with the technique) ············································· ········ 29, Figure 11,
when used to offer a transmit power allocation scheme RSSI by SF results ·············································· ········ 32 [Figure 12] SF-specific
when used suggested transmit power allocation scheme Transmission power allocation result ·············································· 32. [Fig. 13] of a
packet transmission success rate of the terminal node by SF
Step index ················································ ···················· 34
-v-

1. INTRODUCTION
Internet of Things (IoT: Interest in the Internet of Things) has been steadily increasing. For example, the growth of the Internet of things industry side The study, which also Progress Being It was It is place,
Follow [1] If future Number Ten years That the Internet of Things will grow rapidly in the examples. Since the application of such things as Internet, various communication technologies, such as traditional cellular communication, or WiFi can not meet the different requirements of Internet applications things.
LPWA network had to meet the terminal device are low power, by enabling the communication over long distances to meet include conventional communication technologies difficult wotdeon needs of Internet application objects in the network. SI has LPWA G F OX, IN GE N U, T E L E NSA, N B- A variety of techniques, including IoT, LoRaWAN John ashes do. Among the SI LoRaWAN G F OX And it is month Lee Standards Au in Protocol By public users Contact Only has the advantage of being easy to muscle ah am, LoRa network users for their needs fit to just Because of the advantage to be representative of the various technical skills LPWAN Kkophin
All. LoRa of the Long range about As a control, long distance wireless A communication system. LoRa network
<Figure 1> Castle consisting of the leaf node and the gateway, and a network server, such as Type topology Lodge (star topolog y) Follow. The network server 3 G Or more Leaf nodes are connected to the net, such as a gateway (end device) should transmit a packet using a modulation technique LoRa. The gateway to the terminal node part foundation Receive All the packets to the network server month The one that serves.
LoRa is Beam Through two series layer Of the beauty doing place, The one is concubine Diffusion's peck Bit rum
(CSS: Chirp spread spectr u A physical system based on m) modulation techniques layer (Ph y sical la y Of the er) beauty And two th Roneun as LoRaWAN fire Lee Media contact Muscle control system Layer (M AC la y er: media access control la y Of the er) beauty And [2]. LoRaWAN is Media contact By providing the control muscle Many By the terminal nodes using the LoRa modulation technique makes it possible to communicate with the gateway.
- One -

< Figure 1> The basic structure of the network LoRa

LoRa physical system layer Ahead Explanation Did Seems this, concubine Diffusion's peck Bit rum Using a modulation

technique that is based on the modulation place, This enables the gods for long-distance communication, low power barrel. At

this time, concubine( chirp) is What When that time south To which is increased or decreased in accordance with ore Band

frequency modulation information prefecture New Wave number to be.

In LoRa spreading factor (SF: spreading factor) to a Sim ball( s y Inco per mbol) Ding That which defines

the number of bits place, A Sim ball( s y mbol) is • •• doggy

concubine It consists of a. SF is Sim ball Duration (s y mbol d u ration), place Transmission rate of the data, and the

resistance to noise interference ( The resistance) spirit incense Give. core ball The relationship between duration and SF

is Well And the like.

••

•

••

•

•

• • • • • •• ••

(One)

In the formula (1) T s The seam ball The duration of B andwidth is the bandwidth beauty do. In the formula (1) ball You can Seems

Whenever increase one SF when the bandwidth is fixed Sim ball The duration is 2 times By It increases. this is more The

increased use of high-SF Sim ball Due to the duration of the packet (packet) the probability of collisions can be added

increased inter Well Of the beauty do. only just not Beam The use of high-SF if Battery life because the packet

transmission time from the terminal node increases The amount Also it increases. One side, core ball Because of the

increase in duration Pointing visible increased resistance to interference and noise is a terminal node more High-SF Selection

And if Gateway

-2-

(Gatewa y) in Beam All distant It has the advantage of being able to communicate at a distance. In addition, the different between SF Straight D & C (orthogonalit y) Owing to the gateway this standing of the packets sent using different SF channel in copper At Received And that more Even successful D nose Ding ( The decoding) is possible.
Consequently, appropriately SF Selection It is reflected in the probability of collisions between packets, and a power consumption of only the end nodes incense The leaf nodes, as it can control Leave The SF
Selection Whether it is an important issue. In LoRaWAN to provide (Adaptive data rate) ADR place This enables the network server to be allocated may be a proper SF to a terminal node.
In LoRa not only important to properly allocate the SF, it is important to properly allocate transmit power of the terminal node. It is possible if Terminal nodes are available Choi To adjust the power consumption, which is assigned a predetermined transmission power
about doing To oil Lehigh I suppose G just, Considering the sensitivity of the receiving gateway Hey And, in consideration of a fact that the perspective problem may occur by properly adjusting the transmission power of the terminal node Hey do.
In this paper, the application used by a terminal node Special Gender fit It was aimed to propose a method, which assigns the SF to reduce the collision rate between the power consumption and the terminal nodes are transmitting packets of the terminal node. In addition, the perspective problem by properly adjusting the transmission power of the terminal node Wan As well as to screen it aimed at reducing the power consumption of the terminal node.
This paper is Well And it is configured as shown. Chapter 2 of the LoRa Shu With a solution thereof To be For the ADR can Look see. And you know about the ADR is associated with previous research Beam And, in the proposed scheme copper For groups Explanation do. In Section 3, the system model and the proposed scheme Explanation And the performance of the proposed scheme through simulation Chapter 4 analysis do. Marge membrane This results in a non-contact 5 theory of Bear Neunda.
-3-

2. LoRa performance issues and related research
This chapter is associated with the performance of the system LoRa Shu Wow Status Watch out. And what about the existing research associated with Adaptive data rate used in the proposed method, Look see.
2.1 LoRa performance issues
Wasteful power consumption of the terminal nodes caused by 2.1.1 crashes In LoRaWAN terminal nodes ball Medium oil on Contact Before Root distant that media
Ensure that the multi-use, Contact The way in CS M A (Carrier Sense
Mu Not use ltiple Access) scheme Do And p u re AL O HA and non Seut In one manner place And it transmits the data. Therefore, light can increase the number of terminal nodes in the network LoRa Wu, Probability of collision between the terminal nodes to transmit a packet class case Hi increases, and thus the packet ashes send Of times The increases. This network side The links part Increased to, and a terminal node side The power consumption increases in the number of the battery terminal node persons Two shaft do. Battery long Number persons of Phil It is important to reduce the power consumption in the terminal tract LoRa node because due to collision ashes send Of times To reduce the number Phil need. This is achieved by evenly allocating the SF to the MS deudeul furnace.
2.1.2 perspective issues between nodes with different SF The gateway Nearest The leaf nodes and Mulberry When the re-leaf nodes in Assume that the two leaf node
transmits a packet using the same transmission power. At this time, the gateway Beam It is Places nearest RSSI of packets transmitted on the month Such as Hebrews Greater circa Right The gateway part foundation faraway A packet sent from the terminal node in which is not recognized by the gateway nail It is likely to be. These issues Perspective
-4-

It referred to the problem. In LoRa network that supports a long-distance communication gateway which part foundation Mulberry Lee Pleasure uh camp The terminal node sends a packet of the propagation path loss Many this Suffer It is likely to cause problems because the perspective. In addition, the prior Look This will like LoRa network Castle Type topology Lodge brother Since following the state which the gateway part foundation faraway on Pleasure uh camp Terminal nodes and gateway 1 hop( The communication with hop). However, Moire A hard and an increase in the number of terminal nodes in the network LoRa Right The gateway faraway Terminal nodes are located in the perspective problem Suffer The possibility of a more Higher camp All.
This problem only occurs perspective between the terminal nodes that use the same SF just Not occur even between the leaf nodes that use different SF. This in Chapter 1 frozen urgent bar SF is as different from each other and more Any Wan Preached Straight D & C (perfect
Rather than having the orthogonal), U four Straight D & C (pse u Because to have a do orthogonal). Thus, the packet terminal nodes transfer copper Worked channel When you send a packet to each other in the SF RSSI in non-gateway Seut And if Transfer packets to be recognized in both gateway just, That
Reot G Do If the Right In a packet just It is recognized. <Figure 2> a solution for this by Explanation And each other occurs due to interference between a packet transmitted to another SF are perspective solve the problem through transmit power control To be You can Well of Beam Indah.
< Figure 2> Perspective problems with interference between different SF
-5-

< Figure 2> CCR 7,8 It is aware of a packet sent from the terminal node for the packet sent from the terminal nodes using the SF7 SF8 using To be So that the door can chin Is a value (threshold). <Figure 2> Like E nd device B It is a terminal node, using the SF 8, E nd device A is a terminal node using SF7 place, RSSI B - RSSI A < CCR 7,8 of just Suffice light Right A packet is successfully recognized in the transmission from terminal node A To be Can. <Figure 2> in the terminal node and a terminal node A B And that is the same as transmit power transmitting packets more Any terminal node A to the gateway part foundation Mulberry Since RSSI A The RSSI B Beam All production You can see that. Thus, RSSI B - RSSI A> CCR 7,8 It is is a packet transmission failure sent from terminal node A. The gateway part The distance between the emitter terminal node Mulberry uh quality The probability of each of these muscle problems won for the packet is sent to another SF more It is increased.
One side, A non-terminal node and Seut Terminal node C in the one position is a terminal node A
Beam The 3d B m is transmitted at a higher transmit power place, RSSI B - RSSI C < CCR 7,8 Is one that can be a packet is successfully received and sent by the terminal node C ball Can. This perspective problem can be seen the available solved by adjusting the transmission power of the terminal node It was And, in this paper, bracket By controlling the transmission power of the terminal node, we propose a transmit power allocation scheme for solving this problem perspective.
2.2 ADR-related research
previously Look example bar Such as, as appropriate, and the transmission power SF Selection It is reflected in the probability of collision between packets, and the power consumption of the terminal node incense La line in the perspective not only the spirit Troubleshooting incense The leaf nodes, as it can control Leave SF and the power transmission Selection Whether it is an important issue. Through ADR provided by the LoRaWAN to determine the SF, the transmission power of the terminal node place, The ADR standing in this paper to link-based ADR (link based ADR) and network aware ADR or fistula uh Explanation do. In this chapter, based on previous studies associated with the link and network aware ADR ADR Look see.
-6-

2.2.1 Link-based ADR

From the gateway to the terminal node part foundation Receive Is referred to in the present that is based on the RSSI or SNR of the packets, the network server determines the SF and the transmission power of the terminal node paper-based link ADR part Reunda. Associated with previous studies [5] [11] with the place, Among ago three Hierarchical network server to obtain a stable LoRa shaft That being the goal, the public network CommuniGate You tea TTN is about the development of ADR in one (The Things Network) Beam It wants. TTN ADR algorithm is being used as a comparison target in this paper It was High, and Well And as

action do.
1. The terminal node is the one-bit ADR doxy Appointed on incense By sending a link to it it was successfully received at the gateway if, The network server to the terminal node, based on the case part A (Signal to Noise Ratio) SNR values ​of the emitter received packet 2 0 dog How Not recorded Dull All.

2. Record 2 0 One of the SNR Choi For the SNR values Find Neunda. 3. demodulation reference SNR value (SNR demod u Seek lation threshold). This value is in accordance with the SF of the transmission packet month Lodges are To < Table 1> a Oh yeah Calculated over joha.

4. SNR Do camp( Calculate the SNR margin).

5. obtained in the process 4 SNR Do camp Control the transmission power over the SF or Tteot to

Change Determining whether the reference value is the step value (step) Well And calculated as.

steps = floor (SNR margin / 3)

(2)

6. Step By the 0 Beam The large terminal node Now Using the SF to 7 Over If the Wu, The phase value 0 this

To be time How It reduces paper SF. E.g, Now However the end of the SF 9 the node a, and as a result of

the step value calculated from the process 53 if The network server the step SF value of the leaf node as

much as

day Dancin ' give. At this time, the phase value is 3, since the SF of the leaf node is a terminal node 9 SF7 How How low Exodus

May, south The step value is 1. south The step value 0 this To be time How The transmit power of the terminal support

node 3d B m By day sinker It is place

It is used.

-7-

< Table 1> SF-dependent SNR demodulation reference value, [14]

SF
7 8 9 One 0 11 12

SNR [dB] - 7.5
- One 0.0
- 12.5 - 15. 0 - 17.5 - 2 0.0

if The phase value 0 Beam All production All if That land over to reduce the transmission power or SF meaning ego Five This step the transmission power of the terminal node Rather value 0 this To be time How 3d paper B m Come by Consider Hey do. The transmission power is 14d B m How G Increase
Can.

All Well The SNR of the process of assigning the SF to the terminal node in TTN town camp For example, the process to obtain the Explanation One will.
The network server is a terminal node to the first bit ADR setting One rear Prize incense Transfer to link 2 0th The SF packet Oh yeah And to the demodulation reference SNR value Find Neunda. if 2 0th And that SF has sent 12 packets If, < Table 1> SNR demodulation reference value by - 2 0 d B It becomes. Obtained in process 2 Choi SNR value for the ma x A demodulation reference SNR value obtained from the SNR, the process 3 SNR demod u When called lation SNR Do camp It is a calculated expression Well And the like. SNR margin = ma x SNR - SNR demod u lation - device margin

... 3
In the above formula (3) device is a margin to the leaf nodes SF fire Art to be stable to prefecture Phase (assigned a high SF rear To repeat the process of re-assigning a lower SF prefecture Phase) to membrane In order to doxy A specified value, Beam 1 bottle 0 to doxy Is specified.
Obtained through the above process SNR Do camp Through the network server may adjust the transmit power of the transmitting node or SF.
If you want to apply the algorithm of the ADR TTN Wu, The network server is a terminal node at the location To send That can Choi Small SF, Choi A small transmission power to the terminal node
-8-

Assignment allows. Therefore, when the number of terminal nodes in the network LoRa enemy has the advantage that the terminal nodes to communicate with low power. However, TTN algorithm conflict between leaf nodes are not considered It was The number of terminal nodes in the network, because LoRa Many Ah quality circa Wu, The inter-packet collision probability increases.
LoRaWAN SP E Follow the C [3] if, SF is a terminal node and transmission power to a network server part Emitter allocation Receive silver rear On incense The link transmission schedule doors chin value How If not fail to open sokhaeseo Wu, Leaf node chairs sieve Write the transmit power to 14d B m, so that as the SF 12 Change All. Therefore, to a terminal node in the network LoRa Many Ah quality circa Wu, To increase the probability of collision between transmitted packets When that time south 14d in the transmission power in accordance with B The number of terminal nodes using m, a 12-SF Many Ah quality Very likely.
2.2.2 Network aware ADR
Network aware ADR is the ADR assigned give the SF and the transmission power to the terminal node in consideration of the conflict, perspective problems between the terminal nodes on the network server. A related study [12 - There are 13]. distant that, EX Based on the RSSI of the leaf nodes as shown in PLoRa [12] The SF allocated to the terminal node
rear ToA of the packets sent by SF gun SF is equal to the sum so by SF
ashes To allocate zoom As to the ToA fairness to the target by SF. LoRa four application types within a network is one day when all All The average transmission interval, a packet of leaf nodes way SF equal to that of the paper, the same goals, because teeth minute The issue must not be on the ship. However, in the third network LoRa 0 seconds 1 Every And the application to send, and sack 1 Every There are applications to transfer apps if, These two applications are reflected in the per unit network incense Note the load is a prefecture Thoroughly different. In fact, a variety of applications in the network LoRa John ashes And the Reot If an application makes a variety of Right Of a packet ToA just Based on the SF to ashes Assigned to the fairness of each SF ToA month The air to St.
Hunting All. In this paper, the proposed ADR in [13] as compared to the target doxy It was determined.
-9-

[13] the fairness of packet collision probability between the terminal nodes in the transmission network to the target LoRa bracket Of the SF to be assigned to the leaf nodes Choi The enemy was calculated ratio. In addition, the interference between packets that are sent to the leaf nodes use different SF Choi The transmit power was adjusted to digest. The process is Well And the like.

1) SF allocation scheme
[13] In a terminal node LoRa p u re AL O Is sent to the HA decided that the way is the probability of collision between packets by SF Well And it was calculated as.

p coll, S = One - • • • • •

(4)

In the formula (4) G S SF is S Leaf node transmits a single packet, which is to use the copper The not occur, SF S Of the packet

transmitted to the gun The amount of the beauty do. [13] In the fairness of the collision probability between packets transmitted to

a terminal node are month The standing probability of collision between packets to be transmitted to the same sex to SF Choi The

daegap Choi Digested Hey

That plate By the end Well Expression was calculated as.

5

SF S The percentage of the leaf nodes that use the p s When called in [13] The formula (5)

••

• The

p s = 1 of the about article key Under the pool Come to be assigned to the leaf nodes Choi

•• •

SF ratio was calculated enemy. Leaf node having the least propagation path loss Net To lead the Choi Assign SF according to

the enemy's ratio Receive Neunda.

2) transmit power allocation scheme [13] In has the highest propagation path loss highest packet Five Flow rate terminal node for transferring the packet to the leaf node SF8 having the (packet error rate) being The tube DISCUSSION did. Thus, the terminal node for transferring the packet to SF8 as a reference coming adjusted the transmission power of the other leaf nodes. second Group transmitting power 14d B By m doxy The tablet was the transmit power allocation scheme, the process Well And the like.

a. To reduce interference between the leaf nodes that use different SF ratio Seut A terminal node that has a propagation path loss channel By me Nueot All. b. Each channel That one of the leaf nodes that use the Group Called to if, That Group

- One 0 -

Terminal nodes by having a low propagation path loss depending on the SF allocation ratio calculated in the process of 1) part Emitter allows assignment. c. Of the leaf node having the most SF8 large Only the end nodes of the propagation path loss as the reference node, a reference node, Choi Transmission power of 14d B It makes it assigns the m. And, as channel To terminal node 2d having the least propagation path loss of the terminal nodes using the B M gave to the art rear The leaf node that Group In the outside city Kin All. The leaf node SF7, transmission power 2d B Assign m Receive And existing channel The more SF over the transmission power control Receive G Do Neunda.

d. The like reference node obtained in step c Group Leaf node having the least propagation path loss from i The propagation path loss PL i The called and the transmission power P i Let. A propagation path loss of a reference node PL c, The transmission power P c One called rear The packets are sent only end node, a reference node i Whether it is aware of a transmitted packet Well The expansion caused by the way.

P i - PL i < P c - PL c + CCR (SF8, SF7)

6

The above equation just Suffice light Right The terminal node is the reference node, a packet transmission i This

will be aware of a transport packet. if The formula (6) just Foot drop support Do If the Wu, Network Server is for

transmit power allocation Well In a way Over Go fish, just Jokhaji Do If the Right In step 2 and repeats the

processes of a, b, c again.

e. this time In the terminal node having a terminal node, the least propagation path loss of a reference node having a SF7 1, it establishes a leaf node having the least propagation path loss of the terminal node to the reference node 2 having SF8.

Transmission power allocation is a terminal node having an SF12 part Foundation upon production The SF11, SF1 0, SF9. SF8, the terminal node having a SF7 Net To each other to adjust the transmit power of the terminal node. At this time, let the subject you want to adjust the transmission power as the target node. Process and d U Reference node 1 is the target node is a packet transmission is recognized for transmitting a packet to a similar manner to adjust the transmit power of the target node. SF12, SF11, SF1 0, SF9, SF8 to

- 11 -

< Table 2> For an application using LoRaWAN

Application Scenario Message interval

Roadwa y Signs

30s

Traffic sensors

60s

E lderl y sensors

60s

Ho u se appliances

1 da y

Credit machine

3 0 min

Home sec u rit y

One 0 min

Smart meters

2.5 ho u rs

Message size (byte)
One One
127 8 24 20
2 0 17

A terminal node having the above copper To be the first reference node is the destination node has a packet transmission is recognized for the transport packet controls the transmission power of the target node.
f. When haejugo adjust the transmit power of the terminal node having a terminal node having an SF7 SF7 are to be the target node, place, Compared to the reference node based sanhan 2 in step e to adjust the transmit power of the target node. Such that the target node sends the packet based on the node 2 is recognized for transmitting a packet to adjust the transmit power of the target node.

2.4 motivation for the proposed scheme (motivation)
Existing ADR tube Lotuses Paper, on the assumption that the application type is one in LoRaWAN was assigned the SF to a terminal node. However, in the actual LoRaWAN a wide variety of applications, such as the <Table 2> zone ashes Is a [15]. In this paper, a variety of applications Special It proposed the SF allocation scheme considering the castle.
< Table 2> SF, such as applications in place And that transfer data more Even sending Tome Messages way The ToA a different way, and like the ToA more Any place Road to the network per unit, depending on the data transmission period is different. For example, Roadwa in <Table 2> y Signs and Traffic Applications

- 12 -

< Table 3> Transmission period and a packet size of the two applications

Application

Message interval

Message size

App 1

1 min

1 b y te

App 2

3 0 min

1 b y te

Such as SF, the same two sensors applications Au Lee Amble The size sinker Gajeok the

M AC Command Without using a 125kHz bandwidth place When they send the same data is ToA of the two

applications. However, Roadwa y Signs of the time copper Traffic sensors should Beam All about Twice More this

place Because the network to transmit data beauty Value loaded is Roadwa y Signs the Traffic sensors Beam All about

Twice Many It can be said. In this paper, we define the concept of traffic load in order to reflect the different loads to the
network by applications. Road traffic is Well And it is defined as.

Terminal node i Of the average packet transmission period T i When said terminal node i The arrival rate of the packets

(packet arrival rate) is Well And the like.

•

λi= • ••

7

Terminal node i SF and the sending Beam A packet that way This each •• •• • • When said terminal node i end Beam Time

on Air (ToA) of the packet that is •• • Wow • • It depends on. At this time, the leaf nodes i Road traffic is Well It is

defined as follows.

Traffic load of end device i ( TL i) = • • × ToA (SF i, L i)

(8)

All Well For light that leases the SF to the terminal node in consideration of the application-specific traffic load over Right

uh Tteon effect And that the power consumption of a terminal node

side in Look see. Application 1 (App1) and Application 2 (App2) has

< Table 3> and a transmission period of, Tome A message size place By sending the data uses a 125kHz bandwidth place And

it transmits the data. In addition, all the leaf nodes using both applications, such a transmission power 14d B And

transmits the m. At this time, Tome Message Size outside In the spirit ToA incense A packet that Au Lee Amble size, M AC Command

code Screen ratio, etc. are assumed to be equal the App1 and App2. Therefore, the App1 and App2 If you use the same

SF Right Traffic load in accordance with equation (8) because the same ToA of a packet that is transmitted is in the App1

App2 about 3 0 A ship.

SF7 to the terminal node 1 using App1 In case 1, using App2

- 13 -

If one is assigned to the SF7 to SF12 to SF12 for the leaf node 2, the case 2 is the terminal node 1 using App1, to the terminal node 1 using the App2 Right to be. Two terminal nodes without collision place When that transfer data about 1 hour rear
A case-specific power consumption at the terminal node The amount It is shown in <Figure 3>.
< Figure 3> Power consumption compared according to the application-specific different SF allocated previously Explanation Did Seems This, App1 and App2 traffic load, such as when you use the SF compared to the 3 App1 App2 0 Times can be high place, If an SF7 allocated to the terminal nodes using the App1 is has a high traffic load Right Related to less exhausted power of the terminal node DISCUSSION can do. half if, If one assigns a leaf node to SF12 using the App1 Right The power consumption of a terminal node Kerr Related to that DISCUSSION can do. This is ToA every time you increase the Tier 1 SF about Twice By At the time when the power transmitted to the transmission of the door to increase you Not consume about 2. When the door is to increase the ship.
previously Look This will like If you suffered an SF considering the traffic load of the application Right It is possible to reduce the power consumption of the terminal node. However, in this paper, and the comparison target [13] The diameter of the paper Right Not take into account the traffic load Do High-SF Choi Enemy rate just It had to have a terminal node is assigned to SF. Thus, a high traffic load camp To terminal node Beam You can allocate the lower SF Well To fire phrase
- 14 -

And assigns a higher SF if In the terminal node Beam All Many This is the power consumption To be Can. The terminal device having a high traffic load in this paper have to assign a low SF can be zoom As it will be tabulated neck to reduce the power consumption of the terminal node.
In the SF allocation method proposed in this paper, bracket By assigning an SF, based on the traffic load of the leaf nodes agree bacteria of traffic load by the leaf nodes having that SF brother of Align All. this Reot Shop by Special Information that the SF increases the collision probability of the assigned leaf node Wan Chemistry and, bracket For each leaf node to SF channel The aims to be used evenly.
- 15 -

3. The spreading factor and transmission power allocation scheme
3.1 System Model

Proposed the spreading factor, and power allocation scheme in LoRaWAN cells configured in a variety of applications coming LoRa bracket Consume less power as possible that a terminal node, and to transmit. <Figure 4> is a system model of the proposed scheme Beam It gives over. The system of the proposed scheme is Well And it is configured as shown. Radius
R ( Focusing on one of the gateways m) N Of the leaf nodes are uniformly
minute The cell is a mountain in the LoRaWAN sack uh camp All. Leaf nodes in the LoRaWAN cells is a 125kHz bandwidth camp One channel Communication will be (although, for the receive window 2 through channel It will have the same bandwidth camp Other channel Uses.) Terminal nodes are the same for each application using Tenerife This de (pa y load) size, a period of transmission Tome And it transmits the message. In the packet to be transmitted terminal node Tenerife Therefore the de claim outside One Au Lee Amble ( preamble), sign Values, such as screen rate (coding rate) was assumed to be equal. mother All Terminal nodes

u nconfirmed u p Tome A message place And it transmits the data. Leaf node 7 part From 12 How If the SF, and the transmission power 2d B m, 5d B m, 8d B m, 11d B m, 14d B m of each One Selection So place And it transmits the data. Propagation path loss (path loss) of the model between the gateway and the terminal node is Well Logs, such as - D Scotland Turn 'S (log-distance) was used as the model T outside Area (s u b- u Was assumed to rban) environment [7].

•

•

• • •• • • • • •• • • • • • •• • • • • •

•

•

•

9

•

•

< Table 4> The variables used in the propagation path-loss model

variable
• • • •• •
• n
• •

Explanation The distance d 0 The average loss for the propagation path Propagation path loss exponent (path loss e x ponent) The average 0, Standard Deviation end • It is having a Right draft Distribution Random Variables

- 16 -

< Figure 4> System model of the proposed scheme
Proposed model information such as a network server, the propagation path loss between the terminal node of SF, the transmission power, traffic load, the terminal node and a gateway Beam Using bracket It helps determine the SF, the transmission power of the terminal node. The network server is a gateway bracket With a terminal node part foundation Receive The RSSI information Beam The former Month receive Neunda. Another network server as a gateway part The emitter terminal node From All packets Month receive It is place, This, as well as to know the packet size of the leaf node transmission power, through SF it can also be seen. And the network server over the transmission power of the RSSI and a terminal node bracket It can calculate the propagation path loss between the UE and the Gateway node. In addition, the network server is the gateway is a terminal node part Between the emitter receives packets one hour case Through bracket Can know the transmission period of the terminal node, through which bracket You can calculate the traffic load on the terminal node.
3.2 Action of the proposed method
The proposed scheme significantly me to SF allocation scheme and power allocation scheme Nwin All.
- 17 -

The network server calculates a suitable SF and the transmission power to the terminal nodes through SF allocation scheme and transmission power allocation scheme rear And the incense Via a link (downlink) bracket To a terminal node of the SF and the transmission power Choi It assigns a longitudinal.
3.2.1 SF allocation scheme
The network server bracket Information, such as traffic load, the propagation path loss of the terminal node Beam Using the semi-appointed by the SF of the leaf node assigned to the leaf nodes. because of this bracket The terminal node you To reduce the probability of collisions between packets as reducing paper consumption and targets. SF proposed allocation method for the conjunction with the pseudo-code in <Figure 6> To All Well And as Explanation do.

One. bracket Terminal nodes are stable even a packet to be transmitted to the gateway month To ensure 7 time As the line first It shall be sent before the SF to 12. In addition, the base transmission power of the terminal node doxy system And area Specifications The first about Considering Huh Yongdoen Choi For transmitting power to doxy Determined [3]. In this paper, depending on the 3.1 system model terminal nodes Huh Yongdoen Choi Transmission power of 14d B The m in base transmit power doxy Determined. The network server

bracket Terminal nodes are in the position From Packets do the Gateway month That can be Choi It calculates the propagation path loss to determine the cattle SF. Propagation path loss is a gateway part Emitter ago Month receive 14d is an average RSSI of the packet with the default transmit power of the terminal node B With m car This is calculated through. Terminal node i in part The emitter Gateway Receive It is the RSSI RSSI i Is called, and the base transmission power to transmission power 14 [d B And as m] if, Mean propagation path loss PL i It is Well And it can be calculated as.

• • • • • • • • • •• • • •• • • • •

•

•

(One 0)

At this time, the average RSSI is determined by the door from a network server chin Value, • •• Calculate the

average of the two RSSI. The network server (1 0) Reception sensitivity of the propagation path loss value

and the gateway determined in (receiver sensitivit y) The terminal nodes are in the position by From Packets

- 18 -

< Table 5> Bandwidth 125 kHz receiving gateway according to an SF sensitivity

SF
Receiver sensitivity [dBm]

7
123

8 - 126

9 - 129

10 - 132

11
- 134.5

12 - 137

The gateway is also month That can be Choi Calculate the bovine SF (8-9 time line). Reception sensitivity of the gateway according to an SF when using the 125kHz bandwidth is equal to the <table 5> [14]. The network server is a terminal node, i in Choi Transmission power of 14d B When the RSSI of packets sent in the m reception Over That can Choi It allows small compute the SF. Table cools to prefecture And if All Well And the like.
14 - PL i> receiver sensitivit y according to SF (11), for example, PL i 13 0 Called to if, The RSSI 14 - PL i = - 116 [d B m] becomes. Terminal node i to Choi SF is to allocate a small 7 Me Fig, RSSI is a reception Over Since terminal node i for Choi It allows assigning a predetermined SF 7.
2. The network server SF obtained over the course of 1 bracket The terminal node Beam That the packet size, transmission period information Beam The background to bracket It allows calculation of the traffic load by the leaf nodes. And the sum of the traffic load of the terminal node for each SF (s u Calculating a traffic load of m) rear By SF and compare the sum of the traffic load (14-19 time line).
3.2 above time The bacteria SF by the sum of the traffic load in the calculation process brother this fit G Do If the Wu, SF with the virtual ashes To allocate zoom By agreement of the traffic load by bacteria SF brother of Fit give. In this case, the network server is Well And such rule By applying calculates the SF to be assigned to a terminal node.

rule 1. Assign an existing SF Beam All more Lower SF, ie more Me assign a high speed transmission If five Rather Channel O The flow about year quality Because more Lower SF is not allocated Do Neunda.

- 19 -

rule 2. The terminal node has a high traffic load makes it assigns the lowest possible SF. Bacteria of the traffic load by SF brother The shop in the terminal node to an existing SF Beam If you are assigned a higher SF Wu, Terminal nodes are transmitted to the ToA of the packet about To use the same transmission power, because doubling if on you Paper consumption compared to traditional about It is increased twice. As Russia Moire The leaf nodes having a low traffic load by part foundation Selection To allocate higher SF zoom By the you That if consumption increases Choi Digest.
Road traffic agreement bacteria brother this fit G Do If the Right Are two or Breaks occur Standing Saint bracket can do. first, If you increase the sum of the traffic load increases as SF Wu, And second If the sum is to reduce traffic load increases as SF Right To live bracket can do. That Reonde, rules The SF allocation in the year previous to the one Beam All more Lower SF is not allocated Do Based around reduced because the sum of the traffic load increases as SF Right on soup An agreement by bacteria of the traffic load brother To be adjusted. Thus, the network server distant Reduce the sum of the traffic load as low SF is increased and the interval is Find Arthur those applicable to SF • Beck Save the emitter. For example, the cell radius LoRaWAN 4,1 00 m is the terminal node 15 00 Private schools outside If you want to apply the algorithm in the local environment Right Agreed changes in the traffic load is equal to <Figure 5> camp All. <Figure 5> in the left
Figure SF9, SF1 0, SF11 is the sum of the traffic load will be reduced ball That can place, The SF9, SF1 0, The SF11 • Beck Save the emitter. And, distant That SF1 0 Of the terminal nodes using the rule The lowest traffic load in accordance with the second camp Terminal node part The haejun assign the emitter SF11. In this case, the network server SF1 0 And the sum of the traffic load of bacteria SF11 brother When you achieve How If SF1 0 And assign to the MS and the SF11 nodes in use. The results of the two <Figure 5> th As shown. That rear, hemp cold The leaf nodes of ways which reduce the traffic load of the leaf nodes that use the SF9 part Emitter SF1 0 It allows to allocate a. Agreed bacteria of the traffic load in this way by SF brother of Fit Associate Choi
The result is the last kind of <Figure 5> membrane I think the picture camp All.
-20-

< Figure 5> In the proposed algorithm, the traffic load by consensus SF change process

One: Input: List of N nodes N with corresponding path loss values

2:

P L , arrival rate L, payload information PayLoad i, small

3:

value •

4: Output: spreading factor vector SF of all nodes

5: # Find initial spreading factor selection

6: for i = 1 to N do

7:

SF i ← 12

8: while 14dBm - P L, i > Sensitivity ( SF i - 1) and SF i> 7 do

9:

SF i ← SF i- One

10: end for

11: # Sort end devices by traffic load in descending order

12: N = Sort ( N, L ⊙ L)

13: # Calculate initial sum of traffic load of each SF group

14: for sf = 7 to 12 do

15: N sf ← Select end devices using Spreading factor, sf

16:

for • ∈ ??? • •• ??? do

17:

SumofTraffic [ sf] + = L i ⅩToA ( PayLoad i, SF i )

18:

end for

19: end for

20: # From SumofTraffic,

find subvectorQ, whose elements are

21: decreasing

22: Q = Find_subvector_whose_elements_decreasing ( SumofTraffic)

23: while Q! = Null do

24: # Balancing the SumofTraffic of two adjacent SF group N sf ,

25: N sf + 1 within Q

26: for k = 1 to length ( Q) - One do

27:

sf ← SF of Q [ k]

28: # Increase SF of node until the difference of SumofTraffic of

29:

two adjacent SF group within small value •

30:

for • ∈ N sf do

31:

if | SumofTraffic ( N sf) -SumofTraffic ( N sf + 1) | > • then

32:

• • ??? ← •• • + One

•

33:

else if break

34:

end for

35: end for

36: Q = Find_subvector_whose_elements_decreasing ( SumofTraffic)

< Figure 6> SF allocation method of pseudo code that offers

- 21 -

Is calculated over a proposed allocation scheme of SF SF is calculated from an algorithm suitable for the transmission power 3.2.2 transmit power allocation scheme for the network server to the terminal node after To, in conjunction with the transmit power To And incense Through the link it is allocated to a terminal node.
3.2.2 transmit power allocation scheme
Suggested transmit power allocation scheme is that the gateway Mulberry To a terminal node in Lee part foundation Receive The RSSI of packets and the How To a terminal node in part foundation Receive One is the RSSI of packets available copper The working control the transmission power so. This aims to reduce the perspective problems that can occur between a terminal node.
Suggested transmit power allocation scheme is to calculate the appropriate SF to the terminal node to the network server via the SF allocation scheme rear on action do. The network server SF 3.2.1 determines the terminal node and the transmission power of the leaf nodes based on the propagation path loss between the gateway calculated in the assignment method.
Proposed transmit power allocation scheme, which is also the pseudo-code in <Figure 7> To All Well And as Explanation do.
1. In a network server that can be transferred to a terminal node Choi A small power • m in Calculate the (6-11 time line). Here, that can be sent to the terminal node Choi Small power What 3.2.1 the SF, and the transmission power calculated by the SF allocation scheme ( • ••) When using a terminal node transmits the packet, which allows to successfully receive from the gateway • ••
medium Choi The minimum value of beauty do. 2. Perspective of the terminal node problem Suffer The group easy Leaf node of the propagation path loss value of the large Said terminal node plate The end. The proposed transmit power allocation scheme for the terminal node Oh yeah Said tank terminal node (reference end device) part Reunda. Oh yeah When crude leaf node, the network server to control the transmission power of the other leaf nodes Oh yeah Joe is a terminal node. The network server Oh yeah Assigned to the tank terminal node to the terminal node To be That can Choi Transmission power of 14d B Assigns m.
- 22 -

< Table 6> The CCR value used in the paper [4]

Desired SF

Interferer SF
7 8 9 10 11 12

7

8

9

10

11

12

-6

16

18

19

19

20

24

-6

20

22

22

22

27

27

-6

23

25

25

30

30

30

-6

26

28

33

33

33

33

-6

29

36

36

36

36

36

-6

this Reot Shop by Oh yeah Joe is a terminal node From Packet to the other terminal node From By the packet Receive The aim is to reduce the interference. Oh yeah RSSI value of the leaf node Action is M And it stores the inRSSI (14 time line). 3. The network server transmits a packet to another terminal node Oh yeah Interference to the packet couple terminal node sends Choi To give the least the transmission power of the other leaf nodes production The crabs. The network server of the CCR values ​between different SF <Table 6> Choi The minimum value of the reference min (CCR) controls the transmission power of the other leaf nodes (15 time line). In this case, the min (CCR) is 16. It is to control the transmission power of the other terminal node, based on the min (CCR) U It is Well And the like. Terminal node • The transmission packet is another terminal node • In order to become aware of the transmission of a packet of dietary (12) Lip year Hey do.

• • • • • • • • • • • •• • •• • •

12

•

• ••

•

• ••

•

•

In the formula (12) •• • It is a terminal node • Of the SF values ​are used beauty do. For example, the leaf nodes • SF 7, the leaf nodes that is used • It is used and is called the SF 12 If, < Table 6> Desired SF is because it is 12, Interferer SF 7 in ••• • •• • • •• • • It is 36. At this time, ••• • •• • • •• • • The value production Lead If small Eulsurok terminal node • The transmission packet is a terminal node • The language to be recognized for a transmitted packet Hunting All. Terminal node • And a terminal node • When the SF is different from using the terminal

- 23 -

Nodes • The transmission packet is a terminal node • The most difficult to be recognized for the transmitting packet luck circa Right Depend on <Table 6> if Terminal node • The SF 8, the leaf nodes that use • The SF is used around seven Right to be. like this, Oh yeah When the crude terminal SF and SF, which is another terminal node using the node a different, Oh yeah Packet couple terminal node sends a packet transmission node, the other terminal ••• • •• ••••• • •• ••••••••• • The value of the production If the Right Become the most recognized in the air Hunting All. Thus, equation (13) the castle Lip

do If, indeed In crude leaf node and SF to the other terminal node is used, regardless of Oh yeah Division terminal node sends a packet is recognized for the entire packet songhan the other leaf nodes.

•

••

••

••

• min • ••• •

13

• •• • •

• •• •• • •

• • • • • • • ••

• •• • • • • • • ••

The same as above U A network server min • ••• • Based on the equation (13) the castle Lip doing tiger In the

above Oh yeah A tank node, the outside It controls the transmission power of the other nodes.

4. The network server equation (13) Castle Lip Not Do If the Wu, The transmission power of the other terminal node 3d B m By day Dance By Oh yeah It is one such tank terminal node sends a packet is aware of the packet transmission by another terminal node. At this time, the lower the transmission power of the other leaf nodes sinker The limit is calculated in the process 1 • m in A (27-33 time line).

- 24 -

One: Input: List of N nodes N with corresponding path loss values

2:

P L ,, Matrix of CCR, Allocated spreading factor of all

3:

nodes SF

4: Output: TX power P of all nodes

5: # Find minimal TX power bound of all end device, P min

6: for i = 1 to N do

7:

P min, i ← 14dBm

8:

while P min, i - P L, i - 3dBm > Sensitivity ( SF i) and

9:

P min, i> 2dBm do

10:

P min, i ← P min, i - 3dBm

11: end for

12: # Sort end devices by path loss in ascending order

13: N = Sort ( N, P L)

14: MinRSSI = 14dBm-max ( P L)

15: MinCCR = min ( CCR)

16: # Allocate the minimum power to end device until assigned

17 : RSSI is not smaller than MinRSSI

18: for i = 1 to N do

19:

if P min, i - P L, i> MinRSSI then P i ← P min, i

20:

else if MinPowerIndex ← i

21:

break

22: end for

23: # Allocate the power to end device until the difference of

24: assigned RSSI and MinRSSI

It is not greater than MinCCR

25: for j = N to MinPowerIndex

26:

P j ← 14dBm

27:

while P j - P L, j

> MinRSSI + MinCCR and

28:

P j > P min, j

do

29:

Pj ← Pj

- 3dBm

30: while

| P j - P L, j - MinRSSI

| <MinCCR and

31:

P j > P min, j

do

32:

Pj ← Pj

- 3dBm

33: end for

< Figure 7> The pseudocode of the proposed transmit power allocation scheme for

- 25 -

4. Simulation Results

In this chapter, SF proposed allocation scheme and transmission power allocation performance evaluation packet transmission success rate for the Add method, average power consumption of a terminal node Amount, Process index for the packet transmission success rate (fairness inde x) Focusing on performance analysis do.

4.1 test environment

In this experiment, 3.1 system model <Figure 4> and replace as outside Assuming the area within a radius of 1km gateway 1 00 , 5 00 , 1, 000 Dog, 1,5 00; 2, 000 To a terminal node of the uniform pieces Distribution One phase sulfur By the number of terminal nodes in
M Experiments using atlab Progress It was. The type of application that the leaf nodes are used

< Table 7> and the like gun Three kinds of ratios and also the same as that shown in <Table 7>.

< Table 7> The type and rate of application used in the lab

Application scenario
Roadway Signs Traffic sensors Home security

• •
0.0 3 (3 0 s) 0.0 16 (6 0 s) 0.00 16 (1 0 min)

• ••• •• • •
One One 20

Percentage
5% 73% 22%

Terminal nodes Selection Power is transmitted to 2d B m, 5d B m, 8d B m, 11d B m, 14d B By m gun 5 gaemyeo, SF 7 part From 12 How G gun The 6 Selection can do. send channel The number of, but as one for receive window2 channel 1 a More Chu Simulations added Progress It was.

In the simulation is to calculate the power consumption of the terminal node Well Model was used as shown

in [16].

••

•

••

•

•• •• •

• •• • •

•

••

• • • • • × • •• • •

•• •• • ••

•• •

•• •

• • •• • •

( 14)

The variables used in the equation (14) above are shown in <Table 8>.

- 26 -

< Table 8> Variables for calculating the power consumption of the terminal node

Parameter
T total T sleep T tx, SF T rx1, rx2 n SF, s

Description The total time The sleep time The time taken to transmit u sing SF, s The time taken to open receive window1,2 The n u mber of trasnmitted packets u sing SF, s

< Table 9> Power consumption according to the state of the terminal node

State of end devices Sleep, R x window1 & R x window2
Transmit

power (mW) 0.00 495, 34.65 79.2, 82.5 82.5, 1 0 5.6, 145.2

In addition, the power consumption according to the state of the terminal node in this model are shown in <Table 9>.

4.2 Results and Analysis

Performance indicators used in this paper are all in the network All Of the leaf nodes
gun The number of packets transmitted over gun Percentage of successful packets (packet deliver y ratio) and an average consumption power (mW) per unit time of the terminal node. The average power consumption per unit time of the terminal node is Well And it was calculated as.

•

Terminal node • Uichong energy consumption •• • •

••

15

Simulation Run Time •• •

•• •

In the above formula (15) N That is used in the simulation gun Or the number of terminal nodes Get Nancy All. Simulation Room line Time is the actual time oh Nin, Or the time on simulation Tanaen All. Simulation Room line The time to 48 hours doxy It was determined.
In this paper, the performance of the proposed scheme was introduced in 2.2.1 link-based algorithms TTN ADR ADR [5], 2.2.2 network aware ADR ADR algorithm introduced in a non-contact when you apply [13] each Compare your performance against.

- 27 -

TTN ADR algorithm to TTN, ADR algorithm in paper [13] B Denoted by recht.
distant Well, TTN techniques and methods proposed in this paper, B Recht packet deliver the performance of the technique y ratio, the leaf nodes of the average power consumption in perspective analysis
It was tested sikimyeo changing the number of leaf nodes to. The result is shown in <Figure 8> <Figure 9>.
< Figure 8> Packet transmission success rate corresponding to the number of terminal nodes
- 28 -

< Figure 9> A terminal node corresponding to the number of terminal nodes per average power consumption
< Figure 1 0> A terminal node corresponding to the number of terminal nodes per average power consumption ( B recht compared with the technique)
- 29 -

< Figure 8> <Figure 9> in distant A technique for suggestions and techniques that TTN If you look, Packet transmission success rate, and a terminal node per unit's average power consumption is the number of terminal nodes Many Ah load Depending on the car Getting lice Many That I ball Can. this is, 2.2.1 Look This will like, If you want to apply the algorithm of the ADR TTN Right The network server is a terminal node at that location To send That can Choi Small SF, Choi It allows assigning a predetermined transmission power for a terminal node. Therefore, when the number of end-stage node in the network less LoRa there is a terminal node to communicate with low power. However, TTN is collision between the leaf nodes are not considered It was The number of terminal nodes in the network, because LoRa Many Ah quality circa Wu, It increases the probability of packet transmission collisions. Before Chapter 2 ADR part in Look This will like, In the terminal node of the SF and the transmission power to the network server part Emitter allocation Receive silver rear On incense If you want to continue the failed transmission link Right Leaf node chairs sieve Write the transmit power to 14d B m, and in the SF 12 Change All. Therefore, to a terminal node in the network LoRa
Many Ah quality circa Wu, To increase the probability of collision between transmitted packets When that time south 14d in the transmission power in accordance with B The number of terminal nodes using m, a 12-SF Many Ah camp All. These two U , The number of the leaf nodes as shown in <Figure 8> and <Figure 9> Many Ah load The packet transmission success rate and decreases with the terminal node of the average power consumption The amount The result is increased Beam Indah.
half if, The proposed scheme bracket Because in consideration of the traffic load on the terminal node it was assigned the SF LoRa network terminal node are the SF 7 part From 12 How It is used not uniformly. Chapter 1 and Chapter 2 Look This will like, Between different SF U four Straight D & C's Special Due to the gender terminal nodes path to transfer packets with a different SF Wu, When you send a packet with the same SF Beam It decreases the probability of packet collision. However, different SF is Wan Preached Straight D & C's Special Rather than having a castle U four Straight D & C's Special This can interfere with each other between a packet transmitted at different SF occur owing to the castle. In the proposed scheme to allocate transmission power of only the end nodes properly zoom By interference that can occur between the packets transferred by using different SF Effects And it reduced the. Thus, the increase in the number of single end nodes, more Any packet transmission success rate when applied to packets sent St. porosity is TTN when applying the proposed method Beam The high results Beam It was an. only just Rather, they offer little as possible the leaf nodes as possible through techniques
30-

One per terminal node when the average transmission power consumption, and a transmission power per a terminal node because aims to reduce the interference that may occur between different SF average transmission power of applying the TTN Beam It can be seen that low.
All Well In <Figure 8>, and <Figure 1 0> The proposed scheme through the B Performance when applying the techniques recht packet transmission success rate, and a terminal node of a mean power consumption from the point of view analysis do. <Figure 8> in ball You can Seems The packet transmission success rate when applying the proposed techniques and B Packet transmission success rate when applying the technique greatly recht car It is born Do Neunda. However, <Figure 1 0> Or in Tanan Results Looking, When the terminal node of the average power consumption is applied to the proposed method more Reduced All Thing ball That can place, That is U Are two Explanation do.
first, When the proposed assignment of the SF to the terminal node in the SF assignment scheme is a high traffic load camp A terminal node for assigning a low SF can zoom As it is due aims to reduce the power consumption of the terminal node.
second, RSSI and transmission power to a terminal node having the same <Figure 11> <Figure 12> place, When applying the proposed scheme 2d B The number of the leaf node to be allocated less transmit wave and m are as woro B Small transmission number of the leaf nodes that are allocated power when applying the techniques recht Beam All Many Because. In addition, the number of leaf nodes that are assigned to the high-power, when applying the proposed techniques are B recht group the high-power-number of leaf nodes that are assigned when applying the method Beam The less. Standing, along with the proposed scheme B The packet transmission success rate of non-recht techniques Seut And more Even average power consumption is reduced per terminal node when applied to the technique anhan All will be.
- 31 -

< Figure 11> When using the proposed transmit power allocation scheme RSSI results by SF
< Figure 12> SF specific when using the proposed transmit power allocation scheme Transmission power allocation results
- 32 -

Marge membrane , The proposed method and technique TTN, B When applying the technique recht process index for the packet transmission success rate (fairness inde x) Focusing on performance analysis
do. In this paper, the leaf nodes are linked by SF Earl That it is using to process mana analysis SF by the packet transmission success rate of the terminal node to (packet deliver y Calculated the ratio of the step index). At this time, the process index, J ain's fiarness inde x [ 17] was calculated using the. The expression that Well And the like.

•
••

•
•• • • • • • • • • •• • • • • • • • • • • •
•• •

• • ••• • • • •• • • • •

16

•

•

••

•

• •

• • • • • • • • ••• • • • • • •••

••

•

•• •

Process indices in the formula (16) is in the first Kkaul The more of that, and the leaf nodes are used evenly to SF beauty and, 0 Is the Kkaul The leaf nodes are Special The information SF House In that it is used by one beauty do. At this time, • •• It is a terminal node Selection The number of SF can. In this paper, • •• It is 6. • • • • • • • • •• • • • • • • • • • It is Well And the like.
•
• • • • • • • • • ••• •• • • • • •••• • • • • • • • • • • • • • • • • • • • • • ••• • • • • • ••• •
•• • • •• • • • • • • • • • • • • • •• • • • • •••• • •• • • • • • •• • • • • ... 17

In the formula (17) ball Being able like, • ••••• •••••••• ••••• • It is •• • Assign Receive
A leaf node is to be transmitted gun Of the number and percentage of successful packets from that packet beauty do.

Index process result of the packet transmission success rate of the terminal nodes each SF is shown in <Figure 13>. <Figure 13> the Looking, Process exponent result of applying the proposed method, the packet transmission success rate and sex B Index process result of the packet transmission success rate when applying the technique to the first recht Nearest You can see that. half if, Fair index of the packet transmission success rate when the technique is applied to TTN 0. 2 under You can check it in. That is U Ahead Explanation It was like TTN technique is not considered a conflict between the terminal nodes Do To a terminal node in said gateway Receive The SNR

- 33 -

just It is because allocation of SF considering. If you use the technique TTN Wu, The network server SNR is non Seut To a terminal node for Special It allows to assign a static SF. Therefore, the ratio SNR Seut The terminal nodes Many If the Wu, special Increasing the collision between the packet transmitted using the SF information and, in Chapter 2, Explanation It was like If you only end nodes fails continuously transmit packets Wu, Now the SF sieve When ever increasing to 12 Turns And it transmits the packet. These two U In <Figure 13> step index of the packet transmission rate of applying the method as in the TTN 0. 2 under The results Beam It was an.
< Figure 13> Process index of SF by the packet transmission success rate of the terminal node
- 34 -

5. Conclusion
The proposed technique is to obtain larger SF allocation scheme and transmission power allocation scheme minute do. In this paper, the SF allocated to the terminal node is used and is based on different traffic loads, depending on the application terminal node to define the concept of the traffic load. The terminal node is possible by controlling the transmission power of the terminal node Choi Using a low-power and tried to reduce the interference caused by perspective issues. This allows the SF allocation scheme, power consumption of the section is a reduced probability of collisions between transmission packets compared to the transmit power allocation scheme as a terminal node to an existing proposal about You can see that with the simulation results It was All. only just But, when applied to the proposed scheme are the leaf nodes located in a network can be checked through the simulation results to be used properly and the SF It was All.
Forward sinker We studied gajeok Hey which part Chapter between the terminal and the gateway node Ke The water is introduced or terminal nodes on a network server New to sinker Is that the sulfur Due to the network sulfur If there is a change in Wu, Chu Gajeok the part And the word that caused Tteot to Choi Digestion and Effects Overloading the SF and the power transmission ashes To give to allocate part to be.
- 35 -

references

[1] U. Raza, P. Kulkarni, M. Sooriyabandara, "Low Power Wide Area Networks: An Overview ", IEEE Commucation Surveys & Tutorials, vol. 19, no. 2, 2017. [2] A. Augustin, J. Yi, T. Clausen, WM Townsley, "A study of LoRa: Long
range & low power networks for the Internet of Things", Sensors, vol. 16, no. 9, pp. 1466, 2016. [3] T. Committee, "Lorawan 1.1 specification," 2017, loRa Alliance. [4] C. Goursaud and J.-M. Gorce,

"Dedicated networks for

IoT:

PHY / MAC state of

the art and challenges, "EAI endorsed

transactions on Internet of Things, 2015.

[Online]. Available:

https://hal.archives-ouvertes.fr/hal-01231221 [5] The Things Network,

"The Thing Network Mission," https://github.com/TheThingsNetwork/Manifest/blob/master/Mission.md, 2015, [Online; accessed29May2017].

[6] Vojtech Hauser, Tomáš Hégr, "Proposal of Adaptive Data Rate Algorithm for LoRaWAN-based Infrastructure, "IEEE 5th International Conf. on Future Internet of Things and Cloud, pp. 85-90, Aug. 2017.

[7] Mariusz Slabicki et al., "Adaptive Configuration of LoRa Networks for Dense IoT Deployments, "will be presented at NOMS 2018.

[8] O. Georgiou, U. Raza, "Low Power Wide Area Network Analysis: Can LoRa Scale? ", IEEE Wireless Communications Letters, vol. 6, no. 2, pp. 162-165, April 2017.

[9] A. Augustin, J. Yi, T. Clausen, WM Townsley, "A study of LoRa: Long range & low power networks for the Internet of Things ",

- 36 -

Sensors, vol. 16, no. 9, pp. 1466, 2016.

[10] D.-Y. Kim, S. Kim, H. Hassan, and JH Park, "Adaptive Data Rate Control in Low Power Wide Area Networks for Long Range IoT Services, "Journal of

Computational Science, 2017 [11] Bor, M .; Roedig, U. LoRa Transmission Parameter

Selection. In

Proceedings of

the 13th IEEE International Conference on

Distributed Computing in Sensor Systems (DCOSS), Ottawa, ON, Canada, 5-7 June 2017

[12] Francesca Cuomo et al, "EXPLoRa:. EXtending the Performance of LoRa by suimatrix spreading factor allocation ns, " Proc. 13th IEEE Int. Conf. Wireless

Mobile Comput. (WiMOB), pp. 1-8, 2017. [13] B. Reynders, W. Meert, and S. Pollin, "Power and

Spreading

Factor Control

in Low Power Wide Area Networks, "in IEEE ICC

2017 SAC Symposium Internet of Things Track (ICC'17 SAC-7 IoT),

2017, pp. 1-5.

[14] SX1272 / 73 Datasheet. Semtech Corporation, March 2015 [15] J. Petäjäjärvi, K. Mikhaylov,

M. Pettissalo, J. Janhunen, J. Iinatti,

"Performance of a low-power wide-area network based on LoRa technology:

Doppler

robustness

scalability and coverage ",

,vol.13, no.3, pp.1-16,2017.

[16] S. Mathur, A. Sankar, P. Prasan, and B.

Iannucci, "Energy

Analysis of LoRaWAN Technology for Traffic Sensing Applications, "in Intelligent

Transportation Society of America (ITS) World Congress, Montréal, 2017.

[17] R. Jain, D.-M. Chiu, and W. Hawe, "A quantitative measure of fairness and. discrimination for resource allocation in shared computer system, "Digital Equipment Corp., Tech. Rep, 1984.

- 37 -

Abstract
Interest in the Internet of things (IoT) has been steadil y growing, and the IoT b u siness is e x pected to grow rapidl y. However, d u e to the variet y of applications on the IoT, conventional cell u lar comm u nication or WiFi comm u nication technologies can not satisf y vario u s re qu irements of IoT applications.
The LPWA (Low Power Wide Area) network meets the re qu irements of IoT applications that were diffic u lt to meet with e x isting comm u nication technologies b y enabling lowpower, long-distance comm u nication of the end devices in the network. LoRaWAN is one of the representative technologies of LPWAN.
In this paper, we tried to solve the problem of batter y cons u mption of the end device d u e to increase of collision between transmitted packets or near far problem in LoRaWAN environment. For this p u rpose, we aimed to solve the near far problem b y appropriatel y ad ju sting the transmission power of the end device in the network server. We also aimed to decrease the probabilit y of collision between transmitted packets and red u ce the power cons u mption of the end devices b y
appropriatel y allocating the spreading factor to the end devices. We have defined the concept of traffic load considering that there are vario u s
applications in the real LoRaWAN environment and that packet transmission period and the packet size are different for each application. The traffic load is defined to reflect that the load on the network per u nit time
- 38 -

It differs for each application. The traffic load of an end device is defined as the prod u ct of the packet transmission period of the application and the time on air (ToA). ToA is determined b y the spreading factor u sed b y the end device, packet size, and bandwidth, and so on. The network server red u ces the probabilit y of collision between transmitted packets by allocating a spreading factor to the end devices based on traffic load. In addition to this, network server allocates as possible as a low spreading factor, ie, a high data rate, to an end device having a high traffic load. In order to solve the interference problem and the near far problem that ma y occ u r between the end devices with different spreading factors, we ad ju st the transmission power of end devices so that RSSIs (Received Signal Strength Indication) are same.
In this paper, we confirm that the proposed scheme red u ces the collision probabilit y and the power cons u mption of the end device compared to the previo u s st u dies that control the transmission power and spreading factor of the end device in the LoRaWAN environment.
Key words: Traffic load, Spreading factor allocation scheme, Transmission power allocation scheme
Student number: 2 0 16-21223
- 39 -

