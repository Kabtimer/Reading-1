Deploying low-cost and longrange Internet of Things in developing countries! !
the challenges of the WAZIUP H2020 project!
SMYLE event on! !
“Understand the issues and challenges of the connected world”! ! September 23rd, 2016 ! Neuchâtel, Switzerland!
Prof. Congduc Pham!
http://www.univ-pau.fr/~cpham!
Université de Pau, France!
!

IoT domain (in Africa)!

Irrigation & Agriculture

Livestock farming

Fish farming & aquaculture

Storage & logistic

Health

Water quality 2	


Rural Sensing!

Moisture/ Temperature of storage areas

10-15kms
Pay subscription Limitation of coverage High energy consumption

200-500mA 500-1000mA 100-300mA 3	


Energy consideration!
TX power: 500mA P = I x V = 500 x 3.3 = 1650mW E = P x t -> t = E/P 18720 Joules! 11345s or 3h9mins
Haven’t considered: -  Baseline power consumption of
the sensor board -  RX consumption! -  Event capture consumption -  Event processing consumption
4	


Low-power and longrange?!
Energy

Enhanced from M. Dohler “M2M in SmartCities”

5	


Increasing range?!
q Generally, robustness and sensitivity can be increased when transmitting (much) slower
q  A[Sigfox message is sent relatively slowly in a very narrow band of spectrum (hence ultranarrow-band) using Gaussian Frequency-Shift Keying modulation]. Max throughput=~100bps
q LoRa also increases time-on-air when maximum range is needed. But LoRa uses spread spectrum instead of UNB. 300bps-37.5kbps
6	


LoRa modules from Semtech’s SX127x chips!
Libelium LoRa is based on Semtech SX1272 LoRa 863-870 MHz for Europe

DORJI DRF1278DM is based on Semtech SX1278 LoRa 433MHz

HopeRF RFM series

HopeRF HMTRLR-D

Multi-Tech MultiConnect mDot

inAir9 based on SX1276

LinkLabs Symphony module

IMST IM880A-L is based on Semtech SX1272 LoRa 863-870 MHz for Europe

Embit LoRa

Froggy Factory LoRa module (Arduino)

Adeunis ARF8030AA- Lo868 habSupplies
AMIHO AM093

Microship RN2483

ARM-Nano N8 LoRa module from ATIM

SODAQ LoRaBee Embit

SODAQ LoRaBee
RN2483 7	


The long-range revolution!

Theoretical capacity of 125kHz and 2MHz radio channels considering a 7.5dB NF receiver

Sensitivity: lowest input power with acceptable link quality, typically 1% PER

LoRa SX1272 at 868MHz

433/868 typical

Industry best class at 868MHz

From Peter R. Egli, INDIGOO.COM

The lower the receiver sensitivity, the longer is the range!
9	


The long-range revolution!

Theoretical capacity of 125kHz and 2MHz radio channels considering a 7.5dB NF receiver

Sensitivity: lowest input power with acceptable link quality, typically 1% PER

LoRa SX1272 at 868MHz

433/868 typical

Industry best class at 868MHz

From Peter R. Egli, INDIGOO.COM

The lower the receiver sensitivity, the longer is the range!
10	


Low Power WAN (LPWAN) ?!

200-500mA 500-1000mA 100-300mA

18mA

18mA

Tables from Semtech

14	


LPWAN architecture!
Figure from Semtech
15	


maturation of the IoT market…!
16	


control, optimize & instrument !!
DATA ANALYSIS, OPTIMIZATION & CONTROL!
Pervasive Systems!
Sensing!
PEOPLES, INFRASTRUCTURES, BUILDINGS, VEHICULES!
17	


big data analytics!
Graphics from http://www.vitria.com/iot-analytics/
18	


IoT becomes reality!!
19	


From scoop.it!
20	


IoT in sub-saharan Africa!
q Africa's countries are still far from being ready to enjoy the smallest benefit of IoT
q lack of infrastructure q high cost of hardware q complexity in deployment q lack of technological eco-system and background
21	


IoT in sub-saharan Africa!
q Africa's countries are still far from being ready to enjoy the smallest benefit of IoT
q lack of infrastructure q high cost of hardware q complexity in deployment
? ? q lack of technological eco-system and background
?
22	


maturation of the IoT market…!
… but not adapted for rural africa context
Too expensive Too integrated Highly specialized Difficult to customize Difficult to upgrade
23	


big data analytics!
Internet connectivity is weak and expensive
Graphics from http://www.vitria.com/iot-analytics/
24	


IoT in sub-saharan Africa!
? ? q Africa's countries are still far from being ready to enjoy the smallest benefit of IoT q lack of infrastructure ? q high cost of hardware q complexity in deployment q lack of technological eco-system and background q to deploy IoT in Sub-Saharan Africa, it is
necessary to target three major issues
q reduce cost of infrastructures, hardware and services q limit dependancy to proprietary infrastructures and
provide local interaction models q target technology appropriation, push for local
business models 25	


IoT for rural applications in developping countries!

q WAZIUP is an EU H2020 project (2016-2019) q contributes to long-range networks for rural
applications with WP2 and big data with WP3

Prepara&on) and)planning)
that)responded) to)users)need)
(WP1))

Open)IoT)sensing)and) communica&on) pla;orm)(WP2))
Open)big)data) applica&on)pla;orm)
(WP3))

User)acceptance)and)business)model)(WP5))

Building)sustainable)innova&on)community)and)ecosystem)(WP6))) Project)coordina&on)and)innova&on)management)(WP7)))

26	


Low-cost hardware!
27	


The DIY ecosystem!
q Many powerfull microcontroller boards available q Do-It-Yourself approach with off-the-shelves
components more adapted
Arduino Pro Mini

Teensy 3.2

Theairboard on kickstarter

Tinyduino

STM32 Nucleo-32
28	


Why go for Arduino?!
q Cheap, open, and easy to use/program q huge developer communities
q Hardware is not the main important issue q Software is!
29	


SW/HW building blocks integration!

Ideetron Nexus

Teensy3.1/3.2

LoRa radios that our library already supports

HopeRF RFM92W/95W Libelium LoRa

Modtronix inAir9/9B

NiceRF LoRa1276

Long-Range communication library
30	


Generic sensing IoT device!
q  Build low-cost, low-power, Long-range enabled generic platform
q  Methodology for low-cost platform design q  Technology transfers to user communities,
economic actors, stakeholders,…
31	


Generic sensing IoT device!

q  Build low-cost, low-power, Long-range enabled

generic platform

q  MetMhionidmoumloVgiayblfeoPrroloduwct-cost plaWAtZfIoUPrPmROJEdCTesign WP1

q  TechnAWodavizlsioourpygy traWnaszifupers to user communities,

WP2 WP3 WP4

econoBomardic actCoomrmsu,nitsytakeholders,…

WP5 WP6

MVP 1
Water Fish Farming

MVP 2
Cattle Rustling

MVP 3 AGRI

MVP 4
Logistic Transport

MVP 5 Urban Waste mgt

Credit: P. Cousin, EGM

32	


Ready-to-use templates!

Physical sensor reading

Physical sensor reading

Physical sensor reading

Physical sensor management
Security

Long-range transmission

Activity dutycycle, low power
Logical sensor management
33	


CS GND

MOSI MISO CLK VCC

Easy integration and customization!
Arduino Pro Mini 3.3v and 8MHz version
34	


Running for 1 year with low-power mode!!
Low-Power library from RocketScream

2500mAh

Can run for 100 days with 1 measure/10min
Can run for 1 year with 1 measure/1h

Thanks to T. Mesplou and P. Plouraboué for their help

Wakes-up every 10min, take a measure (temp) and send to GW
146µA in deep sleep mode, 93mA when active and sending
35	


LoRa Gateways!
(non exhaustive list)!

Multi-Tech Conduit

Embedded Planet EP-M2M-LORA

LinkLabs Symphony

PicoWAN from Archos

Ideetron Lorank 8

Kerlink IoT Station

TheThingNetwork

From 250€ to 1500€
36	


Raspberry-based LoRa gateway!
We can use all model of Raspberry. The most important usefull feature is the Ethernet interface for easy Internet connection. Then WiFi and Bluetooth can be added with USB dongles. RPI3 provides built-in Ethernet, WiFi and Bluetooth!
Less than 50€
38	


Simplicity!!

Ideetron Nexus

Teensy3.1/3.2

LoRa radios that our library already supports

HopeRF RFM92W/95W Libelium LoRa

Modtronix inAir9/9B

NiceRF LoRa1276

Long-Range communication library

sendPacketTimeout(”18.5”);!
// sends to gateway!
// 18.5 : temperature message!
1 send function!
39	


Our Low-Cost gateway architecture!

Kept as simple as possible

high-level lang. e.g. python

Most of user or application specific logics is done here! We provide some basic features, up to you to enhance them

radio bridge program

stdout!

post

stdout!

processing

stdin!

postprocessing

user/appspecific

lora_gateway program

Long-range radio lib

Raspbian

41	


Transparent LoRa bridge!

T=23°!
Node 10!
H=85%!
Node 3!

radio bridge program

stdout!

> sudo ./lora_gateway! Power ON: state 0! LoRa mode: 4! Setting mode: state 0! Channel CH_10_868: state 0! Power M: state 0! Get Preamble Length: state 0! Preamble Length: 8! LoRa addr 1 : state 0! SX1272/76 configured as LR-BS. Waiting RF input for transparent RF-serial bridge! ! --- rxlora. dst=1 type=0x10 src=10 seq=0 len=5 SNR=9 RSSIpkt=-54! ^p1,16,10,0,5,9,-54! T=23°! --- rxlora. dst=1 type=0x10 src=3 seq=0 len=5 SNR=8 RSSIpkt=-54! ^p1,16,3,0,5,8,-54! H=85%! !

42	


IoT cloud?!
43	


Log received messages using cloud services!

\$T=23°!
Node 10!
\&H=85%!
Node 3!

radio bridge program

stdout!

post

processing

stdin!

> sudo ./lora_gateway | python ./post_processing_gw.py!

Power ON: state 0!

LoRa mode: 4!

Setting mode: state 0!

Channel CH_10_868: state 0! Power M: state 0! Get Preamble Length: state 0! Preamble Length: 8!

\$ or \& before the data indicates that the data should be logged on a file or server. It is up to the end-device to decide which option

LoRa addr 1 : state 0!

SX1272/76 configured as LR-BS. Waiting RF input for transparent RF-serial bridge!

!

--- rxlora. dst=1 type=0x10 src=10 seq=0 len=5 SNR=9 RSSIpkt=-54!

Rcv ctrl packet info 1,16,10,0,5,9,-54!

(dst=1 type=0x10 src=10 seq=0 len=5 SNR=9 RSSI=-54)!

rcv msg to log (\$) on dropbox : T=23°!

--- rxlora. dst=1 type=0x10 src=3 seq=0 len=5 SNR=8 RSSIpkt=-54!

Rcv ctrl packet info 1,16,3,0,5,8,-54!

(dst=1 type=0x10 src=3 seq=0 len=5 SNR=8 RSSI=-54)!

rcv msg to log (\&) on firebase : H=85%!

!

44	


Templates for various clouds!
45	


Do it yourself !!

Python scripts available

Step-by-step tutorial and source code available

Step-by-step tutorial and source code available

https://github.com/CongducPham/LowCostLoRaGw
46	


Working without Internet access!

A
10-15kms
No subscription Deploy own network Low energy consumption
B

Internet access

47	


Standalone gateway!
48	


Local data analytics!

OpenStack Cloud
Controller

Buildpacks Java Python

Create VMs

PHP Scala

New Flink

New IoT broker

Services

Execution Env

Cloud Foundry deploy

Mongo DB

HTTP server

MySQL

…

deploy locally
New MongoDB

- App.java - Local.java
Manifest: -  <as before> -  Flink -  IoT Broker New -  Local deploy: -  Local.java -  Mongo DB

Credit: C. Dupont, CreateNet
49	


Figure from Semtech

radio bridge program

stdout

post

processing

stdin

A
Application, MVP

WAZIUP Sensor platform

WAZIUP gateway platform

B

WAZIUP platform

Now,! IoT becomes reality!!
51	


Use case: fish pond monitoring!
q Farmerline in Ghana q Water temperature and dissolved oxygen for
monitoring fish ponds
Kuma Farm Complex
52	


Out-of-the-box !!

Physical sensor reading

Physical sensor management
Security

Long-range transmission

Activity dutycycle, low power
Logical sensor management

53	


Things we are doing for research!
q To leverage the « single » connection gateway approach
q Smarter radio channel access mechanism
q Image sensor
q Transfer low-resolution images for context-awareness applications
q To handle larger amount of data (image)
q Quality of Service mechanism q Activity sharing mechanism
q The proposed framework can be used to set-up your own LoRa test-bed for implementing advanced mechanisms
54	


Added-value!

Involving innovation hubs/stakeholders!
•  Close to dev & entrepreneurs communities •  Have their own community and com channels (community builders & catalysts) •  Used to organizing disruptive events •  On the field (know the targets personaly & the market) •  Used to empowering startups & businesses (coaching, business dev, incubation, acceleration…) •  Affiliated to international networks that could be involved in dissemination or Business dev (Afrilabs)

Credit: C. Vavasseur, CTIC Dakar

57	


Community engagement!

Innovation Hackathons	   Lab
Weeks	  

Participation

Startup weekends	  

Webinars	  

Conferences	  

Workshop	  

to international

events	  

	   Presentation
events	  

Publications

Scientific researchers	  

þ	  

þ	  

þ	  

þ	  

þ	  

þ	  

þ	  

Developers	  

þ	  

þ	  

þ	  

þ	  

þ	  

þ	  

þ	  

þ	  

Entrepreneurs 	  

þ	  

þ	  

þ	  

þ	  

þ	  

þ	  

þ	  

þ	  

End-users	  

þ	  

þ	  

Standardisatio n and policy
makers	  
Application industries 	  

þ	  

þ	  

þ	  

þ	  

þ	  

þ	  

Investors	  

þ	  

þ	  

Credit: C. Vavasseur, CTIC Dakar

þ	  

þ	  

þ	  

þ	  

þ	  

þ	  

þ	  

58	


Building WAZIUP community and ecosystem!

In+te2rn0aaottriotgenanandlizeEedvden&ts
Launch event (Ghana, iSpace)

Workshop at the European Conference on Networks & Cmmunications (Greece, CNET)

Launch event (Senegal, CTIC Dakar)

IoTWeek2016 (Belgrade, EGM)

WAZIUP Workshop on IoT (Togo, L'Africaine d'Architecture)

IoTBigData2016 (Italy, EGM)

59	
 IoTCareConference (Budapest, CNET)
Credit: C. Vavasseur, CTIC Dakar Workshop at the RESSACS 2016 (France, UPPA)

Open Long-range test-bed & benchmark!
60	


Tutorials/resources!

EU"H2020"grant"agreement"number"687607"
Low-cost LoRa IoT devices and gateway FAQ

1) What is Internet-of-Thing (IoT)?
From IERC (European Research Cluster on the Internet of Thing)
The IERC definition states that IoT is "A dynamic global network infrastructure with self-configuring capabilities based on standard and interoperable communication protocols where physical and virtual “things” have identities, physical attributes, and virtual personalities and use intelligent interfaces, and are seamlessly integrated into the information network."
From http://www.gartner.com/it-glossary/internet-of-things/
"The Internet of Things (IoT) is the network of physical objects that contain embedded technology to communicate and sense or interact with their internal states or the external environment."
From http://internetofthingsagenda.techtarget.com/definition/Internet-of-Things-IoT
"The Internet of Things (IoT) is a system of interrelated computing devices, mechanical and digital machines, objects, animals or people that are provided with unique identifiers and the ability to transfer data over a network without requiring human-to-human or human-to-computer interaction."
2) What is WAZIUP?
The EU H2020 WAZIUP project, namely the Open Innovation Platform for IoT-Big Data in Sub-Saharan Africa is a collaborative research project using cutting edge technology applying IoT and Big Data to improve the working conditions in the rural ecosystem of Sub-Saharan Africa. First, WAZIUP operates by involving farmers and breeders in order to define the platform specifications in focused validation cases. Second, while tackling challenges which are specific to the rural ecosystem, it also engages the flourishing ICT ecosystem in those countries by fostering new tools and good practices, entrepreneurship and start-ups. Aimed at boosting the ICT sector, WAZIUP proposes solutions aiming at long term sustainability.
WAZIUP will deliver a communication and big data application platform and generate locally the know how by training by use case and examples. The use of standards will help to create an interoperable platform, fully open source, oriented to radically new paradigms for innovative application/services delivery. WAZIUP is driven by the following visions:
1. Empower the African Rural Economy. Develop new technological enablers to empower the African rural economy now threatened by the concurrent action of rapid urbanization and of climate change. WAZIUP technologies can support the necessary services and infrastructures to launch agriculture and breeding on a new scale;

Tutorial on hardware & software for low-cost long-
range IoT!
Prof. Congduc Pham! http://www.univ-pau.fr/~cpham!
Université de Pau, France! !

Author : Congduc Pham, University of Pau, France Last update : 07.09.2016

page 1"

Low-cost LoRa IoT device:! a step-by-step tutorial!
Prof. Congduc Pham! http://www.univ-pau.fr/~cpham!
Université de Pau, France! !

Building an IoT device for outdoor usage:!
a step-by-step tutorial!
Prof. Congduc Pham! http://www.univ-pau.fr/~cpham!
Université de Pau, France! !

Low-cost LoRa IoT device:! supported physical sensors!

Low-cost LoRa gateway:! a step-by-step tutorial!

Low-cost LoRa IoT:! using the WAZIUP demo kit!

Prof. Congduc Pham! http://www.univ-pau.fr/~cpham!
Université de Pau, France!
!

Prof. Congduc Pham! http://www.univ-pau.fr/~cpham!
Université de Pau, France!
!

Prof. Congduc Pham! http://www.univ-pau.fr/~cpham!
Université de Pau, France!
!

61	


Thanks.
Let’s keep in touch
Carine VAVASSEUR Communication & Event Manager Carine.vavasseur@cticdakar.com
www.cticdakar.com contact@cticdakar.com

facebook.com/waziupIoT twitter.com/waziupIoT linkedin.com/groups/8156933 github.com/waziup

